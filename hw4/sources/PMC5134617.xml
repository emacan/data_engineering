<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD v1.0 20120330//EN" "JATS-archivearticle1.dtd">
<article xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:mml="http://www.w3.org/1998/Math/MathML" article-type="research-article"><?properties open_access?><front><journal-meta><journal-id journal-id-type="nlm-ta">Sensors (Basel)</journal-id><journal-id journal-id-type="iso-abbrev">Sensors (Basel)</journal-id><journal-id journal-id-type="publisher-id">sensors</journal-id><journal-title-group><journal-title>Sensors (Basel, Switzerland)</journal-title></journal-title-group><issn pub-type="epub">1424-8220</issn><publisher><publisher-name>MDPI</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="pmid">27879663</article-id><article-id pub-id-type="pmc">PMC5134617</article-id><article-id pub-id-type="doi">10.3390/s16111958</article-id><article-id pub-id-type="publisher-id">sensors-16-01958</article-id><article-categories><subj-group subj-group-type="heading"><subject>Article</subject></subj-group></article-categories><title-group><article-title>Queuing Time Prediction Using WiFi Positioning Data in an Indoor Scenario</article-title></title-group><contrib-group><contrib contrib-type="author"><name><surname>Shu</surname><given-names>Hua</given-names></name><xref ref-type="aff" rid="af1-sensors-16-01958">1</xref><xref ref-type="aff" rid="af2-sensors-16-01958">2</xref></contrib><contrib contrib-type="author"><name><surname>Song</surname><given-names>Ci</given-names></name><xref ref-type="aff" rid="af1-sensors-16-01958">1</xref></contrib><contrib contrib-type="author"><name><surname>Pei</surname><given-names>Tao</given-names></name><xref ref-type="aff" rid="af1-sensors-16-01958">1</xref><xref rid="c1-sensors-16-01958" ref-type="corresp">*</xref></contrib><contrib contrib-type="author"><name><surname>Xu</surname><given-names>Lianming</given-names></name><xref ref-type="aff" rid="af3-sensors-16-01958">3</xref></contrib><contrib contrib-type="author"><name><surname>Ou</surname><given-names>Yang</given-names></name><xref ref-type="aff" rid="af3-sensors-16-01958">3</xref></contrib><contrib contrib-type="author"><name><surname>Zhang</surname><given-names>Libin</given-names></name><xref ref-type="aff" rid="af4-sensors-16-01958">4</xref></contrib><contrib contrib-type="author"><name><surname>Li</surname><given-names>Tao</given-names></name><xref ref-type="aff" rid="af4-sensors-16-01958">4</xref></contrib></contrib-group><contrib-group><contrib contrib-type="editor"><name><surname>Ye</surname><given-names>Fan</given-names></name><role>Academic Editor</role></contrib></contrib-group><aff id="af1-sensors-16-01958"><label>1</label>State Key Laboratory of Resources and Environmental Information System, Institute of Geographic Sciences and Natural Resources Research, CAS, Beijing 100101, China; <email>shuh@lreis.ac.cn</email> (H.S.); <email>songc@lreis.ac.cn</email> (C.S.)</aff><aff id="af2-sensors-16-01958"><label>2</label>University of Chinese Academy of Sciences, Beijing 100049, China</aff><aff id="af3-sensors-16-01958"><label>3</label>RTmap Science and Technology Ltd., Beijing 100093, China; <email>xulianming@rtmap.com</email> (L.X.); <email>ouyang@rtmap.com</email> (Y.O.)</aff><aff id="af4-sensors-16-01958"><label>4</label>Information Technology Department, Beijing Capital International Airport Co., Ltd., Beijing 100621, China; <email>zhanglb@bcia.com.cn</email> (L.Z.); <email>lit2@bcia.com.cn</email> (T.L.)</aff><author-notes><corresp id="c1-sensors-16-01958"><label>*</label>Correspondence: <email>peit@lreis.ac.cn</email>; Tel.: +86-10-6488-8960</corresp></author-notes><pub-date pub-type="epub"><day>22</day><month>11</month><year>2016</year></pub-date><pub-date pub-type="collection"><month>11</month><year>2016</year></pub-date><volume>16</volume><issue>11</issue><elocation-id>1958</elocation-id><history><date date-type="received"><day>19</day><month>7</month><year>2016</year></date><date date-type="accepted"><day>16</day><month>11</month><year>2016</year></date></history><permissions><copyright-statement>&#x000a9; 2016 by the authors; licensee MDPI, Basel, Switzerland.</copyright-statement><copyright-year>2016</copyright-year><license><license-p><!--CREATIVE COMMONS-->This article is an open access article distributed under the terms and conditions of the Creative Commons Attribution (CC-BY) license (<ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</ext-link>).</license-p></license></permissions><abstract><p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals&#x02019; average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day&#x02019;s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p></abstract><kwd-group><kwd>indoor queuing time</kwd><kwd>WiFi positioning</kwd><kwd>trajectory</kwd><kwd>mobile</kwd><kwd>time series analysis</kwd></kwd-group></article-meta></front><body><sec id="sec1-sensors-16-01958"><title>1. Introduction</title><p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid="B1-sensors-16-01958" ref-type="bibr">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals&#x02019; time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid="B2-sensors-16-01958" ref-type="bibr">2</xref>], an important factor affecting individuals&#x02019; service satisfaction is whether the waiting time is foreseeable [<xref rid="B3-sensors-16-01958" ref-type="bibr">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p><p>Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.
<list list-type="bullet"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid="B4-sensors-16-01958" ref-type="bibr">4</xref>,<xref rid="B5-sensors-16-01958" ref-type="bibr">5</xref>,<xref rid="B6-sensors-16-01958" ref-type="bibr">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid="B7-sensors-16-01958" ref-type="bibr">7</xref>] using the following equation:
<disp-formula id="FD1-sensors-16-01958"><label>(1)</label><mml:math id="mm1"><mml:mrow><mml:msub><mml:mi>T</mml:mi><mml:mrow><mml:mi>a</mml:mi><mml:mi>v</mml:mi><mml:mi>g</mml:mi></mml:mrow></mml:msub><mml:mo>&#x02248;</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msubsup><mml:mstyle mathsize="140%" displaystyle="true"><mml:mo>&#x0222b;</mml:mo></mml:mstyle><mml:mn>0</mml:mn><mml:mi>&#x0221e;</mml:mi></mml:msubsup><mml:mi>x</mml:mi><mml:msub><mml:mi>p</mml:mi><mml:mi>N</mml:mi></mml:msub><mml:mrow><mml:mo>(</mml:mo><mml:mi>x</mml:mi><mml:mo>)</mml:mo></mml:mrow><mml:mi>d</mml:mi><mml:mi>x</mml:mi></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msubsup><mml:mstyle mathsize="140%" displaystyle="true"><mml:mo>&#x0222b;</mml:mo></mml:mstyle><mml:mn>0</mml:mn><mml:mi>&#x0221e;</mml:mi></mml:msubsup><mml:mi>s</mml:mi><mml:msub><mml:mi>p</mml:mi><mml:mi>s</mml:mi></mml:msub><mml:mrow><mml:mo>(</mml:mo><mml:mi>s</mml:mi><mml:mo>)</mml:mo></mml:mrow><mml:mi>d</mml:mi><mml:mi>s</mml:mi></mml:mrow><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></disp-formula>
where <inline-formula><mml:math id="mm2"><mml:mrow><mml:msub><mml:mi>p</mml:mi><mml:mi>N</mml:mi></mml:msub><mml:mrow><mml:mo>(</mml:mo><mml:mi>x</mml:mi><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><mml:math id="mm3"><mml:mrow><mml:msub><mml:mi>p</mml:mi><mml:mi>s</mml:mi></mml:msub><mml:mrow><mml:mo>(</mml:mo><mml:mi>s</mml:mi><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid="B8-sensors-16-01958" ref-type="bibr">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid="B9-sensors-16-01958" ref-type="bibr">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals&#x02019; active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual&#x02019;s position with time stamps can be acquired using Bluetooth localization [<xref rid="B10-sensors-16-01958" ref-type="bibr">10</xref>,<xref rid="B11-sensors-16-01958" ref-type="bibr">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid="B12-sensors-16-01958" ref-type="bibr">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users&#x02019; mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user&#x02019;s continuous movement [<xref rid="B13-sensors-16-01958" ref-type="bibr">13</xref>] (based on acceleration parameters). An individual&#x02019;s movement while queuing is essentially standing-walking-standing [<xref rid="B14-sensors-16-01958" ref-type="bibr">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid="B15-sensors-16-01958" ref-type="bibr">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals&#x02019; privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid="B16-sensors-16-01958" ref-type="bibr">16</xref>,<xref rid="B17-sensors-16-01958" ref-type="bibr">17</xref>], targeted advertisements [<xref rid="B18-sensors-16-01958" ref-type="bibr">18</xref>,<xref rid="B19-sensors-16-01958" ref-type="bibr">19</xref>], and behavior analysis [<xref rid="B20-sensors-16-01958" ref-type="bibr">20</xref>,<xref rid="B21-sensors-16-01958" ref-type="bibr">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p><sec id="sec1dot1-sensors-16-01958"><title>1.1. Signal Threshold Judgment</title><p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user&#x02019;s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid="B15-sensors-16-01958" ref-type="bibr">15</xref>,<xref rid="B22-sensors-16-01958" ref-type="bibr">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p></sec><sec id="sec1dot2-sensors-16-01958"><title>1.2. Signal Feature Analysis</title><p>A typical service process represented on the time&#x02014;received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual&#x02019;s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid="B23-sensors-16-01958" ref-type="bibr">23</xref>,<xref rid="B24-sensors-16-01958" ref-type="bibr">24</xref>,<xref rid="B25-sensors-16-01958" ref-type="bibr">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p><p>Compared with previous WiFi-based solutions for detecting queuing time, WiFi positioning technology that captures people&#x02019;s locations with time stamps has become the state-of-the-art for queuing time estimation and prediction in indoor scenarios. However, most application scenarios are restricted by site-specific environmental, security and management requirements, so the number and deployment locations of APs are often limited. Thus, the positioning accuracy usually cannot be optimized, and sometimes may be quite poor. Therefore, in our research, we propose a method that uses topological relation (contained or disjoint) judgment between WiFi positioning locations and the queue zone to estimate individuals&#x02019; queuing time, that is, during the positioning system deployment phase, we give priority to the topological correctness of positioning (the topological relation between an individual&#x02019;s positioning location and the queue zone remains consistent with their current topological relation) rather than its accuracy. To achieve this, three principles are followed: (1) some of the APs in a queue zone are deployed close to and surrounding the border of the queue zone; (2) the signals of the border APs must be directed toward the inside of the queue zone; and (3) APs outside the queue zone must not be too close to the border of the queue zone and have relatively low signal strength. Using these principles, we can obtain reliable topological accuracy, and the queuing time can be determined by WiFi positioning data with acceptable precision. </p><p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid="B22-sensors-16-01958" ref-type="bibr">22</xref>,<xref rid="B26-sensors-16-01958" ref-type="bibr">26</xref>,<xref rid="B27-sensors-16-01958" ref-type="bibr">27</xref>], Holt-Winters [<xref rid="B22-sensors-16-01958" ref-type="bibr">22</xref>,<xref rid="B28-sensors-16-01958" ref-type="bibr">28</xref>,<xref rid="B29-sensors-16-01958" ref-type="bibr">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid="B30-sensors-16-01958" ref-type="bibr">30</xref>,<xref rid="B31-sensors-16-01958" ref-type="bibr">31</xref>,<xref rid="B32-sensors-16-01958" ref-type="bibr">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid="B33-sensors-16-01958" ref-type="bibr">33</xref>,<xref rid="B34-sensors-16-01958" ref-type="bibr">34</xref>] and traffic flow theory [<xref rid="B35-sensors-16-01958" ref-type="bibr">35</xref>,<xref rid="B36-sensors-16-01958" ref-type="bibr">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid="B22-sensors-16-01958" ref-type="bibr">22</xref>], from which these parameters are difficult to obtain.</p><p>The advantages of our method using WiFi positioning data to estimate and predict queuing time in indoor scenarios are as follows:
<list list-type="simple"><list-item><label>(1)</label><p>The method for estimating the queuing time from topological relation judgment between individuals&#x02019; trajectories and the queue zone is robust in realistic application scenarios.</p></list-item><list-item><label>(2)</label><p>No special sensors are needed to track people&#x02019;s queuing activity, because WiFi and mobile devices are ubiquitous in modern life.</p></list-item><list-item><label>(3)</label><p>Users are passive because no active cooperation is required and no additional apps need to be installed on their mobile devices.</p></list-item><list-item><label>(4)</label><p>No consideration for the length or shape of the queue is required because queuing time only depends on the time stamps when an individual enters and leaves a queue zone.</p></list-item></list></p><p>The remainder of this paper is organized as follows. In the following section, we provide an overview of WiFi positioning technology, and introduce how to deploy the positioning system and determine queuing time using positioning data. Then, we explain the prediction models (i.e., NAR, Holt-Winters, and STL-ARIMA) based on time series analysis theory. Next, we validate our positioning precision and estimation model in a real indoor scenario, and present a case study conducted at the T3-C entrance (one entrance of Terminal T3) of the Beijing Capital International Airport. We then discuss the practicability of this research and factors that affect the accuracy of the estimation and prediction results. Finally, we present our conclusions and suggest areas for future work.</p></sec></sec><sec id="sec2-sensors-16-01958"><title>2. Theory and Methodological Framework</title><p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid="B37-sensors-16-01958" ref-type="bibr">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p><sec id="sec2dot1-sensors-16-01958"><title>2.1. WiFi Positioning Technology</title><p>In addition to communication functions [<xref rid="B38-sensors-16-01958" ref-type="bibr">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning&#x02014;triangulation, fingerprinting and proximity [<xref rid="B39-sensors-16-01958" ref-type="bibr">39</xref>,<xref rid="B40-sensors-16-01958" ref-type="bibr">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals&#x02019; locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid="B17-sensors-16-01958" ref-type="bibr">17</xref>,<xref rid="B41-sensors-16-01958" ref-type="bibr">41</xref>]):
<disp-formula id="FD2-sensors-16-01958"><label>(2)</label><mml:math id="mm4"><mml:mrow><mml:msub><mml:mi>P</mml:mi><mml:mi>r</mml:mi></mml:msub><mml:mrow><mml:mo>(</mml:mo><mml:mi>d</mml:mi><mml:mo>)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:msub><mml:mi>P</mml:mi><mml:mi>r</mml:mi></mml:msub><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>d</mml:mi><mml:mn>0</mml:mn></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>&#x02212;</mml:mo><mml:mn>10</mml:mn><mml:mi>&#x003b1;</mml:mi><mml:mi mathvariant="italic">log</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mfrac bevelled="true"><mml:mi>d</mml:mi><mml:mrow><mml:msub><mml:mi>d</mml:mi><mml:mn>0</mml:mn></mml:msub></mml:mrow></mml:mfrac></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>+</mml:mo><mml:mi>&#x003be;</mml:mi></mml:mrow></mml:math></disp-formula>
where <inline-formula><mml:math id="mm5"><mml:mrow><mml:msub><mml:mi>P</mml:mi><mml:mi>r</mml:mi></mml:msub><mml:mrow><mml:mo>(</mml:mo><mml:mi>d</mml:mi><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><mml:math id="mm6"><mml:mi>d</mml:mi></mml:math></inline-formula> from the AP, <inline-formula><mml:math id="mm7"><mml:mrow><mml:msub><mml:mi>d</mml:mi><mml:mn>0</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula> is a known distance from the AP, <inline-formula><mml:math id="mm8"><mml:mi>&#x003b1;</mml:mi></mml:math></inline-formula> is the propagation loss coefficient, and <inline-formula><mml:math id="mm9"><mml:mi>&#x003be;</mml:mi></mml:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p><p><xref ref-type="fig" rid="sensors-16-01958-f001">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><mml:math id="mm10"><mml:mrow><mml:msub><mml:mi>r</mml:mi><mml:mn>1</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula>, <inline-formula><mml:math id="mm11"><mml:mrow><mml:msub><mml:mi>r</mml:mi><mml:mn>2</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm12"><mml:mrow><mml:msub><mml:mi>r</mml:mi><mml:mn>3</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid="B42-sensors-16-01958" ref-type="bibr">42</xref>].</p></sec><sec id="sec2dot2-sensors-16-01958"><title>2.2. Hardware Deployment Principles</title><p>To guarantee topological correctness, as mentioned in <xref ref-type="sec" rid="sec1-sensors-16-01958">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid="B43-sensors-16-01958" ref-type="bibr">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type="sec" rid="sec3dot2-sensors-16-01958">Section 3.2</xref>), a user&#x02019;s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid="B17-sensors-16-01958" ref-type="bibr">17</xref>] and have relatively low signal strength.</p></sec><sec id="sec2dot3-sensors-16-01958"><title>2.3. Queuing Time Estimation Based on Positioning Data</title><p>To estimate a crowd&#x02019;s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid="B14-sensors-16-01958" ref-type="bibr">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual&#x02019;s queuing time, four parameters (<inline-formula><mml:math id="mm13"><mml:mi>m</mml:mi></mml:math></inline-formula>, <inline-formula><mml:math id="mm14"><mml:mi>n</mml:mi></mml:math></inline-formula>, <inline-formula><mml:math id="mm15"><mml:mi>k</mml:mi></mml:math></inline-formula>, and <inline-formula><mml:math id="mm16"><mml:mi>r</mml:mi></mml:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p><sec id="sec2dot3dot1-sensors-16-01958"><title>2.3.1. Queuing Process Recognition</title><p>To capture the queuing process of an individual using positioning data, we designate in advance a physical or virtual fence with clear boundaries to serve as the queue zone. An integrated trajectory for queue process capture can be divided into three parts: trajectory before entering the queue zone, trajectory in the queue zone and trajectory after leaving the queue zone. The time intervals between these three parts must be reasonably small. Additionally, the origin and destination points of a trajectory must be outside of the queue zone and on different sides, and the direction from the origin to destination must be in accordance with the heading direction of the queue.</p></sec><sec id="sec2dot3dot2-sensors-16-01958"><title>2.3.2. Parameter Setting and Queuing Time Determination</title><p>The starting and leaving times of a queuing process are the keys to an individual&#x02019;s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type="fig" rid="sensors-16-01958-f002">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><mml:math id="mm17"><mml:mi>m</mml:mi></mml:math></inline-formula>, <inline-formula><mml:math id="mm18"><mml:mi>n</mml:mi></mml:math></inline-formula>, <inline-formula><mml:math id="mm19"><mml:mi>k</mml:mi></mml:math></inline-formula>, and <inline-formula><mml:math id="mm20"><mml:mi>r</mml:mi></mml:math></inline-formula>) are used to discern relatively reliable trajectories.</p><p><xref ref-type="fig" rid="sensors-16-01958-f003">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><mml:math id="mm21"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><mml:math id="mm22"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mi>n</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula>). The locations of the points at times <inline-formula><mml:math id="mm23"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm24"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mi>n</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><mml:math id="mm25"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula> and after time <inline-formula><mml:math id="mm26"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mi>n</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., &#x0201c;on&#x0201d; but not connected to WiFi APs, and &#x0201c;connected&#x0201d; but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><mml:math id="mm27"><mml:mi>m</mml:mi></mml:math></inline-formula> points before entering the queue zone, <inline-formula><mml:math id="mm28"><mml:mi>n</mml:mi></mml:math></inline-formula> points after leaving the queue zone and <inline-formula><mml:math id="mm29"><mml:mi>k</mml:mi></mml:math></inline-formula> points from <inline-formula><mml:math id="mm30"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula> to <inline-formula><mml:math id="mm31"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mi>n</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> (including points at times <inline-formula><mml:math id="mm32"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm33"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mi>n</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (&#x0201c;drift phenomenon&#x0201d; or &#x0201c;drift weakness&#x0201d; hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type="sec" rid="sec3dot2-sensors-16-01958">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><mml:math id="mm34"><mml:mi>r</mml:mi></mml:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><mml:math id="mm35"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm36"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mi>n</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> in <xref ref-type="fig" rid="sensors-16-01958-f003">Figure 3</xref>) between time stamps <inline-formula><mml:math id="mm37"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm38"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mi>n</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><mml:math id="mm39"><mml:mrow><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mn>0</mml:mn></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>/</mml:mo><mml:mn>2</mml:mn></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm40"><mml:mrow><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mi>n</mml:mi></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>t</mml:mi><mml:mrow><mml:mi>n</mml:mi><mml:mo>+</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>/</mml:mo><mml:mn>2</mml:mn></mml:mrow></mml:math></inline-formula>, respectively, and the total queuing time as <inline-formula><mml:math id="mm41"><mml:mrow><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mi>n</mml:mi></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>t</mml:mi><mml:mrow><mml:mi>n</mml:mi><mml:mo>+</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>/</mml:mo><mml:mn>2</mml:mn><mml:mo>&#x02212;</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mn>0</mml:mn></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>/</mml:mo><mml:mn>2</mml:mn></mml:mrow></mml:math></inline-formula>.</p></sec><sec id="sec2dot3dot3-sensors-16-01958"><title>2.3.3. Queuing Time Estimation</title><p>To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals&#x02019; queuing times are divided into specific slices. As shown in <xref ref-type="fig" rid="sensors-16-01958-f004">Figure 4</xref>, the time of a day is sliced by <inline-formula><mml:math id="mm42"><mml:mrow><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:math></inline-formula>. Let <inline-formula><mml:math id="mm43"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mrow><mml:mi>o</mml:mi><mml:mi>u</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mi>n</mml:mi></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>t</mml:mi><mml:mrow><mml:mi>n</mml:mi><mml:mo>+</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>/</mml:mo><mml:mn>2</mml:mn></mml:mrow></mml:math></inline-formula> (see <xref ref-type="sec" rid="sec2dot3dot2-sensors-16-01958">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><mml:math id="mm44"><mml:mrow><mml:msub><mml:mi>t</mml:mi><mml:mrow><mml:mi>o</mml:mi><mml:mi>u</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>&#x02208;</mml:mo><mml:mrow><mml:mo>[</mml:mo><mml:mrow><mml:mi>t</mml:mi><mml:mo>,</mml:mo><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><mml:math id="mm45"><mml:mi>t</mml:mi></mml:math></inline-formula> to <inline-formula><mml:math id="mm46"><mml:mrow><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:math></inline-formula>. Let <inline-formula><mml:math id="mm47"><mml:mrow><mml:mrow><mml:mo>{</mml:mo><mml:mrow><mml:msubsup><mml:mi>w</mml:mi><mml:mi>t</mml:mi><mml:mi>i</mml:mi></mml:msubsup></mml:mrow><mml:mo>}</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> be the set of individuals&#x02019; queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><mml:math id="mm48"><mml:mi>t</mml:mi></mml:math></inline-formula> to <inline-formula><mml:math id="mm49"><mml:mrow><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:math></inline-formula>, then <inline-formula><mml:math id="mm50"><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:munderover><mml:mstyle displaystyle="true"><mml:mo>&#x02211;</mml:mo></mml:mstyle><mml:mrow><mml:mi>i</mml:mi><mml:mo>=</mml:mo><mml:mn>1</mml:mn></mml:mrow><mml:mi>N</mml:mi></mml:munderover><mml:msubsup><mml:mi>w</mml:mi><mml:mi>t</mml:mi><mml:mi>i</mml:mi></mml:msubsup><mml:mo>/</mml:mo><mml:mi>N</mml:mi></mml:mrow></mml:math></inline-formula> (where <inline-formula><mml:math id="mm51"><mml:mi>N</mml:mi></mml:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p></sec></sec><sec id="sec2dot4-sensors-16-01958"><title>2.4. Queuing Time Prediction</title><sec id="sec2dot4dot1-sensors-16-01958"><title>2.4.1. Nonstandard Autoregressive</title><p>Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><mml:math id="mm52"><mml:mrow><mml:mi>AR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mi>p</mml:mi><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> denotes an autoregressive model of order <inline-formula><mml:math id="mm53"><mml:mi>p</mml:mi></mml:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><mml:math id="mm54"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mi>p</mml:mi><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>:
<disp-formula id="FD3-sensors-16-01958"><label>(3)</label><mml:math id="mm55"><mml:mrow><mml:msub><mml:mi>P</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:mi>c</mml:mi><mml:mo>+</mml:mo><mml:munderover><mml:mstyle mathsize="140%" displaystyle="true"><mml:mo>&#x02211;</mml:mo></mml:mstyle><mml:mrow><mml:mi>i</mml:mi><mml:mo>=</mml:mo><mml:mn>1</mml:mn></mml:mrow><mml:mi>p</mml:mi></mml:munderover><mml:msub><mml:mi>&#x003c6;</mml:mi><mml:mi>i</mml:mi></mml:msub><mml:msub><mml:mi>W</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mi>i</mml:mi><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>&#x003b5;</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></disp-formula>
where <inline-formula><mml:math id="mm56"><mml:mrow><mml:msub><mml:mi>P</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><mml:math id="mm57"><mml:mi>t</mml:mi></mml:math></inline-formula> to <inline-formula><mml:math id="mm58"><mml:mrow><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:math></inline-formula>, <inline-formula><mml:math id="mm59"><mml:mi>c</mml:mi></mml:math></inline-formula> is a constant, <inline-formula><mml:math id="mm60"><mml:mrow><mml:msub><mml:mi>&#x003c6;</mml:mi><mml:mi>i</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> is the regression coefficient and <inline-formula><mml:math id="mm61"><mml:mrow><mml:msub><mml:mi>&#x003b5;</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p></sec><sec id="sec2dot4dot2-sensors-16-01958"><title>2.4.2. Holt-Winters</title><p>Let <inline-formula><mml:math id="mm62"><mml:mrow><mml:mrow><mml:mo>{</mml:mo><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow><mml:mo>}</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> be the sequence of the crowds&#x02019; average queuing time based on the WiFi estimation from time <inline-formula><mml:math id="mm63"><mml:mi>t</mml:mi></mml:math></inline-formula> to <inline-formula><mml:math id="mm64"><mml:mrow><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:math></inline-formula>, with a seasonal variation of length <inline-formula><mml:math id="mm65"><mml:mi>L</mml:mi></mml:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><mml:math id="mm66"><mml:mrow><mml:mrow><mml:mo>{</mml:mo><mml:mrow><mml:msub><mml:mi>s</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow><mml:mo>}</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><mml:math id="mm67"><mml:mrow><mml:mrow><mml:mo>{</mml:mo><mml:mrow><mml:msub><mml:mi>b</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow><mml:mo>}</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> represents the sequence of the linear trend, <inline-formula><mml:math id="mm68"><mml:mrow><mml:mrow><mml:mo>{</mml:mo><mml:mrow><mml:msub><mml:mi>c</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow><mml:mo>}</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><mml:math id="mm69"><mml:mo>&#x02202;</mml:mo></mml:math></inline-formula>, <inline-formula><mml:math id="mm70"><mml:mi>&#x003b2;</mml:mi></mml:math></inline-formula> and <inline-formula><mml:math id="mm71"><mml:mi>&#x003b3;</mml:mi></mml:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:
<disp-formula id="FD4-sensors-16-01958"><label>(4)</label><mml:math id="mm72"><mml:mrow><mml:msub><mml:mi>s</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:mi>&#x003b1;</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>&#x02212;</mml:mo><mml:msub><mml:mi>c</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mi>L</mml:mi><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>+</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mn>1</mml:mn><mml:mo>&#x02212;</mml:mo><mml:mi>&#x003b1;</mml:mi></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>s</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>b</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></disp-formula>
<disp-formula id="FD5-sensors-16-01958"><label>(5)</label><mml:math id="mm73"><mml:mrow><mml:msub><mml:mi>b</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:mi>&#x003b2;</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>s</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>&#x02212;</mml:mo><mml:msub><mml:mi>s</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>+</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mn>1</mml:mn><mml:mo>&#x02212;</mml:mo><mml:mi>&#x003b2;</mml:mi></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:msub><mml:mi>b</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:math></disp-formula>
<disp-formula id="FD6-sensors-16-01958"><label>(6)</label><mml:math id="mm74"><mml:mrow><mml:msub><mml:mi>c</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:mi>&#x003b3;</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>&#x02212;</mml:mo><mml:msub><mml:mi>s</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>&#x02212;</mml:mo><mml:msub><mml:mi>b</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>+</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mn>1</mml:mn><mml:mo>&#x02212;</mml:mo><mml:mi>&#x003b3;</mml:mi></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:msub><mml:mi>c</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mi>L</mml:mi><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:math></disp-formula>
<disp-formula id="FD7-sensors-16-01958"><label>(7)</label><mml:math id="mm75"><mml:mrow><mml:msub><mml:mi>P</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mi>m</mml:mi><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:msub><mml:mi>s</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>+</mml:mo><mml:mi>m</mml:mi><mml:msub><mml:mi>b</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>c</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mi>L</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mn>1</mml:mn><mml:mo>&#x02212;</mml:mo><mml:msubsup><mml:mi>m</mml:mi><mml:mi>L</mml:mi><mml:mo>*</mml:mo></mml:msubsup></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:math></disp-formula>
where Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><mml:math id="mm76"><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>&#x02212;</mml:mo><mml:msub><mml:mi>c</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mi>L</mml:mi><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:math></inline-formula>) and the non-seasonal forecast <inline-formula><mml:math id="mm77"><mml:mrow><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msub><mml:mi>s</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>b</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> for time slice <inline-formula><mml:math id="mm78"><mml:mi>t</mml:mi></mml:math></inline-formula> to <inline-formula><mml:math id="mm79"><mml:mrow><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:math></inline-formula>. Equation (5) is the trend which is actually Holt&#x02019;s linear method [<xref rid="B28-sensors-16-01958" ref-type="bibr">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><mml:math id="mm80"><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>&#x02212;</mml:mo><mml:msub><mml:mi>s</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>&#x02212;</mml:mo><mml:msub><mml:mi>b</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><mml:math id="mm81"><mml:mrow><mml:msub><mml:mi>c</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mi>L</mml:mi><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><mml:math id="mm82"><mml:mi>m</mml:mi></mml:math></inline-formula> is the step length of the prediction, <inline-formula><mml:math id="mm83"><mml:mrow><mml:msub><mml:mi>P</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mi>m</mml:mi><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:math></inline-formula> is the queuing time prediction of time slice <inline-formula><mml:math id="mm84"><mml:mrow><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mi>m</mml:mi><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:math></inline-formula> to <inline-formula><mml:math id="mm85"><mml:mrow><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mi>m</mml:mi><mml:mo>+</mml:mo><mml:mn>1</mml:mn></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>&#x00394;</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:math></inline-formula>, and <inline-formula><mml:math id="mm86"><mml:mrow><mml:msubsup><mml:mi>m</mml:mi><mml:mi>L</mml:mi><mml:mo>*</mml:mo></mml:msubsup><mml:mo>=</mml:mo><mml:mrow><mml:mo>[</mml:mo><mml:mrow><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mi>m</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mn>1</mml:mn></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>&#x000a0;</mml:mo><mml:mi>m</mml:mi><mml:mi>o</mml:mi><mml:mi>d</mml:mi><mml:mo>&#x000a0;</mml:mo><mml:mi>L</mml:mi></mml:mrow><mml:mo>]</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p></sec><sec id="sec2dot4dot3-sensors-16-01958"><title>2.4.3. Seasonal Trend Decomposition with Autoregressive Integrated Moving Average (STL-ARIMA)</title><p>Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><mml:math id="mm87"><mml:mrow><mml:mi>T</mml:mi><mml:msub><mml:mi>R</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula>), seasonality (<inline-formula><mml:math id="mm88"><mml:mrow><mml:msub><mml:mi>S</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula>) and remainder (<inline-formula><mml:math id="mm89"><mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:
<disp-formula id="FD8-sensors-16-01958"><label>(8)</label><mml:math id="mm90"><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:mi>T</mml:mi><mml:msub><mml:mi>R</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>S</mml:mi><mml:mi>t</mml:mi></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mi>R</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></disp-formula>
where <inline-formula><mml:math id="mm91"><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><mml:math id="mm92"><mml:mrow><mml:mi>T</mml:mi><mml:msub><mml:mi>R</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><mml:math id="mm93"><mml:mrow><mml:msub><mml:mi>S</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><mml:math id="mm94"><mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> is the remainder of the sequence after components <inline-formula><mml:math id="mm95"><mml:mrow><mml:mi>T</mml:mi><mml:msub><mml:mi>R</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm96"><mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> are removed and can be seen as noise.</p><p>The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid="B31-sensors-16-01958" ref-type="bibr">31</xref>,<xref rid="B44-sensors-16-01958" ref-type="bibr">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><mml:math id="mm97"><mml:mrow><mml:mi>ARIMA</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mi>p</mml:mi><mml:mo>,</mml:mo><mml:mi>d</mml:mi><mml:mo>,</mml:mo><mml:mi>q</mml:mi></mml:mrow><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>, where <inline-formula><mml:math id="mm98"><mml:mi>p</mml:mi></mml:math></inline-formula> is the order of the autoregressive, <inline-formula><mml:math id="mm99"><mml:mi>d</mml:mi></mml:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><mml:math id="mm100"><mml:mi>q</mml:mi></mml:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid="B44-sensors-16-01958" ref-type="bibr">44</xref>] for more details.</p></sec></sec></sec><sec id="sec3-sensors-16-01958"><title>3. Methodology Validation</title><p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd&#x02019;s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type="sec" rid="sec2-sensors-16-01958">Section 2</xref> is presented in the case study section.</p><sec id="sec3dot1-sensors-16-01958"><title>3.1. Positioning System Deployment</title><p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid="B45-sensors-16-01958" ref-type="bibr">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type="sec" rid="sec2dot2-sensors-16-01958">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type="fig" rid="sensors-16-01958-f005">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p></sec><sec id="sec3dot2-sensors-16-01958"><title>3.2. Topological Accuracy Test</title><p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type="table" rid="sensors-16-01958-t001">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid="B46-sensors-16-01958" ref-type="bibr">46</xref>,<xref rid="B47-sensors-16-01958" ref-type="bibr">47</xref>].</p></sec><sec id="sec3dot3-sensors-16-01958"><title>3.3. WiFi-Based Estimation Model Validation</title><p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type="fig" rid="sensors-16-01958-f006">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p></sec></sec><sec id="sec4-sensors-16-01958"><title>4. Case Study</title><sec id="sec4dot1-sensors-16-01958"><title>4.1. Queuing Time Estimation for the T3-C Entrance of Beijing Capital International Airport</title><p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals&#x02019; queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p><sec id="sec4dot1dot1-sensors-16-01958"><title>4.1.1. Data Collection</title><p>We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:
<disp-formula id="FD9-sensors-16-01958"><mml:math id="mm101"><mml:mrow><mml:mrow><mml:mo>[</mml:mo><mml:mrow><mml:mi>t</mml:mi><mml:mi>i</mml:mi><mml:mi>m</mml:mi><mml:mi>e</mml:mi><mml:mo>_</mml:mo><mml:mi>s</mml:mi><mml:mi>t</mml:mi><mml:mi>a</mml:mi><mml:mi>m</mml:mi><mml:mi>p</mml:mi><mml:mo>,</mml:mo><mml:mo>&#x000a0;</mml:mo><mml:mi>M</mml:mi><mml:mi>A</mml:mi><mml:mi>C</mml:mi><mml:mo>,</mml:mo><mml:mo>&#x000a0;</mml:mo><mml:mi>b</mml:mi><mml:mi>u</mml:mi><mml:mi>i</mml:mi><mml:mi>l</mml:mi><mml:mi>d</mml:mi><mml:mi>i</mml:mi><mml:mi>n</mml:mi><mml:mi>g</mml:mi><mml:mo>_</mml:mo><mml:mi>I</mml:mi><mml:mi>D</mml:mi><mml:mo>,</mml:mo><mml:mo>&#x000a0;</mml:mo><mml:mi>f</mml:mi><mml:mi>l</mml:mi><mml:mi>o</mml:mi><mml:mi>o</mml:mi><mml:mi>r</mml:mi><mml:mo>_</mml:mo><mml:mi>I</mml:mi><mml:mi>D</mml:mi><mml:mo>,</mml:mo><mml:mo>&#x000a0;</mml:mo><mml:mi>c</mml:mi><mml:mi>o</mml:mi><mml:mi>o</mml:mi><mml:mi>r</mml:mi><mml:mi>d</mml:mi><mml:mi>i</mml:mi><mml:mi>n</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi><mml:msub><mml:mi>e</mml:mi><mml:mi>X</mml:mi></mml:msub><mml:mo>,</mml:mo><mml:mo>&#x000a0;</mml:mo><mml:mi>c</mml:mi><mml:mi>o</mml:mi><mml:mi>o</mml:mi><mml:mi>r</mml:mi><mml:mi>d</mml:mi><mml:mi>i</mml:mi><mml:mi>n</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi><mml:msub><mml:mi>e</mml:mi><mml:mi>Y</mml:mi></mml:msub><mml:mo>,</mml:mo><mml:mo>&#x000a0;</mml:mo><mml:mi>A</mml:mi><mml:mi>P</mml:mi><mml:mo>_</mml:mo><mml:mi>M</mml:mi><mml:mi>A</mml:mi><mml:mi>C</mml:mi></mml:mrow><mml:mo>]</mml:mo></mml:mrow></mml:mrow></mml:math></disp-formula>
where <inline-formula><mml:math id="mm102"><mml:mrow><mml:mi>t</mml:mi><mml:mi>i</mml:mi><mml:mi>m</mml:mi><mml:mi>e</mml:mi><mml:mo>_</mml:mo><mml:mi>s</mml:mi><mml:mi>t</mml:mi><mml:mi>a</mml:mi><mml:mi>m</mml:mi><mml:mi>p</mml:mi></mml:mrow></mml:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><mml:math id="mm103"><mml:mrow><mml:mi>M</mml:mi><mml:mi>A</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:math></inline-formula> is the media access control address of a mobile device; <inline-formula><mml:math id="mm104"><mml:mrow><mml:mi>b</mml:mi><mml:mi>u</mml:mi><mml:mi>i</mml:mi><mml:mi>l</mml:mi><mml:mi>d</mml:mi><mml:mi>i</mml:mi><mml:mi>n</mml:mi><mml:mi>g</mml:mi><mml:mo>_</mml:mo><mml:mi>I</mml:mi><mml:mi>D</mml:mi></mml:mrow></mml:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><mml:math id="mm105"><mml:mrow><mml:mi>f</mml:mi><mml:mi>l</mml:mi><mml:mi>o</mml:mi><mml:mi>o</mml:mi><mml:mi>r</mml:mi><mml:mo>_</mml:mo><mml:mi>I</mml:mi><mml:mi>D</mml:mi></mml:mrow></mml:math></inline-formula> denotes the floor number; <inline-formula><mml:math id="mm106"><mml:mrow><mml:mi>c</mml:mi><mml:mi>o</mml:mi><mml:mi>o</mml:mi><mml:mi>r</mml:mi><mml:mi>d</mml:mi><mml:mi>i</mml:mi><mml:mi>n</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi><mml:msub><mml:mi>e</mml:mi><mml:mi>X</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm107"><mml:mrow><mml:mi>c</mml:mi><mml:mi>o</mml:mi><mml:mi>o</mml:mi><mml:mi>r</mml:mi><mml:mi>d</mml:mi><mml:mi>i</mml:mi><mml:mi>n</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi><mml:msub><mml:mi>e</mml:mi><mml:mi>Y</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> are the <inline-formula><mml:math id="mm108"><mml:mi>x</mml:mi></mml:math></inline-formula> and <inline-formula><mml:math id="mm109"><mml:mi>y</mml:mi></mml:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><mml:math id="mm110"><mml:mrow><mml:mi>A</mml:mi><mml:mi>P</mml:mi><mml:mo>_</mml:mo><mml:mi>M</mml:mi><mml:mi>A</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p><p>Before an individual enters the queue zone, he/she swipes their boarding pass to check-in and go through the security door on the fourth floor. Next, he/she takes the escalator downstairs to the third floor to wait for security in a queue. After the queuing process, the staff at the counter stamps the passenger&#x02019;s boarding pass to check them out and the passenger leaves the queue zone to have his baggage checked. In our study, we added the time spent on escalators to the queuing time. Thus, the queuing process starts when a passenger checks in and enters the queue zone, and ends after checking out and leaving the queue zone. Therefore, the time between check-in and check-out recorded by the security system is regarded as the actual queuing time for validation.</p></sec><sec id="sec4dot1dot2-sensors-16-01958"><title>4.1.2. Data Preprocessing</title><p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers&#x02019; trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type="fig" rid="sensors-16-01958-f005">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type="fig" rid="sensors-16-01958-f007">Figure 7</xref>.</p></sec><sec id="sec4dot1dot3-sensors-16-01958"><title>4.1.3. Parameter Calibration and Queuing Time Determination</title><p>Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type="fig" rid="sensors-16-01958-f002">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type="sec" rid="sec2dot3dot2-sensors-16-01958">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><mml:math id="mm111"><mml:mi>m</mml:mi></mml:math></inline-formula> and <inline-formula><mml:math id="mm112"><mml:mi>n</mml:mi></mml:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><mml:math id="mm113"><mml:mi>m</mml:mi></mml:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><mml:math id="mm114"><mml:mi>n</mml:mi></mml:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><mml:math id="mm115"><mml:mi>k</mml:mi></mml:math></inline-formula> and <inline-formula><mml:math id="mm116"><mml:mi>r</mml:mi></mml:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><mml:math id="mm117"><mml:mi>k</mml:mi></mml:math></inline-formula> and <inline-formula><mml:math id="mm118"><mml:mi>r</mml:mi></mml:math></inline-formula> are shown in <xref ref-type="table" rid="sensors-16-01958-t002">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><mml:math id="mm119"><mml:mrow><mml:mi>k</mml:mi><mml:mo>=</mml:mo><mml:mn>5</mml:mn></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm120"><mml:mrow><mml:mi>r</mml:mi><mml:mo>=</mml:mo><mml:mn>50</mml:mn><mml:mo>%</mml:mo></mml:mrow></mml:math></inline-formula>; that is, at least 5 (<inline-formula><mml:math id="mm121"><mml:mi>k</mml:mi></mml:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><mml:math id="mm122"><mml:mi>r</mml:mi></mml:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p><p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds&#x02019; average queuing time in the time slice.</p></sec><sec id="sec4dot1dot4-sensors-16-01958"><title>4.1.4. Estimation Results and Validation</title><p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger&#x02019;s queuing time. The queue zone has four special channels (<xref ref-type="fig" rid="sensors-16-01958-f005">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for &#x0201c;hurry-off&#x0201d; passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type="fig" rid="sensors-16-01958-f008">Figure 8</xref>).</p><p>The statistical characteristics of the estimation errors are listed in <xref ref-type="table" rid="sensors-16-01958-t003">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p></sec></sec><sec id="sec4dot2-sensors-16-01958"><title>4.2. Queuing Time Prediction for the T3-C Entrance</title><p>Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type="sec" rid="sec2dot4-sensors-16-01958">Section 2.4</xref>. For <inline-formula><mml:math id="mm125"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mi>p</mml:mi><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><mml:math id="mm126"><mml:mi>p</mml:mi></mml:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><mml:math id="mm127"><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mn>10</mml:mn></mml:mrow></mml:msub></mml:mrow></mml:math></inline-formula>, i.e., <inline-formula><mml:math id="mm128"><mml:mrow><mml:mi>p</mml:mi><mml:mo>=</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:math></inline-formula>) and two independent variables (<inline-formula><mml:math id="mm129"><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mn>10</mml:mn></mml:mrow></mml:msub></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm130"><mml:mrow><mml:msub><mml:mi>W</mml:mi><mml:mrow><mml:mi>t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mn>20</mml:mn></mml:mrow></mml:msub></mml:mrow></mml:math></inline-formula>, i.e., <inline-formula><mml:math id="mm131"><mml:mrow><mml:mi>p</mml:mi><mml:mo>=</mml:mo><mml:mn>2</mml:mn></mml:mrow></mml:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type="table" rid="sensors-16-01958-t004">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><mml:math id="mm132"><mml:mrow><mml:mi>p</mml:mi><mml:mo>=</mml:mo><mml:mn>2</mml:mn></mml:mrow></mml:math></inline-formula> is an appropriate order parameter for the <inline-formula><mml:math id="mm133"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mi>p</mml:mi><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> model.</p><p>Regarding the regression coefficients (<inline-formula><mml:math id="mm138"><mml:mrow><mml:msub><mml:mi>&#x003c6;</mml:mi><mml:mi>i</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><mml:math id="mm139"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>2</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>. We tested three solutions, in which <inline-formula><mml:math id="mm140"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>2</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><mml:math id="mm141"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>2</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type="table" rid="sensors-16-01958-t005">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><mml:math id="mm142"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>2</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11&#x02013;13 August to predict the queuing time on 14 August) are theoretically sound. </p><p>For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><mml:math id="mm146"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>2</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid="B48-sensors-16-01958" ref-type="bibr">48</xref>] in R Language [<xref rid="B49-sensors-16-01958" ref-type="bibr">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type="table" rid="sensors-16-01958-t006">Table 6</xref>, which shows that <inline-formula><mml:math id="mm147"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>2</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> achieves better results than the other two models.</p><p>Some prediction results from the <inline-formula><mml:math id="mm149"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>2</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> model are plotted in <xref ref-type="fig" rid="sensors-16-01958-f009">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><mml:math id="mm150"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>2</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type="table" rid="sensors-16-01958-t006">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type="fig" rid="sensors-16-01958-f009">Figure 9</xref>b and the jump point in <xref ref-type="fig" rid="sensors-16-01958-f009">Figure 9</xref>c.</p></sec></sec><sec id="sec5-sensors-16-01958"><title>5. Discussion</title><p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid="B15-sensors-16-01958" ref-type="bibr">15</xref>,<xref rid="B22-sensors-16-01958" ref-type="bibr">22</xref>] and Wang&#x02019;s method [<xref rid="B23-sensors-16-01958" ref-type="bibr">23</xref>,<xref rid="B24-sensors-16-01958" ref-type="bibr">24</xref>,<xref rid="B25-sensors-16-01958" ref-type="bibr">25</xref>], and systems based on other sensors mentioned in <xref ref-type="sec" rid="sec1-sensors-16-01958">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%&#x02013;36% in a coffee shop. Wang&#x02019;s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.&#x02013;12:00 p.m., 12:00 p.m.&#x02013;5:00 p.m. and 5:00 p.m.&#x02013;9:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.&#x02013;12:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p><p>During the deployment phase of our positioning system, we made some arrangements for the original APs at the T3-C Entrance. Two main elements were concerned, signal coverage and signal overlap. Because the signal transmitting range is approximately 50 m to 100 m, which exceeds the radius of the queue zone, APs deployed near the border of the queue zone can ensure the integrity of signal coverage in the queue zone. Metal baffle plates were placed to reduce signal overlap between the inside and outside of the queue zone, which may cause drift phenomenon and lead to topological errors. Thus, when users leave the queue zone, they receive a weak signal from the APs inside the queue zone due to the metal baffle plates. However, as the distance from the APs in surrounding shops to the queue zone is no more than 30 m, normal Internet service is barely affected.</p><p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.&#x02013;8:00 a.m., 15 August in <xref ref-type="fig" rid="sensors-16-01958-f009">Figure 9</xref>b and 7:00 a.m.&#x02013;8:00 a.m., 16 August in <xref ref-type="fig" rid="sensors-16-01958-f009">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type="fig" rid="sensors-16-01958-f009">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p><sec id="sec5dot1-sensors-16-01958"><title>5.1. Topological Accuracy</title><p>Although we took a series of measures to ensure the topological accuracy during the deployment of the APs and proposed a parameter called <italic>drift ratio</italic> to alleviate the impact of drift phenomenon, topological accuracy remains a problem that adversely affects queuing time estimation. The topological accuracy of our positioning system in this research may be affected by the deployment of APs, the positioning method, and the hardware status.</p><sec id="sec5dot1dot1-sensors-16-01958"><title>5.1.1. Deployment of APs</title><p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type="fig" rid="sensors-16-01958-f005">Figure 5</xref> were not in the optimal locations.</p></sec><sec id="sec5dot1dot2-sensors-16-01958"><title>5.1.2. Positioning Method</title><p>For WiFi positioning, fingerprinting usually yields better accuracy and stability than trilateration. However, fingerprinting requires many signal measurement during the deployment phase, and when AP deployment changes, this measurement needs to be repeated. Therefore, to minimize the effects on the normal traffic and security management of the airport, we chose the trilateration method, which is simple but has relatively poor accuracy and stability and thus may reduce the topological correctness.</p></sec><sec id="sec5dot1dot3-sensors-16-01958"><title>5.1.3. Hardware Status</title><p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type="fig" rid="sensors-16-01958-f008">Figure 8</xref>c,d.</p></sec></sec><sec id="sec5dot2-sensors-16-01958"><title>5.2. Packet Delivery Frequency of Mobile Devices</title><p>As our proposed queuing time solution does not require that individuals install an app on their mobile devices, the packet delivery frequency only depends on the status of their devices. If individuals connect their mobile devices to the APs and continuously use the WiFi network, then their devices will deliver packets regularly and at a high frequency. Thus, these trajectories are dense with sample points, and the resulting estimations have high accuracy. However, if an individual keeps the WiFi module on but does not connect to APs or connects to APs but does not use the device continuously during the queuing process, the sample points on the trajectory may be sparse. The sparsity of sample points may lead to estimation errors.</p></sec><sec id="sec5dot3-sensors-16-01958"><title>5.3. Lags in the Models</title><p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type="fig" rid="sensors-16-01958-f009">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p></sec></sec><sec id="sec6-sensors-16-01958"><title>6. Conclusions and Future Work</title><p>In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type="sec" rid="sec2dot3-sensors-16-01958">Section 2.3</xref>, to reduce the error caused by the &#x0201c;drift phenomenon&#x0201d; of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><mml:math id="mm151"><mml:mi>m</mml:mi></mml:math></inline-formula>, <inline-formula><mml:math id="mm152"><mml:mi>n</mml:mi></mml:math></inline-formula>, <inline-formula><mml:math id="mm153"><mml:mi>k</mml:mi></mml:math></inline-formula>, and <inline-formula><mml:math id="mm154"><mml:mi>r</mml:mi></mml:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p><p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days&#x02019; results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt&#x02013;Winters and STL-ARIMA models. </p><p>Our research shows that indoor queuing time can be estimated and predicted using WiFi positioning data. Compared with previous studies, our method has four advantages: (i) it is robust to positioning accuracy when topological correctness is reliable; (ii) it does not require special sensors to cope with the widespread nature of WiFi APs; (iii) it is completely passive because it does not require individuals active participation or for them to install an app on their mobile devices; and (iv) it does not need to consider the shape of a queue, only the individuals&#x02019; spatiotemporal location and the extent of the queue zone. As WiFi is widely used in public areas, our method is applicable in locations such as train stations, museums and supermarkets. However, it can only be used in places where there are queue zones with well-defined borders. In actual application scenarios, our method is restricted by the site environment and the drift of the WiFi positioning system. Therefore, the accuracy of estimation and prediction results may not be fully satisfactory. In future work, a positioning algorithm with better location accuracy and stability will be used to improve the topological accuracy. For example, fingerprinting could be used to replace triangulation, and the deployment strategy could be improved to reduce the impact of the indoor environment. Additionally, technical and algorithmic solutions will be explored to alleviate the impact of drift.</p></sec></body><back><ack><title>Acknowledgments</title><p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p></ack><notes><title>Author Contributions</title><p>Tao Pei and Hua Shu designed the model and experiments. Hua Shu, and Ci Song performed the experiments, and analyzed the data. Hua Shu and Tao Pei wrote the paper. Lianming Xu, Yang Ou, Libin Zhang, and Tao Li designed the hardware environment for indoor positioning and collected the experimental data.</p></notes><notes notes-type="COI-statement"><title>Conflicts of Interest</title><p>The authors declare no conflict of interest.</p></notes><ref-list><title>References</title><ref id="B1-sensors-16-01958"><label>1.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Li</surname><given-names>Q.</given-names></name><name><surname>Han</surname><given-names>Q.</given-names></name><name><surname>Cheng</surname><given-names>X.</given-names></name><name><surname>Sun</surname><given-names>L.</given-names></name></person-group>
<article-title>Queuesense: Collaborative recognition of queuing on mobile phones</article-title>
<source>IEEE. Trans. Mob. Comput.</source>
<year>2016</year>
<volume>15</volume>
<fpage>60</fpage>
<lpage>73</lpage>
<pub-id pub-id-type="doi">10.1109/TMC.2015.2407400</pub-id>
</element-citation></ref><ref id="B2-sensors-16-01958"><label>2.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Houston</surname><given-names>M.B.</given-names></name><name><surname>Bettencourt</surname><given-names>L.A.</given-names></name><name><surname>Wenger</surname><given-names>S.</given-names></name></person-group>
<article-title>The relationship between waiting in a service queue and evaluations of service quality: A field theory perspective</article-title>
<source>Psychol. Mark.</source>
<year>1998</year>
<volume>15</volume>
<fpage>735</fpage>
<lpage>753</lpage>
<pub-id pub-id-type="doi">10.1002/(SICI)1520-6793(199812)15:8&#x0003c;735::AID-MAR2&#x0003e;3.0.CO;2-9</pub-id>
</element-citation></ref><ref id="B3-sensors-16-01958"><label>3.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Maister</surname><given-names>D.H.</given-names></name></person-group>
<source>The Psychology of Waiting Lines</source>
<publisher-name>Lexington Books</publisher-name>
<publisher-loc>Lexington, MA, USA</publisher-loc>
<year>1984</year>
</element-citation></ref><ref id="B4-sensors-16-01958"><label>4.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Chan</surname><given-names>A.B.</given-names></name><name><surname>Liang</surname><given-names>Z.-S.J.</given-names></name><name><surname>Vasconcelos</surname><given-names>N.</given-names></name></person-group>
<article-title>Privacy preserving crowd monitoring: Counting people without people models or tracking</article-title>
<source>Proceedings of the IEEE Conference on Computer Vision and Pattern Recognition</source>
<conf-loc>Anchorage, AK, USA</conf-loc>
<conf-date>23&#x02013;28 June 2008</conf-date>
<fpage>1</fpage>
<lpage>7</lpage>
</element-citation></ref><ref id="B5-sensors-16-01958"><label>5.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Kilambi</surname><given-names>P.</given-names></name><name><surname>Ribnick</surname><given-names>E.</given-names></name><name><surname>Joshi</surname><given-names>A.J.</given-names></name><name><surname>Masoud</surname><given-names>O.</given-names></name><name><surname>Papanikolopoulos</surname><given-names>N.</given-names></name></person-group>
<article-title>Estimating pedestrian counts in groups</article-title>
<source>Comput. Vis. Image Underst.</source>
<year>2008</year>
<volume>110</volume>
<fpage>43</fpage>
<lpage>59</lpage>
<pub-id pub-id-type="doi">10.1016/j.cviu.2007.02.003</pub-id>
</element-citation></ref><ref id="B6-sensors-16-01958"><label>6.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Kong</surname><given-names>D.</given-names></name><name><surname>Gray</surname><given-names>D.</given-names></name><name><surname>Tao</surname><given-names>H.</given-names></name></person-group>
<article-title>Counting Pedestrians in Crowds Using Viewpoint Invariant Training</article-title>
<source>Proceedings of the British Machine Conference</source>
<conf-loc>Oxford, UK</conf-loc>
<conf-date>5&#x02013;8 September 2005</conf-date>
</element-citation></ref><ref id="B7-sensors-16-01958"><label>7.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Parameswaran</surname><given-names>V.</given-names></name><name><surname>Shet</surname><given-names>V.</given-names></name><name><surname>Ramesh</surname><given-names>V.</given-names></name></person-group>
<article-title>Design and validation of a system for people queue statistics estimation</article-title>
<source>Video Analytics for Business Intelligence</source>
<publisher-name>Springer</publisher-name>
<publisher-loc>Berlin/Heidelberg, Germany</publisher-loc>
<year>2012</year>
<fpage>355</fpage>
<lpage>373</lpage>
</element-citation></ref><ref id="B8-sensors-16-01958"><label>8.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Shen</surname><given-names>B.</given-names></name><name><surname>Zheng</surname><given-names>Q.</given-names></name><name><surname>Li</surname><given-names>X.</given-names></name><name><surname>Xu</surname><given-names>L.</given-names></name></person-group>
<article-title>A framework for mining actionable navigation patterns from in-store RFID datasets via indoor mapping</article-title>
<source>Sensors</source>
<year>2015</year>
<volume>15</volume>
<fpage>5344</fpage>
<lpage>5375</lpage>
<pub-id pub-id-type="doi">10.3390/s150305344</pub-id>
<pub-id pub-id-type="pmid">25751076</pub-id></element-citation></ref><ref id="B9-sensors-16-01958"><label>9.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Budic</surname><given-names>D.</given-names></name><name><surname>Martinovic</surname><given-names>Z.</given-names></name><name><surname>Simunic</surname><given-names>D.</given-names></name></person-group>
<article-title>Cash register lines optimization system using rfid technology</article-title>
<source>Proceedings of the 37th International Convention on Information and Communication Technology, Electronics and Microelectronics</source>
<conf-loc>Opatija, Croatia</conf-loc>
<conf-date>26&#x02013;30 May 2014</conf-date>
<fpage>459</fpage>
<lpage>462</lpage>
</element-citation></ref><ref id="B10-sensors-16-01958"><label>10.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Zhuang</surname><given-names>Y.</given-names></name><name><surname>Yang</surname><given-names>J.</given-names></name><name><surname>Li</surname><given-names>Y.</given-names></name><name><surname>Qi</surname><given-names>L.</given-names></name><name><surname>El-Sheimy</surname><given-names>N.</given-names></name></person-group>
<article-title>Smartphone-based indoor localization with bluetooth low energy beacons</article-title>
<source>Sensors</source>
<year>2016</year>
<volume>16</volume>
<pub-id pub-id-type="doi">10.3390/s16050596</pub-id>
<pub-id pub-id-type="pmid">27128917</pub-id></element-citation></ref><ref id="B11-sensors-16-01958"><label>11.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Nishide</surname><given-names>R.</given-names></name><name><surname>Yamamoto</surname><given-names>S.</given-names></name><name><surname>Takada</surname><given-names>H.</given-names></name></person-group>
<article-title>Position estimation for people waiting in line using bluetooth communication</article-title>
<source>Proceedings of the 5th International Conference on Mobile Services, Resources, and Users</source>
<conf-loc>Brussels, Belgium</conf-loc>
<conf-date>21&#x02013;26 June 2015</conf-date>
</element-citation></ref><ref id="B12-sensors-16-01958"><label>12.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Bullock</surname><given-names>D.</given-names></name><name><surname>Haseman</surname><given-names>R.</given-names></name><name><surname>Wasson</surname><given-names>J.</given-names></name><name><surname>Spitler</surname><given-names>R.</given-names></name></person-group>
<article-title>Automated measurement of wait times at airport security: Deployment at indianapolis international airport, indiana</article-title>
<source>Transp. Res. Rec.</source>
<year>2010</year>
<volume>2117</volume>
<fpage>60</fpage>
<lpage>68</lpage>
<pub-id pub-id-type="doi">10.3141/2177-08</pub-id>
</element-citation></ref><ref id="B13-sensors-16-01958"><label>13.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Brezmes</surname><given-names>T.</given-names></name><name><surname>Gorricho</surname><given-names>J.-L.</given-names></name><name><surname>Cotrina</surname><given-names>J.</given-names></name></person-group>
<article-title>Activity recognition from accelerometer data on a mobile phone</article-title>
<source>Distributed Computing, Artificial Intelligence, Bioinformatics, Soft Computing, and Ambient Assisted Living</source>
<publisher-name>Springer</publisher-name>
<publisher-loc>Berlin/Heidelberg, Germany</publisher-loc>
<year>2009</year>
<fpage>796</fpage>
<lpage>799</lpage>
</element-citation></ref><ref id="B14-sensors-16-01958"><label>14.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Wang</surname><given-names>Y.</given-names></name><name><surname>Wang</surname><given-names>J.</given-names></name><name><surname>Zhang</surname><given-names>X.</given-names></name></person-group>
<article-title>Qtime: A queuing-time notification system based on participatory sensing data</article-title>
<source>Proceedings of the IEEE 37th Computer Software and Applications Conference</source>
<conf-loc>Kyoto, Japan</conf-loc>
<conf-date>22&#x02013;26 July 2013</conf-date>
<fpage>770</fpage>
<lpage>777</lpage>
</element-citation></ref><ref id="B15-sensors-16-01958"><label>15.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Bulut</surname><given-names>M.F.</given-names></name><name><surname>Demirbas</surname><given-names>M.</given-names></name><name><surname>Ferhatosmanoglu</surname><given-names>H.</given-names></name></person-group>
<article-title>Lineking: Coffee shop wait-time monitoring using smartphones</article-title>
<source>IEEE. Trans. Mob. Comput.</source>
<year>2015</year>
<volume>14</volume>
<fpage>2045</fpage>
<lpage>2058</lpage>
<pub-id pub-id-type="doi">10.1109/TMC.2014.2384032</pub-id>
</element-citation></ref><ref id="B16-sensors-16-01958"><label>16.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Biswas</surname><given-names>J.</given-names></name><name><surname>Veloso</surname><given-names>M.M.</given-names></name></person-group>
<article-title>Wifi localization and navigation for autonomous indoor mobile robots</article-title>
<source>Proceedings of the IEEE International Conference on Robotics &#x00026; Automation</source>
<conf-loc>Anchorage, AK, USA</conf-loc>
<conf-date>3&#x02013;8 May 2010</conf-date>
<fpage>4379</fpage>
<lpage>4384</lpage>
</element-citation></ref><ref id="B17-sensors-16-01958"><label>17.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Evennou</surname><given-names>F.</given-names></name><name><surname>Marx</surname><given-names>F.</given-names></name></person-group>
<article-title>Advanced integration of wifi and inertial navigation systems for indoor mobile positioning</article-title>
<source>Eurasip J. Appl. Signal Process.</source>
<year>2006</year>
<volume>2006</volume>
<fpage>086706</fpage>
<pub-id pub-id-type="doi">10.1155/ASP/2006/86706</pub-id>
</element-citation></ref><ref id="B18-sensors-16-01958"><label>18.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Haddadi</surname><given-names>H.</given-names></name><name><surname>Hui</surname><given-names>P.</given-names></name><name><surname>Brown</surname><given-names>I.</given-names></name></person-group>
<article-title>Mobiad: Private and scalable mobile advertising</article-title>
<source>Proceedings of the Fifth ACM International Workshop on Mobility in the Evolving Internet Architecture</source>
<conf-loc>Chicago, IL, USA</conf-loc>
<conf-date>20&#x02013;24 September 2010</conf-date>
<fpage>33</fpage>
<lpage>38</lpage>
</element-citation></ref><ref id="B19-sensors-16-01958"><label>19.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Yoon</surname><given-names>C.</given-names></name><name><surname>Lee</surname><given-names>H.</given-names></name><name><surname>Jeon</surname><given-names>S.</given-names></name><name><surname>Lee</surname><given-names>H.</given-names></name></person-group>
<article-title>Mobile digital signage system based on service delivery platform location based targeted advertisement service</article-title>
<source>ICT Converg. (ICTC)</source>
<year>2011</year>
<fpage>582</fpage>
<lpage>586</lpage>
<pub-id pub-id-type="doi">10.1109/ICTC.2011.6082669</pub-id>
</element-citation></ref><ref id="B20-sensors-16-01958"><label>20.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Chen</surname><given-names>Z.</given-names></name></person-group>
<article-title>Mining individual behavior pattern based on significant locations and spatial trajectories</article-title>
<source>Proceedings of the 2012 IEEE International Conference on Pervasive Computing and Communications Workshops (PERCOM Workshops)</source>
<conf-loc>Lugano, Switzerland</conf-loc>
<conf-date>19&#x02013;23 March 2012</conf-date>
<fpage>540</fpage>
<lpage>541</lpage>
</element-citation></ref><ref id="B21-sensors-16-01958"><label>21.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Manweiler</surname><given-names>J.</given-names></name><name><surname>Santhapuri</surname><given-names>N.</given-names></name><name><surname>Choudhury</surname><given-names>R.R.</given-names></name><name><surname>Nelakuditi</surname><given-names>S.</given-names></name></person-group>
<article-title>Predicting length of stay at wifi hotspots</article-title>
<source>Proceedings of the 32nd IEEE INFOCOM Conference</source>
<conf-loc>Turin, Italy</conf-loc>
<conf-date>14&#x02013;19 April 2013</conf-date>
<fpage>3102</fpage>
<lpage>3110</lpage>
</element-citation></ref><ref id="B22-sensors-16-01958"><label>22.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Bulut</surname><given-names>M.F.</given-names></name><name><surname>Yilmaz</surname><given-names>Y.S.</given-names></name><name><surname>Demirbas</surname><given-names>M.</given-names></name><name><surname>Ferhatosmanoglu</surname><given-names>N.</given-names></name><name><surname>Ferhatosmanoglu</surname><given-names>H.</given-names></name></person-group>
<article-title>Lineking: Crowdsourced line wait-time estimation using smartphones</article-title>
<source>Mobile Computing, Applications, and Services</source>
<publisher-name>Springer</publisher-name>
<publisher-loc>Berlin/Heidelberg, Germany</publisher-loc>
<year>2012</year>
<fpage>205</fpage>
<lpage>224</lpage>
</element-citation></ref><ref id="B23-sensors-16-01958"><label>23.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Wang</surname><given-names>Y.</given-names></name><name><surname>Chen</surname><given-names>Y.</given-names></name><name><surname>Yang</surname><given-names>J.</given-names></name><name><surname>Liul</surname><given-names>H.</given-names></name><name><surname>Gruteser</surname><given-names>M.</given-names></name><name><surname>Martin</surname><given-names>R.P.</given-names></name></person-group>
<article-title>A low-cost Wi-Fi-based solution for measuring human queues</article-title>
<source>GetMob. Mob. Comput. Commun.</source>
<year>2015</year>
<volume>19</volume>
<fpage>10</fpage>
<lpage>13</lpage>
</element-citation></ref><ref id="B24-sensors-16-01958"><label>24.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Wang</surname><given-names>Y.</given-names></name><name><surname>Yang</surname><given-names>J.</given-names></name><name><surname>Chen</surname><given-names>Y.</given-names></name><name><surname>Liu</surname><given-names>H.</given-names></name><name><surname>Gruteser</surname><given-names>M.</given-names></name><name><surname>Martin</surname><given-names>R.P.</given-names></name></person-group>
<article-title>Tracking human queues using single-point signal monitoring</article-title>
<source>Proceedings of the 12th Annual International Conference on Mobile Systems, Applications, and Services</source>
<conf-loc>Bretton Woods, NH, USA</conf-loc>
<conf-date>16&#x02013;19 June 2014</conf-date>
<fpage>42</fpage>
<lpage>54</lpage>
</element-citation></ref><ref id="B25-sensors-16-01958"><label>25.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Wang</surname><given-names>Y.</given-names></name><name><surname>Yang</surname><given-names>J.</given-names></name><name><surname>Liu</surname><given-names>H.</given-names></name><name><surname>Chen</surname><given-names>Y.</given-names></name><name><surname>Gruteser</surname><given-names>M.</given-names></name><name><surname>Martin</surname><given-names>R.P.</given-names></name></person-group>
<article-title>Measuring human queues using wifi signals</article-title>
<source>Proceedings of the 19th Annual International Conference on Mobile Computing &#x00026; Networking</source>
<conf-loc>Miami, FL, USA</conf-loc>
<conf-date>30 September&#x02013;4 October 2013</conf-date>
<fpage>235</fpage>
<lpage>238</lpage>
</element-citation></ref><ref id="B26-sensors-16-01958"><label>26.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Gardner</surname><given-names>E.S.</given-names></name></person-group>
<article-title>Exponential smoothing: The state of the art</article-title>
<source>J. Forecast.</source>
<year>1985</year>
<volume>4</volume>
<fpage>1</fpage>
<lpage>28</lpage>
<pub-id pub-id-type="doi">10.1002/for.3980040103</pub-id>
</element-citation></ref><ref id="B27-sensors-16-01958"><label>27.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Hyndman</surname><given-names>R.J.</given-names></name><name><surname>Koehler</surname><given-names>A.B.</given-names></name><name><surname>Snyder</surname><given-names>R.D.</given-names></name><name><surname>Grose</surname><given-names>S.</given-names></name></person-group>
<article-title>A state space framework for automatic forecasting using exponential smoothing methods</article-title>
<source>Int. J. Forecast.</source>
<year>2002</year>
<volume>18</volume>
<fpage>439</fpage>
<lpage>454</lpage>
<pub-id pub-id-type="doi">10.1016/S0169-2070(01)00110-8</pub-id>
</element-citation></ref><ref id="B28-sensors-16-01958"><label>28.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Holt</surname><given-names>C.C.</given-names></name></person-group>
<article-title>Forecasting seasonals and trends by exponentially weighted moving averages</article-title>
<source>Int. J. Forecast.</source>
<year>2004</year>
<volume>20</volume>
<fpage>5</fpage>
<lpage>10</lpage>
<pub-id pub-id-type="doi">10.1016/j.ijforecast.2003.09.015</pub-id>
</element-citation></ref><ref id="B29-sensors-16-01958"><label>29.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Winters</surname><given-names>P.R.</given-names></name></person-group>
<article-title>Forecasting sales by exponentially weighted moving averages</article-title>
<source>Manag. Sci.</source>
<year>1960</year>
<volume>6</volume>
<fpage>324</fpage>
<lpage>342</lpage>
<pub-id pub-id-type="doi">10.1287/mnsc.6.3.324</pub-id>
</element-citation></ref><ref id="B30-sensors-16-01958"><label>30.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Cleveland</surname><given-names>R.B.</given-names></name><name><surname>Cleveland</surname><given-names>W.S.</given-names></name><name><surname>McRae</surname><given-names>J.E.</given-names></name><name><surname>Terpenning</surname><given-names>I.</given-names></name></person-group>
<article-title>STL: A seasonal-trend decomposition procedure based on loess</article-title>
<source>J. Off. Stat.</source>
<year>1990</year>
<volume>6</volume>
<fpage>3</fpage>
<lpage>73</lpage>
</element-citation></ref><ref id="B31-sensors-16-01958"><label>31.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Theodosiou</surname><given-names>M.</given-names></name></person-group>
<article-title>Forecasting monthly and quarterly time series using STL decomposition</article-title>
<source>Int. J. Forecast.</source>
<year>2011</year>
<volume>27</volume>
<fpage>1178</fpage>
<lpage>1195</lpage>
<pub-id pub-id-type="doi">10.1016/j.ijforecast.2010.11.002</pub-id>
</element-citation></ref><ref id="B32-sensors-16-01958"><label>32.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Davis</surname><given-names>R.</given-names></name><name><surname>Rogers</surname><given-names>T.</given-names></name><name><surname>Huang</surname><given-names>Y.</given-names></name></person-group>
<article-title>A Survey of Recent Developments in Queue Wait Time Forecasting Methods</article-title>
<source>Proceedings of the International Conference on Foundations of Computer Science (FCS)</source>
<conf-loc>Millersville, PA, USA</conf-loc>
<conf-date>25&#x02013;28 July 2016</conf-date>
</element-citation></ref><ref id="B33-sensors-16-01958"><label>33.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Cooper</surname><given-names>R.B.</given-names></name></person-group>
<source>Introduction to Queueing Theory</source>
<publisher-name>North Holland</publisher-name>
<publisher-loc>New York, NY, USA</publisher-loc>
<year>1981</year>
</element-citation></ref><ref id="B34-sensors-16-01958"><label>34.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Gross</surname><given-names>D.</given-names></name></person-group>
<source>Fundamentals of Queueing Theory</source>
<publisher-name>John Wiley &#x00026; Sons</publisher-name>
<publisher-loc>Hoboken, NJ, USA</publisher-loc>
<year>2008</year>
</element-citation></ref><ref id="B35-sensors-16-01958"><label>35.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Gerlough</surname><given-names>D.L.</given-names></name><name><surname>Huber</surname><given-names>M.J.</given-names></name></person-group>
<source>Traffic Flow Theory</source>
<publisher-name>National Research Council</publisher-name>
<publisher-loc>Washington, DC, USA</publisher-loc>
<year>1975</year>
<fpage>7</fpage>
<lpage>70</lpage>
</element-citation></ref><ref id="B36-sensors-16-01958"><label>36.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Kerner</surname><given-names>B.S.</given-names></name></person-group>
<source>Introduction to Modern Traffic Flow Theory and Control: The Long Road to Three-Phase Traffic Theory</source>
<publisher-name>Springer</publisher-name>
<publisher-loc>Berlin/Heidelberg, Germany</publisher-loc>
<year>2009</year>
</element-citation></ref><ref id="B37-sensors-16-01958"><label>37.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Woo</surname><given-names>S.</given-names></name><name><surname>Jeong</surname><given-names>S.</given-names></name><name><surname>Mok</surname><given-names>E.</given-names></name><name><surname>Xia</surname><given-names>L.</given-names></name><name><surname>Choi</surname><given-names>C.</given-names></name><name><surname>Pyeon</surname><given-names>M.</given-names></name><name><surname>Heo</surname><given-names>J.</given-names></name></person-group>
<article-title>Application of wifi-based indoor positioning system for labor tracking at construction sites: A case study in guangzhou MTR</article-title>
<source>Autom. Constr.</source>
<year>2011</year>
<volume>20</volume>
<fpage>3</fpage>
<lpage>13</lpage>
<pub-id pub-id-type="doi">10.1016/j.autcon.2010.07.009</pub-id>
</element-citation></ref><ref id="B38-sensors-16-01958"><label>38.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>O&#x02019;hara</surname><given-names>B.</given-names></name><name><surname>Petrick</surname><given-names>A.</given-names></name></person-group>
<source>IEEE 802.11 Handbook: A Designer&#x02019;s Companion</source>
<publisher-name>IEEE Standards Association</publisher-name>
<publisher-loc>Piscataway, NJ, USA</publisher-loc>
<year>2005</year>
</element-citation></ref><ref id="B39-sensors-16-01958"><label>39.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Cheng</surname><given-names>Y.-C.</given-names></name><name><surname>Chawathe</surname><given-names>Y.</given-names></name><name><surname>LaMarca</surname><given-names>A.</given-names></name><name><surname>Krumm</surname><given-names>J.</given-names></name></person-group>
<article-title>Accuracy characterization for metropolitan-scale wi-fi localization</article-title>
<source>Proceedings of the 3rd International Conference on Mobile Systems, Applications, and Services</source>
<conf-loc>Seattle, WA, USA</conf-loc>
<conf-date>6&#x02013;8 June 2005</conf-date>
<fpage>233</fpage>
<lpage>245</lpage>
</element-citation></ref><ref id="B40-sensors-16-01958"><label>40.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Hightower</surname><given-names>J.</given-names></name><name><surname>Borriello</surname><given-names>G.</given-names></name></person-group>
<article-title>Location systems for ubiquitous computing</article-title>
<source>Computer</source>
<year>2001</year>
<volume>34</volume>
<fpage>57</fpage>
<lpage>66</lpage>
<pub-id pub-id-type="doi">10.1109/2.940014</pub-id>
</element-citation></ref><ref id="B41-sensors-16-01958"><label>41.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Motley</surname><given-names>A.</given-names></name><name><surname>Keenan</surname><given-names>J.</given-names></name></person-group>
<article-title>Personal communication radio coverage in buildings at 900 MHz and 1700 MHz</article-title>
<source>Electron. Lett.</source>
<year>1988</year>
<volume>24</volume>
<fpage>763</fpage>
<lpage>764</lpage>
<pub-id pub-id-type="doi">10.1049/el:19880515</pub-id>
</element-citation></ref><ref id="B42-sensors-16-01958"><label>42.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Liu</surname><given-names>H.</given-names></name><name><surname>Darabi</surname><given-names>H.</given-names></name><name><surname>Banerjee</surname><given-names>P.</given-names></name><name><surname>Liu</surname><given-names>J.</given-names></name></person-group>
<article-title>Survey of wireless indoor positioning techniques and systems</article-title>
<source>IEEE Trans. Syst. Man Cybern. Part C Appl. Rev.</source>
<year>2007</year>
<volume>37</volume>
<fpage>1067</fpage>
<lpage>1080</lpage>
<pub-id pub-id-type="doi">10.1109/TSMCC.2007.905750</pub-id>
</element-citation></ref><ref id="B43-sensors-16-01958"><label>43.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Park</surname><given-names>D.</given-names></name><name><surname>Park</surname><given-names>J.G.</given-names></name></person-group>
<article-title>An Enhanced Ranging Scheme Using WiFi RSSI Measurements for Ubiquitous Location</article-title>
<source>Proceedings of the 2011 First ACIS/JNU International Conference on Computers, Networks, Systems and Industrial Engineering (CNSI)</source>
<conf-loc>Jeju, Korea</conf-loc>
<conf-date>23&#x02013;25 May 2011</conf-date>
<fpage>296</fpage>
<lpage>301</lpage>
</element-citation></ref><ref id="B44-sensors-16-01958"><label>44.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Box</surname><given-names>G.E.</given-names></name><name><surname>Jenkins</surname><given-names>G.M.</given-names></name><name><surname>Reinsel</surname><given-names>G.C.</given-names></name><name><surname>Ljung</surname><given-names>G.M.</given-names></name></person-group>
<source>Time Series Analysis: Forecasting and Control</source>
<publisher-name>John Wiley &#x00026; Sons</publisher-name>
<publisher-loc>Hoboken, NJ, USA</publisher-loc>
<year>2015</year>
</element-citation></ref><ref id="B45-sensors-16-01958"><label>45.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Le Dortz</surname><given-names>N.</given-names></name><name><surname>Gain</surname><given-names>F.</given-names></name><name><surname>Zetterberg</surname><given-names>P.</given-names></name></person-group>
<article-title>WiFi fingerprint indoor positioning system using probability distribution comparison</article-title>
<source>Proceedings of the 2012 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)</source>
<conf-loc>Kyoto, Japan</conf-loc>
<conf-date>25&#x02013;30 March 2012</conf-date>
<fpage>1</fpage>
<lpage>12</lpage>
</element-citation></ref><ref id="B46-sensors-16-01958"><label>46.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Hern&#x000e1;ndez</surname><given-names>N.</given-names></name><name><surname>Alonso</surname><given-names>J.M.</given-names></name><name><surname>Ocana</surname><given-names>M.</given-names></name><name><surname>Marina</surname><given-names>M.K.</given-names></name></person-group>
<article-title>Impact of Signal Representations on the Performance of Hierarchical WiFi Localization Systems</article-title>
<source>Proceedings of the 14th International Conference on Computer Aided Systems Theory (EUROCAST)</source>
<conf-loc>Las Palmas, Spain</conf-loc>
<conf-date>6&#x02013;15 February 2013</conf-date>
</element-citation></ref><ref id="B47-sensors-16-01958"><label>47.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Hern&#x000e1;ndez</surname><given-names>N.</given-names></name><name><surname>Alonso</surname><given-names>J.M.</given-names></name><name><surname>Oca&#x000f1;a</surname><given-names>M.</given-names></name></person-group>
<article-title>Hierarchical approach to enhancing topology-based wifi indoor localization in large environments</article-title>
<source>J. Mult.-Valued Log. Soft Comput.</source>
<year>2016</year>
<volume>26</volume>
<fpage>221</fpage>
<lpage>241</lpage>
</element-citation></ref><ref id="B48-sensors-16-01958"><label>48.</label><element-citation publication-type="webpage">
<article-title>Forecast: Forecasting Functions for Time Series and Linear Models</article-title>
<comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://cran.r-project.org/web/packages/forecast/index.html">https://cran.r-project.org/web/packages/forecast/index.html</ext-link></comment>
<date-in-citation>(accessed on 27 September 2016)</date-in-citation>
</element-citation></ref><ref id="B49-sensors-16-01958"><label>49.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Team</surname><given-names>R.C.</given-names></name></person-group>
<source>R: A Language and Environment for Statistical Computing</source>
<publisher-name>R Foundation for Statistical Computing</publisher-name>
<publisher-loc>Vienna, Austria</publisher-loc>
<year>2013</year>
</element-citation></ref></ref-list></back><floats-group><fig id="sensors-16-01958-f001" position="float"><label>Figure 1</label><caption><p>Theoretical map of the trilateration positioning method.</p></caption><graphic xlink:href="sensors-16-01958-g001"/></fig><fig id="sensors-16-01958-f002" position="float"><label>Figure 2</label><caption><p>Process flow of the queuing time determination model.</p></caption><graphic xlink:href="sensors-16-01958-g002"/></fig><fig id="sensors-16-01958-f003" position="float"><label>Figure 3</label><caption><p>Queuing sequence of an individual in the time domain.</p></caption><graphic xlink:href="sensors-16-01958-g003"/></fig><fig id="sensors-16-01958-f004" position="float"><label>Figure 4</label><caption><p>Time slicing for queuing time estimation and prediction.</p></caption><graphic xlink:href="sensors-16-01958-g004"/></fig><fig id="sensors-16-01958-f005" position="float"><label>Figure 5</label><caption><p>General overview of the queue zone and the locations of the APs.</p></caption><graphic xlink:href="sensors-16-01958-g005"/></fig><fig id="sensors-16-01958-f006" position="float"><label>Figure 6</label><caption><p>Validation results of the WiFi-based estimation model.</p></caption><graphic xlink:href="sensors-16-01958-g006"/></fig><fig id="sensors-16-01958-f007" position="float"><label>Figure 7</label><caption><p>Passenger trajectory examples. (<bold>a</bold>&#x02013;<bold>d</bold>) show trajectories of four different passengers in the T3-C Entrance.</p></caption><graphic xlink:href="sensors-16-01958-g007"/></fig><fig id="sensors-16-01958-f008" position="float"><label>Figure 8</label><caption><p>Comparison of the estimated and actual queuing times. (<bold>a</bold>) Comparison of the estimated and actual queuing times on 11 August; (<bold>b</bold>) Comparison of the estimated and actual queuing times on 12 August; (<bold>c</bold>) Comparison of the estimated and actual queuing times on 13 August; (<bold>d</bold>) Comparison of the estimated and actual queuing times on 14 August.</p></caption><graphic xlink:href="sensors-16-01958-g008"/></fig><fig id="sensors-16-01958-f009" position="float"><label>Figure 9</label><caption><p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p></caption><graphic xlink:href="sensors-16-01958-g009"/></fig><table-wrap id="sensors-16-01958-t001" position="float"><object-id pub-id-type="pii">sensors-16-01958-t001_Table 1</object-id><label>Table 1</label><caption><p>Results of the topological test near the border of the queue zone.</p></caption><table frame="hsides" rules="groups"><thead><tr><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">
</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">Inside</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">Outside</th></tr></thead><tbody><tr><td align="center" valign="middle" rowspan="1" colspan="1">Inside</td><td align="center" valign="middle" rowspan="1" colspan="1">73.11%</td><td align="center" valign="middle" rowspan="1" colspan="1">26.89%</td></tr><tr><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Outside</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">17.21%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">82.79%</td></tr></tbody></table></table-wrap><table-wrap id="sensors-16-01958-t002" position="float"><object-id pub-id-type="pii">sensors-16-01958-t002_Table 2</object-id><label>Table 2</label><caption><p>Error statistics of different parameter combinations.</p></caption><table frame="hsides" rules="groups"><thead><tr><th colspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1">Parameter Combinations</th><th colspan="7" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1">Error Statistics</th></tr><tr><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">
<inline-formula><mml:math id="mm123"><mml:mstyle mathvariant="bold"><mml:mi mathvariant="bold-italic">k</mml:mi></mml:mstyle></mml:math></inline-formula>
</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">
<inline-formula><mml:math id="mm124"><mml:mstyle mathvariant="bold"><mml:mi mathvariant="bold-italic">r</mml:mi></mml:mstyle></mml:math></inline-formula>
</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Mean</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Std.</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">MAE</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 60 s</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 120 s</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 180 s</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 200 s</th></tr></thead><tbody><tr><td align="center" valign="middle" rowspan="1" colspan="1">5</td><td align="center" valign="middle" rowspan="1" colspan="1">50%</td><td align="center" valign="middle" rowspan="1" colspan="1">30.27</td><td align="center" valign="middle" rowspan="1" colspan="1">177.30</td><td align="center" valign="middle" rowspan="1" colspan="1">144.57</td><td align="center" valign="middle" rowspan="1" colspan="1">32.99%</td><td align="center" valign="middle" rowspan="1" colspan="1">49.48%</td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>71.13%</bold></td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>76.29%</bold></td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">6</td><td align="center" valign="middle" rowspan="1" colspan="1">50%</td><td align="center" valign="middle" rowspan="1" colspan="1">38.46</td><td align="center" valign="middle" rowspan="1" colspan="1">189.37</td><td align="center" valign="middle" rowspan="1" colspan="1">146.60</td><td align="center" valign="middle" rowspan="1" colspan="1">30.93%</td><td align="center" valign="middle" rowspan="1" colspan="1">50.52%</td><td align="center" valign="middle" rowspan="1" colspan="1">69.07%</td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>73.20%</bold></td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">7</td><td align="center" valign="middle" rowspan="1" colspan="1">50%</td><td align="center" valign="middle" rowspan="1" colspan="1">49.39</td><td align="center" valign="middle" rowspan="1" colspan="1">193.98</td><td align="center" valign="middle" rowspan="1" colspan="1">151.24</td><td align="center" valign="middle" rowspan="1" colspan="1">27.84%</td><td align="center" valign="middle" rowspan="1" colspan="1">50.52%</td><td align="center" valign="middle" rowspan="1" colspan="1">69.07%</td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>72.16%</bold></td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">8</td><td align="center" valign="middle" rowspan="1" colspan="1">50%</td><td align="center" valign="middle" rowspan="1" colspan="1">52.08</td><td align="center" valign="middle" rowspan="1" colspan="1">193.59</td><td align="center" valign="middle" rowspan="1" colspan="1">151.72</td><td align="center" valign="middle" rowspan="1" colspan="1">26.80%</td><td align="center" valign="middle" rowspan="1" colspan="1">52.58%</td><td align="center" valign="middle" rowspan="1" colspan="1">69.07%</td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>73.20%</bold></td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">9</td><td align="center" valign="middle" rowspan="1" colspan="1">50%</td><td align="center" valign="middle" rowspan="1" colspan="1">61.11</td><td align="center" valign="middle" rowspan="1" colspan="1">195.71</td><td align="center" valign="middle" rowspan="1" colspan="1">157.38</td><td align="center" valign="middle" rowspan="1" colspan="1">25.77%</td><td align="center" valign="middle" rowspan="1" colspan="1">52.58%</td><td align="center" valign="middle" rowspan="1" colspan="1">65.98%</td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>71.13%</bold></td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">10</td><td align="center" valign="middle" rowspan="1" colspan="1">50%</td><td align="center" valign="middle" rowspan="1" colspan="1">63.47</td><td align="center" valign="middle" rowspan="1" colspan="1">193.69</td><td align="center" valign="middle" rowspan="1" colspan="1">162.19</td><td align="center" valign="middle" rowspan="1" colspan="1">22.68%</td><td align="center" valign="middle" rowspan="1" colspan="1">47.42%</td><td align="center" valign="middle" rowspan="1" colspan="1">62.89%</td><td align="center" valign="middle" rowspan="1" colspan="1">69.07%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">5</td><td align="center" valign="middle" rowspan="1" colspan="1">40%</td><td align="center" valign="middle" rowspan="1" colspan="1">30.10</td><td align="center" valign="middle" rowspan="1" colspan="1">196.18</td><td align="center" valign="middle" rowspan="1" colspan="1">148.54</td><td align="center" valign="middle" rowspan="1" colspan="1">34.02%</td><td align="center" valign="middle" rowspan="1" colspan="1">52.58%</td><td align="center" valign="middle" rowspan="1" colspan="1">67.01%</td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>72.16%</bold></td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">5</td><td align="center" valign="middle" rowspan="1" colspan="1">30%</td><td align="center" valign="middle" rowspan="1" colspan="1">24.36</td><td align="center" valign="middle" rowspan="1" colspan="1">207.67</td><td align="center" valign="middle" rowspan="1" colspan="1">158.72</td><td align="center" valign="middle" rowspan="1" colspan="1">29.90%</td><td align="center" valign="middle" rowspan="1" colspan="1">49.48%</td><td align="center" valign="middle" rowspan="1" colspan="1">65.98%</td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>70.10%</bold></td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">5</td><td align="center" valign="middle" rowspan="1" colspan="1">20%</td><td align="center" valign="middle" rowspan="1" colspan="1">15.21</td><td align="center" valign="middle" rowspan="1" colspan="1">210.29</td><td align="center" valign="middle" rowspan="1" colspan="1">160.19</td><td align="center" valign="middle" rowspan="1" colspan="1">27.84%</td><td align="center" valign="middle" rowspan="1" colspan="1">52.58%</td><td align="center" valign="middle" rowspan="1" colspan="1">67.01%</td><td align="center" valign="middle" rowspan="1" colspan="1">69.07%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">5</td><td align="center" valign="middle" rowspan="1" colspan="1">10%</td><td align="center" valign="middle" rowspan="1" colspan="1">&#x02212;2.76</td><td align="center" valign="middle" rowspan="1" colspan="1">216.68</td><td align="center" valign="middle" rowspan="1" colspan="1">167.48</td><td align="center" valign="middle" rowspan="1" colspan="1">24.74%</td><td align="center" valign="middle" rowspan="1" colspan="1">48.45%</td><td align="center" valign="middle" rowspan="1" colspan="1">65.98%</td><td align="center" valign="middle" rowspan="1" colspan="1">69.07%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">5</td><td align="center" valign="middle" rowspan="1" colspan="1">0%</td><td align="center" valign="middle" rowspan="1" colspan="1">&#x02212;49.45</td><td align="center" valign="middle" rowspan="1" colspan="1">228.15</td><td align="center" valign="middle" rowspan="1" colspan="1">183.47</td><td align="center" valign="middle" rowspan="1" colspan="1">21.65%</td><td align="center" valign="middle" rowspan="1" colspan="1">42.27%</td><td align="center" valign="middle" rowspan="1" colspan="1">59.79%</td><td align="center" valign="middle" rowspan="1" colspan="1">61.86%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">6</td><td align="center" valign="middle" rowspan="1" colspan="1">40%</td><td align="center" valign="middle" rowspan="1" colspan="1">35.54</td><td align="center" valign="middle" rowspan="1" colspan="1">195.21</td><td align="center" valign="middle" rowspan="1" colspan="1">150.07</td><td align="center" valign="middle" rowspan="1" colspan="1">29.90%</td><td align="center" valign="middle" rowspan="1" colspan="1">49.48%</td><td align="center" valign="middle" rowspan="1" colspan="1">67.01%</td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>72.16%</bold></td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">6</td><td align="center" valign="middle" rowspan="1" colspan="1">30%</td><td align="center" valign="middle" rowspan="1" colspan="1">31.21</td><td align="center" valign="middle" rowspan="1" colspan="1">207.15</td><td align="center" valign="middle" rowspan="1" colspan="1">160.91</td><td align="center" valign="middle" rowspan="1" colspan="1">26.80%</td><td align="center" valign="middle" rowspan="1" colspan="1">47.42%</td><td align="center" valign="middle" rowspan="1" colspan="1">64.95%</td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>70.10%</bold></td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">6</td><td align="center" valign="middle" rowspan="1" colspan="1">20%</td><td align="center" valign="middle" rowspan="1" colspan="1">20.18</td><td align="center" valign="middle" rowspan="1" colspan="1">209.47</td><td align="center" valign="middle" rowspan="1" colspan="1">161.04</td><td align="center" valign="middle" rowspan="1" colspan="1">26.80%</td><td align="center" valign="middle" rowspan="1" colspan="1">50.52%</td><td align="center" valign="middle" rowspan="1" colspan="1">67.01%</td><td align="center" valign="middle" rowspan="1" colspan="1"><bold>70.10%</bold></td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">6</td><td align="center" valign="middle" rowspan="1" colspan="1">10%</td><td align="center" valign="middle" rowspan="1" colspan="1">1.17</td><td align="center" valign="middle" rowspan="1" colspan="1">215.61</td><td align="center" valign="middle" rowspan="1" colspan="1">166.61</td><td align="center" valign="middle" rowspan="1" colspan="1">24.74%</td><td align="center" valign="middle" rowspan="1" colspan="1">49.48%</td><td align="center" valign="middle" rowspan="1" colspan="1">65.98%</td><td align="center" valign="middle" rowspan="1" colspan="1">69.07%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">6</td><td align="center" valign="middle" rowspan="1" colspan="1">0%</td><td align="center" valign="middle" rowspan="1" colspan="1">&#x02212;40.43</td><td align="center" valign="middle" rowspan="1" colspan="1">230.45</td><td align="center" valign="middle" rowspan="1" colspan="1">183.76</td><td align="center" valign="middle" rowspan="1" colspan="1">21.65%</td><td align="center" valign="middle" rowspan="1" colspan="1">41.24%</td><td align="center" valign="middle" rowspan="1" colspan="1">58.76%</td><td align="center" valign="middle" rowspan="1" colspan="1">60.82%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">7</td><td align="center" valign="middle" rowspan="1" colspan="1">40%</td><td align="center" valign="middle" rowspan="1" colspan="1">47.71</td><td align="center" valign="middle" rowspan="1" colspan="1">200.10</td><td align="center" valign="middle" rowspan="1" colspan="1">155.34</td><td align="center" valign="middle" rowspan="1" colspan="1">27.84%</td><td align="center" valign="middle" rowspan="1" colspan="1">49.48%</td><td align="center" valign="middle" rowspan="1" colspan="1">65.98%</td><td align="center" valign="middle" rowspan="1" colspan="1">69.07%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">7</td><td align="center" valign="middle" rowspan="1" colspan="1">30%</td><td align="center" valign="middle" rowspan="1" colspan="1">42.49</td><td align="center" valign="middle" rowspan="1" colspan="1">212.83</td><td align="center" valign="middle" rowspan="1" colspan="1">165.82</td><td align="center" valign="middle" rowspan="1" colspan="1">25.77%</td><td align="center" valign="middle" rowspan="1" colspan="1">46.39%</td><td align="center" valign="middle" rowspan="1" colspan="1">63.92%</td><td align="center" valign="middle" rowspan="1" colspan="1">68.04%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">7</td><td align="center" valign="middle" rowspan="1" colspan="1">20%</td><td align="center" valign="middle" rowspan="1" colspan="1">38.49</td><td align="center" valign="middle" rowspan="1" colspan="1">215.77</td><td align="center" valign="middle" rowspan="1" colspan="1">167.98</td><td align="center" valign="middle" rowspan="1" colspan="1">27.84%</td><td align="center" valign="middle" rowspan="1" colspan="1">46.39%</td><td align="center" valign="middle" rowspan="1" colspan="1">64.95%</td><td align="center" valign="middle" rowspan="1" colspan="1">67.01%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">7</td><td align="center" valign="middle" rowspan="1" colspan="1">10%</td><td align="center" valign="middle" rowspan="1" colspan="1">21.25</td><td align="center" valign="middle" rowspan="1" colspan="1">229.22</td><td align="center" valign="middle" rowspan="1" colspan="1">174.12</td><td align="center" valign="middle" rowspan="1" colspan="1">25.77%</td><td align="center" valign="middle" rowspan="1" colspan="1">47.42%</td><td align="center" valign="middle" rowspan="1" colspan="1">63.92%</td><td align="center" valign="middle" rowspan="1" colspan="1">68.04%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">7</td><td align="center" valign="middle" rowspan="1" colspan="1">0%</td><td align="center" valign="middle" rowspan="1" colspan="1">&#x02212;21.29</td><td align="center" valign="middle" rowspan="1" colspan="1">250.22</td><td align="center" valign="middle" rowspan="1" colspan="1">194.09</td><td align="center" valign="middle" rowspan="1" colspan="1">23.71%</td><td align="center" valign="middle" rowspan="1" colspan="1">41.23%</td><td align="center" valign="middle" rowspan="1" colspan="1">56.70%</td><td align="center" valign="middle" rowspan="1" colspan="1">61.86%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">8</td><td align="center" valign="middle" rowspan="1" colspan="1">40%</td><td align="center" valign="middle" rowspan="1" colspan="1">51.51</td><td align="center" valign="middle" rowspan="1" colspan="1">201.10</td><td align="center" valign="middle" rowspan="1" colspan="1">156.96</td><td align="center" valign="middle" rowspan="1" colspan="1">26.80%</td><td align="center" valign="middle" rowspan="1" colspan="1">50.52%</td><td align="center" valign="middle" rowspan="1" colspan="1">67.01%</td><td align="center" valign="middle" rowspan="1" colspan="1">69.07%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">8</td><td align="center" valign="middle" rowspan="1" colspan="1">30%</td><td align="center" valign="middle" rowspan="1" colspan="1">46.30</td><td align="center" valign="middle" rowspan="1" colspan="1">214.06</td><td align="center" valign="middle" rowspan="1" colspan="1">167.07</td><td align="center" valign="middle" rowspan="1" colspan="1">25.77%</td><td align="center" valign="middle" rowspan="1" colspan="1">47.42%</td><td align="center" valign="middle" rowspan="1" colspan="1">64.95%</td><td align="center" valign="middle" rowspan="1" colspan="1">67.01%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">8</td><td align="center" valign="middle" rowspan="1" colspan="1">20%</td><td align="center" valign="middle" rowspan="1" colspan="1">42.15</td><td align="center" valign="middle" rowspan="1" colspan="1">218.55</td><td align="center" valign="middle" rowspan="1" colspan="1">172.81</td><td align="center" valign="middle" rowspan="1" colspan="1">24.74%</td><td align="center" valign="middle" rowspan="1" colspan="1">46.39%</td><td align="center" valign="middle" rowspan="1" colspan="1">62.89%</td><td align="center" valign="middle" rowspan="1" colspan="1">65.98%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">8</td><td align="center" valign="middle" rowspan="1" colspan="1">10%</td><td align="center" valign="middle" rowspan="1" colspan="1">23.67</td><td align="center" valign="middle" rowspan="1" colspan="1">230.53</td><td align="center" valign="middle" rowspan="1" colspan="1">175.55</td><td align="center" valign="middle" rowspan="1" colspan="1">27.84%</td><td align="center" valign="middle" rowspan="1" colspan="1">45.36%</td><td align="center" valign="middle" rowspan="1" colspan="1">62.89%</td><td align="center" valign="middle" rowspan="1" colspan="1">68.04%</td></tr><tr><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">8</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">0%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">&#x02212;18.15</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">251.78</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">195.19</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">23.71%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">39.18%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">56.705</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">61.86%</td></tr></tbody></table><table-wrap-foot><fn><p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p></fn></table-wrap-foot></table-wrap><table-wrap id="sensors-16-01958-t003" position="float"><object-id pub-id-type="pii">sensors-16-01958-t003_Table 3</object-id><label>Table 3</label><caption><p>Queuing time estimation errors from 11 August to 18 August.</p></caption><table frame="hsides" rules="groups"><thead><tr><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">Date</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">Mean</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">Std.</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">MAE</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 60 s</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 120 s</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 180 s</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 200 s</th></tr></thead><tbody><tr><td align="center" valign="middle" rowspan="1" colspan="1">11 August</td><td align="center" valign="middle" rowspan="1" colspan="1">30.27</td><td align="center" valign="middle" rowspan="1" colspan="1">177.30</td><td align="center" valign="middle" rowspan="1" colspan="1">137.14</td><td align="center" valign="middle" rowspan="1" colspan="1">32.99%</td><td align="center" valign="middle" rowspan="1" colspan="1">49.48%</td><td align="center" valign="middle" rowspan="1" colspan="1">71.13%</td><td align="center" valign="middle" rowspan="1" colspan="1">76.29%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">12 August</td><td align="center" valign="middle" rowspan="1" colspan="1">54.80</td><td align="center" valign="middle" rowspan="1" colspan="1">167.90</td><td align="center" valign="middle" rowspan="1" colspan="1">147.97</td><td align="center" valign="middle" rowspan="1" colspan="1">19.59%</td><td align="center" valign="middle" rowspan="1" colspan="1">45.36%</td><td align="center" valign="middle" rowspan="1" colspan="1">64.95%</td><td align="center" valign="middle" rowspan="1" colspan="1">71.13%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">13 August</td><td align="center" valign="middle" rowspan="1" colspan="1">16.52</td><td align="center" valign="middle" rowspan="1" colspan="1">189.23</td><td align="center" valign="middle" rowspan="1" colspan="1">143.07</td><td align="center" valign="middle" rowspan="1" colspan="1">28.87%</td><td align="center" valign="middle" rowspan="1" colspan="1">51.55%</td><td align="center" valign="middle" rowspan="1" colspan="1">69.07%</td><td align="center" valign="middle" rowspan="1" colspan="1">74.23%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">14 August</td><td align="center" valign="middle" rowspan="1" colspan="1">44.25</td><td align="center" valign="middle" rowspan="1" colspan="1">175.83</td><td align="center" valign="middle" rowspan="1" colspan="1">147.38</td><td align="center" valign="middle" rowspan="1" colspan="1">23.71%</td><td align="center" valign="middle" rowspan="1" colspan="1">45.36%</td><td align="center" valign="middle" rowspan="1" colspan="1">67.01%</td><td align="center" valign="middle" rowspan="1" colspan="1">70.10%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">15 August</td><td align="center" valign="middle" rowspan="1" colspan="1">&#x02212;66.91</td><td align="center" valign="middle" rowspan="1" colspan="1">247.02</td><td align="center" valign="middle" rowspan="1" colspan="1">197.20</td><td align="center" valign="middle" rowspan="1" colspan="1">21.65%</td><td align="center" valign="middle" rowspan="1" colspan="1">37.11%</td><td align="center" valign="middle" rowspan="1" colspan="1">58.76%</td><td align="center" valign="middle" rowspan="1" colspan="1">61.86%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">16 August</td><td align="center" valign="middle" rowspan="1" colspan="1">40.12</td><td align="center" valign="middle" rowspan="1" colspan="1">186.46</td><td align="center" valign="middle" rowspan="1" colspan="1">142.63</td><td align="center" valign="middle" rowspan="1" colspan="1">24.74%</td><td align="center" valign="middle" rowspan="1" colspan="1">57.73%</td><td align="center" valign="middle" rowspan="1" colspan="1">77.32%</td><td align="center" valign="middle" rowspan="1" colspan="1">78.35%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">17 August</td><td align="center" valign="middle" rowspan="1" colspan="1">16.53</td><td align="center" valign="middle" rowspan="1" colspan="1">163.20</td><td align="center" valign="middle" rowspan="1" colspan="1">133.65</td><td align="center" valign="middle" rowspan="1" colspan="1">23.71%</td><td align="center" valign="middle" rowspan="1" colspan="1">49.48%</td><td align="center" valign="middle" rowspan="1" colspan="1">72.16%</td><td align="center" valign="middle" rowspan="1" colspan="1">77.32%</td></tr><tr><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">18 August</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">58.41</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">143.63</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">123.12</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">27.84%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">60.82%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">73.20%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">79.38%</td></tr></tbody></table><table-wrap-foot><fn><p>Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p></fn></table-wrap-foot></table-wrap><table-wrap id="sensors-16-01958-t004" position="float"><object-id pub-id-type="pii">sensors-16-01958-t004_Table 4</object-id><label>Table 4</label><caption><p>Comparison of the prediction errors from <inline-formula><mml:math id="mm134"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>1</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm135"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>2</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>.</p></caption><table frame="hsides" rules="groups"><thead><tr><th colspan="5" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1">Error Statistics of Prediction Results from Model <inline-formula><mml:math id="mm136"><mml:mrow><mml:mi mathvariant="bold">N</mml:mi><mml:mi mathvariant="bold">A</mml:mi><mml:mi mathvariant="bold">R</mml:mi><mml:mrow><mml:mo mathvariant="bold">(</mml:mo><mml:mn mathvariant="bold">1</mml:mn><mml:mo mathvariant="bold">)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula></th><th colspan="5" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1">Error Statistics of Prediction Results from Model <inline-formula><mml:math id="mm137"><mml:mrow><mml:mi mathvariant="bold">N</mml:mi><mml:mi mathvariant="bold">A</mml:mi><mml:mi mathvariant="bold">R</mml:mi><mml:mrow><mml:mo mathvariant="bold">(</mml:mo><mml:mn mathvariant="bold">2</mml:mn><mml:mo mathvariant="bold">)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>
</th></tr><tr><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">No.</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Mean</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Std.</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">MAE</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 200 s</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">No.</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Mean</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Std.</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">MAE</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 200 s</th></tr></thead><tbody><tr><td align="center" valign="middle" rowspan="1" colspan="1">01</td><td align="center" valign="middle" rowspan="1" colspan="1">46.55</td><td align="center" valign="middle" rowspan="1" colspan="1">195.15</td><td align="center" valign="middle" rowspan="1" colspan="1">177.05</td><td align="center" valign="middle" rowspan="1" colspan="1">60.00%</td><td align="center" valign="middle" rowspan="1" colspan="1">02</td><td align="center" valign="middle" rowspan="1" colspan="1">34.24</td><td align="center" valign="middle" rowspan="1" colspan="1">178.60</td><td align="center" valign="top" rowspan="1" colspan="1">155.15</td><td align="center" valign="top" rowspan="1" colspan="1">66.32%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">03</td><td align="center" valign="middle" rowspan="1" colspan="1">&#x02212;38.89</td><td align="center" valign="middle" rowspan="1" colspan="1">216.97</td><td align="center" valign="middle" rowspan="1" colspan="1">164.80</td><td align="center" valign="middle" rowspan="1" colspan="1">69.47%</td><td align="center" valign="middle" rowspan="1" colspan="1">04</td><td align="center" valign="middle" rowspan="1" colspan="1">&#x02212;35.40</td><td align="center" valign="middle" rowspan="1" colspan="1">203.05</td><td align="center" valign="top" rowspan="1" colspan="1">161.41</td><td align="center" valign="top" rowspan="1" colspan="1">69.47%</td></tr><tr><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">05</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">41.51</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">190.07</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">160.52</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">69.47%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">06</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">27.38</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">163.27</td><td align="center" valign="top" style="border-bottom:solid thin" rowspan="1" colspan="1">132.29</td><td align="center" valign="top" style="border-bottom:solid thin" rowspan="1" colspan="1">77.89%</td></tr></tbody></table><table-wrap-foot><fn><p>Std.: standard deviation, MAE: mean absolute error, AE: absolute error. W<sub>t&#x02212;10</sub>: average queuing time from time t&#x02212;10 min to t; W<sub>t&#x02212;20</sub>: average queuing time from time t&#x02212;20 min to t&#x02212;10 min.</p></fn></table-wrap-foot></table-wrap><table-wrap id="sensors-16-01958-t005" position="float"><object-id pub-id-type="pii">sensors-16-01958-t005_Table 5</object-id><label>Table 5</label><caption><p>Comparison of the prediction errors from <inline-formula><mml:math id="mm143"><mml:mrow><mml:mi>NAR</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mn>2</mml:mn><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula> trained using different data.</p></caption><table frame="hsides" rules="groups"><thead><tr><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">Models</th><th colspan="4" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1">Prediction Error Statistics</th></tr><tr><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Mean</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Std.</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">MAE</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 200 s</th></tr></thead><tbody><tr><td align="left" valign="middle" rowspan="1" colspan="1">Models trained by estimation results of previous 1 day</td><td align="center" valign="middle" rowspan="1" colspan="1">13.19</td><td align="center" valign="middle" rowspan="1" colspan="1">219.23</td><td align="center" valign="middle" rowspan="1" colspan="1">168.50</td><td align="center" valign="middle" rowspan="1" colspan="1">69.47%</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Models trained by estimation results of previous 2 days</td><td align="center" valign="middle" rowspan="1" colspan="1">&#x02212;10.53</td><td align="center" valign="middle" rowspan="1" colspan="1">214.29</td><td align="center" valign="middle" rowspan="1" colspan="1">161.36</td><td align="center" valign="middle" rowspan="1" colspan="1">70.52%</td></tr><tr><td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Models trained by estimation results of previous 3 days</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">&#x02212;14.41</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">213.72</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">160.47</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">70.88%</td></tr></tbody></table><table-wrap-foot><fn><p>Note: The independent variables of these prediction models are <inline-formula><mml:math id="mm144"><mml:mrow><mml:msub><mml:mi mathvariant="normal">W</mml:mi><mml:mrow><mml:mi mathvariant="normal">t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mn>10</mml:mn></mml:mrow></mml:msub></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm145"><mml:mrow><mml:msub><mml:mi mathvariant="normal">W</mml:mi><mml:mrow><mml:mi mathvariant="normal">t</mml:mi><mml:mo>&#x02212;</mml:mo><mml:mn>20</mml:mn></mml:mrow></mml:msub></mml:mrow></mml:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p></fn></table-wrap-foot></table-wrap><table-wrap id="sensors-16-01958-t006" position="float"><object-id pub-id-type="pii">sensors-16-01958-t006_Table 6</object-id><label>Table 6</label><caption><p>Queuing time prediction errors of different models.</p></caption><table frame="hsides" rules="groups"><thead><tr><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">Model</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">Mean</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">Std.</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">MAE</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 60 s</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 120 s</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 180 s</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">AE &#x02264; 200 s</th></tr></thead><tbody><tr><td align="left" valign="middle" rowspan="1" colspan="1"><inline-formula><mml:math id="mm148"><mml:mrow><mml:mstyle mathvariant="bold" mathsize="normal"><mml:mi>N</mml:mi><mml:mi>A</mml:mi><mml:mi>R</mml:mi></mml:mstyle><mml:mrow><mml:mo mathvariant="bold">(</mml:mo><mml:mn mathvariant="bold">2</mml:mn><mml:mo mathvariant="bold">)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>
</td><td align="center" valign="middle" rowspan="1" colspan="1">5.21</td><td align="center" valign="middle" rowspan="1" colspan="1">188.33</td><td align="center" valign="middle" rowspan="1" colspan="1">148.95</td><td align="center" valign="middle" rowspan="1" colspan="1">28.21%</td><td align="center" valign="middle" rowspan="1" colspan="1">50.53%</td><td align="center" valign="middle" rowspan="1" colspan="1">68.42%</td><td align="center" valign="middle" rowspan="1" colspan="1">73.05%</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1"><bold>Holt-Winters</bold></td><td align="center" valign="middle" rowspan="1" colspan="1">19.06</td><td align="center" valign="middle" rowspan="1" colspan="1">206.89</td><td align="center" valign="middle" rowspan="1" colspan="1">162.42</td><td align="center" valign="middle" rowspan="1" colspan="1">23.71%</td><td align="center" valign="middle" rowspan="1" colspan="1">44.74%</td><td align="center" valign="middle" rowspan="1" colspan="1">64.54%</td><td align="center" valign="middle" rowspan="1" colspan="1">67.84%</td></tr><tr><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1"><bold>STL-ARIMA</bold></td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">18.15</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">188.47</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">152.90</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">24.33%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">45.98%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">64.12%</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">69.28%</td></tr></tbody></table></table-wrap></floats-group></article>
