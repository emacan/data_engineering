{
    "pmcid": "PMC5134617",
    "content": {
        "title": "Queuing Time Prediction Using WiFi Positioning Data in an Indoor Scenario",
        "abstract": "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
        "keywords": [
            "indoor queuing time",
            "WiFi positioning",
            "trajectory",
            "mobile",
            "time series analysis"
        ],
        "tables": [
            {
                "table_id": "sensors-16-01958-t001",
                "body": "<thead><tr><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">\n</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Inside</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Outside</th></tr></thead><tbody><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">Inside</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">73.11%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">26.89%</td></tr><tr><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Outside</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">17.21%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">82.79%</td></tr></tbody>",
                "caption": "<p>Results of the topological test near the border of the queue zone.</p>",
                "foots": [],
                "paragraphs": [
                    {
                        "text": "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                        "citations": [
                            "<ref id=\"B46-sensors-16-01958\"><label>46.</label><element-citation publication-type=\"confproc\">\n<person-group person-group-type=\"author\"><name><surname>Hern\u00e1ndez</surname><given-names>N.</given-names></name><name><surname>Alonso</surname><given-names>J.M.</given-names></name><name><surname>Ocana</surname><given-names>M.</given-names></name><name><surname>Marina</surname><given-names>M.K.</given-names></name></person-group>\n<article-title>Impact of Signal Representations on the Performance of Hierarchical WiFi Localization Systems</article-title>\n<source>Proceedings of the 14th International Conference on Computer Aided Systems Theory (EUROCAST)</source>\n<conf-loc>Las Palmas, Spain</conf-loc>\n<conf-date>6\u201315 February 2013</conf-date>\n</element-citation></ref>",
                            "<ref id=\"B47-sensors-16-01958\"><label>47.</label><element-citation publication-type=\"journal\">\n<person-group person-group-type=\"author\"><name><surname>Hern\u00e1ndez</surname><given-names>N.</given-names></name><name><surname>Alonso</surname><given-names>J.M.</given-names></name><name><surname>Oca\u00f1a</surname><given-names>M.</given-names></name></person-group>\n<article-title>Hierarchical approach to enhancing topology-based wifi indoor localization in large environments</article-title>\n<source>J. Mult.-Valued Log. Soft Comput.</source>\n<year>2016</year>\n<volume>26</volume>\n<fpage>221</fpage>\n<lpage>241</lpage>\n</element-citation></ref>"
                        ]
                    }
                ],
                "cells": [
                    {
                        "content": "Inside",
                        "cited_in": [
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>"
                        ]
                    },
                    {
                        "content": "73.11%",
                        "cited_in": [
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>"
                        ]
                    },
                    {
                        "content": "26.89%",
                        "cited_in": []
                    },
                    {
                        "content": "Outside",
                        "cited_in": [
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>"
                        ]
                    },
                    {
                        "content": "17.21%",
                        "cited_in": []
                    },
                    {
                        "content": "82.79%",
                        "cited_in": [
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>"
                        ]
                    }
                ]
            },
            {
                "table_id": "sensors-16-01958-t002",
                "body": "<thead xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><tr><th colspan=\"2\" align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\">Parameter Combinations</th><th colspan=\"7\" align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\">Error Statistics</th></tr><tr><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">\n<inline-formula><ns0:math id=\"mm123\"><ns0:mstyle mathvariant=\"bold\"><ns0:mi mathvariant=\"bold-italic\">k</ns0:mi></ns0:mstyle></ns0:math></inline-formula>\n</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">\n<inline-formula><ns0:math id=\"mm124\"><ns0:mstyle mathvariant=\"bold\"><ns0:mi mathvariant=\"bold-italic\">r</ns0:mi></ns0:mstyle></ns0:math></inline-formula>\n</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Mean</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Std.</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">MAE</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 60 s</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 120 s</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 180 s</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 200 s</th></tr></thead><tbody><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">5</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">30.27</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">177.30</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">144.57</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">32.99%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">49.48%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>71.13%</bold></td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>76.29%</bold></td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">6</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">38.46</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">189.37</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">146.60</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">30.93%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50.52%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.07%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>73.20%</bold></td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">7</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">49.39</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">193.98</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">151.24</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">27.84%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50.52%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.07%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>72.16%</bold></td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">8</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">52.08</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">193.59</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">151.72</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">26.80%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">52.58%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.07%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>73.20%</bold></td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">9</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">61.11</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">195.71</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">157.38</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">25.77%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">52.58%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">65.98%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>71.13%</bold></td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">10</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">63.47</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">193.69</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">162.19</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">22.68%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">47.42%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">62.89%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.07%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">5</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">40%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">30.10</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">196.18</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">148.54</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">34.02%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">52.58%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">67.01%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>72.16%</bold></td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">5</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">30%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">24.36</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">207.67</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">158.72</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">29.90%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">49.48%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">65.98%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>70.10%</bold></td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">5</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">20%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">15.21</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">210.29</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">160.19</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">27.84%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">52.58%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">67.01%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.07%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">5</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">10%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">\u22122.76</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">216.68</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">167.48</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">24.74%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">48.45%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">65.98%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.07%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">5</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">0%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">\u221249.45</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">228.15</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">183.47</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">21.65%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">42.27%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">59.79%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">61.86%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">6</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">40%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">35.54</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">195.21</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">150.07</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">29.90%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">49.48%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">67.01%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>72.16%</bold></td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">6</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">30%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">31.21</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">207.15</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">160.91</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">26.80%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">47.42%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">64.95%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>70.10%</bold></td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">6</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">20%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">20.18</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">209.47</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">161.04</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">26.80%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50.52%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">67.01%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>70.10%</bold></td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">6</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">10%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">1.17</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">215.61</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">166.61</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">24.74%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">49.48%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">65.98%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.07%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">6</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">0%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">\u221240.43</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">230.45</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">183.76</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">21.65%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">41.24%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">58.76%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">60.82%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">7</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">40%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">47.71</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">200.10</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">155.34</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">27.84%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">49.48%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">65.98%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.07%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">7</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">30%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">42.49</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">212.83</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">165.82</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">25.77%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">46.39%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">63.92%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">68.04%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">7</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">20%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">38.49</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">215.77</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">167.98</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">27.84%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">46.39%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">64.95%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">67.01%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">7</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">10%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">21.25</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">229.22</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">174.12</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">25.77%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">47.42%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">63.92%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">68.04%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">7</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">0%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">\u221221.29</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">250.22</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">194.09</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">23.71%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">41.23%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">56.70%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">61.86%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">8</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">40%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">51.51</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">201.10</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">156.96</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">26.80%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50.52%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">67.01%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.07%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">8</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">30%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">46.30</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">214.06</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">167.07</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">25.77%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">47.42%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">64.95%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">67.01%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">8</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">20%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">42.15</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">218.55</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">172.81</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">24.74%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">46.39%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">62.89%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">65.98%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">8</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">10%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">23.67</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">230.53</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">175.55</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">27.84%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">45.36%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">62.89%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">68.04%</td></tr><tr><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">8</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">0%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">\u221218.15</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">251.78</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">195.19</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">23.71%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">39.18%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">56.705</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">61.86%</td></tr></tbody>",
                "caption": "<p>Error statistics of different parameter combinations.</p>",
                "foots": [],
                "paragraphs": [
                    {
                        "text": "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                        "citations": []
                    }
                ],
                "cells": [
                    {
                        "content": "5",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>During the deployment phase of our positioning system, we made some arrangements for the original APs at the T3-C Entrance. Two main elements were concerned, signal coverage and signal overlap. Because the signal transmitting range is approximately 50 m to 100 m, which exceeds the radius of the queue zone, APs deployed near the border of the queue zone can ensure the integrity of signal coverage in the queue zone. Metal baffle plates were placed to reduce signal overlap between the inside and outside of the queue zone, which may cause drift phenomenon and lead to topological errors. Thus, when users leave the queue zone, they receive a weak signal from the APs inside the queue zone due to the metal baffle plates. However, as the distance from the APs in surrounding shops to the queue zone is no more than 30 m, normal Internet service is barely affected.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "50%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>"
                        ]
                    },
                    {
                        "content": "30.27",
                        "cited_in": []
                    },
                    {
                        "content": "177.30",
                        "cited_in": []
                    },
                    {
                        "content": "144.57",
                        "cited_in": []
                    },
                    {
                        "content": "32.99%",
                        "cited_in": []
                    },
                    {
                        "content": "49.48%",
                        "cited_in": []
                    },
                    {
                        "content": "6",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>"
                        ]
                    },
                    {
                        "content": "50%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>"
                        ]
                    },
                    {
                        "content": "38.46",
                        "cited_in": []
                    },
                    {
                        "content": "189.37",
                        "cited_in": []
                    },
                    {
                        "content": "146.60",
                        "cited_in": []
                    },
                    {
                        "content": "30.93%",
                        "cited_in": []
                    },
                    {
                        "content": "50.52%",
                        "cited_in": []
                    },
                    {
                        "content": "69.07%",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>"
                        ]
                    },
                    {
                        "content": "7",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "50%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>"
                        ]
                    },
                    {
                        "content": "49.39",
                        "cited_in": []
                    },
                    {
                        "content": "193.98",
                        "cited_in": []
                    },
                    {
                        "content": "151.24",
                        "cited_in": []
                    },
                    {
                        "content": "27.84%",
                        "cited_in": []
                    },
                    {
                        "content": "50.52%",
                        "cited_in": []
                    },
                    {
                        "content": "69.07%",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>"
                        ]
                    },
                    {
                        "content": "8",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>Queuing time estimation errors from 11 August to 18 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm143\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained using different data.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "50%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>"
                        ]
                    },
                    {
                        "content": "52.08",
                        "cited_in": []
                    },
                    {
                        "content": "193.59",
                        "cited_in": []
                    },
                    {
                        "content": "151.72",
                        "cited_in": []
                    },
                    {
                        "content": "26.80%",
                        "cited_in": []
                    },
                    {
                        "content": "52.58%",
                        "cited_in": []
                    },
                    {
                        "content": "69.07%",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>"
                        ]
                    },
                    {
                        "content": "9",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm143\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained using different data.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "50%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>"
                        ]
                    },
                    {
                        "content": "61.11",
                        "cited_in": []
                    },
                    {
                        "content": "195.71",
                        "cited_in": []
                    },
                    {
                        "content": "157.38",
                        "cited_in": []
                    },
                    {
                        "content": "25.77%",
                        "cited_in": []
                    },
                    {
                        "content": "52.58%",
                        "cited_in": []
                    },
                    {
                        "content": "65.98%",
                        "cited_in": []
                    },
                    {
                        "content": "10",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>During the deployment phase of our positioning system, we made some arrangements for the original APs at the T3-C Entrance. Two main elements were concerned, signal coverage and signal overlap. Because the signal transmitting range is approximately 50 m to 100 m, which exceeds the radius of the queue zone, APs deployed near the border of the queue zone can ensure the integrity of signal coverage in the queue zone. Metal baffle plates were placed to reduce signal overlap between the inside and outside of the queue zone, which may cause drift phenomenon and lead to topological errors. Thus, when users leave the queue zone, they receive a weak signal from the APs inside the queue zone due to the metal baffle plates. However, as the distance from the APs in surrounding shops to the queue zone is no more than 30 m, normal Internet service is barely affected.</p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Std.: standard deviation, MAE: mean absolute error, AE: absolute error. W<sub>t\u221210</sub>: average queuing time from time t\u221210 min to t; W<sub>t\u221220</sub>: average queuing time from time t\u221220 min to t\u221210 min.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "50%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>"
                        ]
                    },
                    {
                        "content": "63.47",
                        "cited_in": []
                    },
                    {
                        "content": "193.69",
                        "cited_in": []
                    },
                    {
                        "content": "162.19",
                        "cited_in": []
                    },
                    {
                        "content": "22.68%",
                        "cited_in": []
                    },
                    {
                        "content": "47.42%",
                        "cited_in": []
                    },
                    {
                        "content": "62.89%",
                        "cited_in": []
                    },
                    {
                        "content": "69.07%",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>"
                        ]
                    },
                    {
                        "content": "5",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>During the deployment phase of our positioning system, we made some arrangements for the original APs at the T3-C Entrance. Two main elements were concerned, signal coverage and signal overlap. Because the signal transmitting range is approximately 50 m to 100 m, which exceeds the radius of the queue zone, APs deployed near the border of the queue zone can ensure the integrity of signal coverage in the queue zone. Metal baffle plates were placed to reduce signal overlap between the inside and outside of the queue zone, which may cause drift phenomenon and lead to topological errors. Thus, when users leave the queue zone, they receive a weak signal from the APs inside the queue zone due to the metal baffle plates. However, as the distance from the APs in surrounding shops to the queue zone is no more than 30 m, normal Internet service is barely affected.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "40%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>"
                        ]
                    },
                    {
                        "content": "30.10",
                        "cited_in": []
                    },
                    {
                        "content": "196.18",
                        "cited_in": []
                    },
                    {
                        "content": "148.54",
                        "cited_in": []
                    },
                    {
                        "content": "34.02%",
                        "cited_in": []
                    },
                    {
                        "content": "52.58%",
                        "cited_in": []
                    },
                    {
                        "content": "67.01%",
                        "cited_in": []
                    },
                    {
                        "content": "5",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>During the deployment phase of our positioning system, we made some arrangements for the original APs at the T3-C Entrance. Two main elements were concerned, signal coverage and signal overlap. Because the signal transmitting range is approximately 50 m to 100 m, which exceeds the radius of the queue zone, APs deployed near the border of the queue zone can ensure the integrity of signal coverage in the queue zone. Metal baffle plates were placed to reduce signal overlap between the inside and outside of the queue zone, which may cause drift phenomenon and lead to topological errors. Thus, when users leave the queue zone, they receive a weak signal from the APs inside the queue zone due to the metal baffle plates. However, as the distance from the APs in surrounding shops to the queue zone is no more than 30 m, normal Internet service is barely affected.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "30%",
                        "cited_in": []
                    },
                    {
                        "content": "24.36",
                        "cited_in": []
                    },
                    {
                        "content": "207.67",
                        "cited_in": []
                    },
                    {
                        "content": "158.72",
                        "cited_in": []
                    },
                    {
                        "content": "29.90%",
                        "cited_in": []
                    },
                    {
                        "content": "49.48%",
                        "cited_in": []
                    },
                    {
                        "content": "65.98%",
                        "cited_in": []
                    },
                    {
                        "content": "5",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>During the deployment phase of our positioning system, we made some arrangements for the original APs at the T3-C Entrance. Two main elements were concerned, signal coverage and signal overlap. Because the signal transmitting range is approximately 50 m to 100 m, which exceeds the radius of the queue zone, APs deployed near the border of the queue zone can ensure the integrity of signal coverage in the queue zone. Metal baffle plates were placed to reduce signal overlap between the inside and outside of the queue zone, which may cause drift phenomenon and lead to topological errors. Thus, when users leave the queue zone, they receive a weak signal from the APs inside the queue zone due to the metal baffle plates. However, as the distance from the APs in surrounding shops to the queue zone is no more than 30 m, normal Internet service is barely affected.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "20%",
                        "cited_in": [
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>"
                        ]
                    },
                    {
                        "content": "15.21",
                        "cited_in": []
                    },
                    {
                        "content": "210.29",
                        "cited_in": []
                    },
                    {
                        "content": "160.19",
                        "cited_in": []
                    },
                    {
                        "content": "27.84%",
                        "cited_in": []
                    },
                    {
                        "content": "52.58%",
                        "cited_in": []
                    },
                    {
                        "content": "67.01%",
                        "cited_in": []
                    },
                    {
                        "content": "69.07%",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>"
                        ]
                    },
                    {
                        "content": "5",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>During the deployment phase of our positioning system, we made some arrangements for the original APs at the T3-C Entrance. Two main elements were concerned, signal coverage and signal overlap. Because the signal transmitting range is approximately 50 m to 100 m, which exceeds the radius of the queue zone, APs deployed near the border of the queue zone can ensure the integrity of signal coverage in the queue zone. Metal baffle plates were placed to reduce signal overlap between the inside and outside of the queue zone, which may cause drift phenomenon and lead to topological errors. Thus, when users leave the queue zone, they receive a weak signal from the APs inside the queue zone due to the metal baffle plates. However, as the distance from the APs in surrounding shops to the queue zone is no more than 30 m, normal Internet service is barely affected.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "10%",
                        "cited_in": []
                    },
                    {
                        "content": "\u22122.76",
                        "cited_in": []
                    },
                    {
                        "content": "216.68",
                        "cited_in": []
                    },
                    {
                        "content": "167.48",
                        "cited_in": []
                    },
                    {
                        "content": "24.74%",
                        "cited_in": []
                    },
                    {
                        "content": "48.45%",
                        "cited_in": []
                    },
                    {
                        "content": "65.98%",
                        "cited_in": []
                    },
                    {
                        "content": "69.07%",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>"
                        ]
                    },
                    {
                        "content": "5",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>During the deployment phase of our positioning system, we made some arrangements for the original APs at the T3-C Entrance. Two main elements were concerned, signal coverage and signal overlap. Because the signal transmitting range is approximately 50 m to 100 m, which exceeds the radius of the queue zone, APs deployed near the border of the queue zone can ensure the integrity of signal coverage in the queue zone. Metal baffle plates were placed to reduce signal overlap between the inside and outside of the queue zone, which may cause drift phenomenon and lead to topological errors. Thus, when users leave the queue zone, they receive a weak signal from the APs inside the queue zone due to the metal baffle plates. However, as the distance from the APs in surrounding shops to the queue zone is no more than 30 m, normal Internet service is barely affected.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "0%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "\u221249.45",
                        "cited_in": []
                    },
                    {
                        "content": "228.15",
                        "cited_in": []
                    },
                    {
                        "content": "183.47",
                        "cited_in": []
                    },
                    {
                        "content": "21.65%",
                        "cited_in": []
                    },
                    {
                        "content": "42.27%",
                        "cited_in": []
                    },
                    {
                        "content": "59.79%",
                        "cited_in": []
                    },
                    {
                        "content": "61.86%",
                        "cited_in": []
                    },
                    {
                        "content": "6",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>"
                        ]
                    },
                    {
                        "content": "40%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>"
                        ]
                    },
                    {
                        "content": "35.54",
                        "cited_in": []
                    },
                    {
                        "content": "195.21",
                        "cited_in": []
                    },
                    {
                        "content": "150.07",
                        "cited_in": []
                    },
                    {
                        "content": "29.90%",
                        "cited_in": []
                    },
                    {
                        "content": "49.48%",
                        "cited_in": []
                    },
                    {
                        "content": "67.01%",
                        "cited_in": []
                    },
                    {
                        "content": "6",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>"
                        ]
                    },
                    {
                        "content": "30%",
                        "cited_in": []
                    },
                    {
                        "content": "31.21",
                        "cited_in": []
                    },
                    {
                        "content": "207.15",
                        "cited_in": []
                    },
                    {
                        "content": "160.91",
                        "cited_in": []
                    },
                    {
                        "content": "26.80%",
                        "cited_in": []
                    },
                    {
                        "content": "47.42%",
                        "cited_in": []
                    },
                    {
                        "content": "64.95%",
                        "cited_in": []
                    },
                    {
                        "content": "6",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>"
                        ]
                    },
                    {
                        "content": "20%",
                        "cited_in": [
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>"
                        ]
                    },
                    {
                        "content": "20.18",
                        "cited_in": []
                    },
                    {
                        "content": "209.47",
                        "cited_in": []
                    },
                    {
                        "content": "161.04",
                        "cited_in": []
                    },
                    {
                        "content": "26.80%",
                        "cited_in": []
                    },
                    {
                        "content": "50.52%",
                        "cited_in": []
                    },
                    {
                        "content": "67.01%",
                        "cited_in": []
                    },
                    {
                        "content": "6",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>"
                        ]
                    },
                    {
                        "content": "10%",
                        "cited_in": []
                    },
                    {
                        "content": "1.17",
                        "cited_in": []
                    },
                    {
                        "content": "215.61",
                        "cited_in": []
                    },
                    {
                        "content": "166.61",
                        "cited_in": []
                    },
                    {
                        "content": "24.74%",
                        "cited_in": []
                    },
                    {
                        "content": "49.48%",
                        "cited_in": []
                    },
                    {
                        "content": "65.98%",
                        "cited_in": []
                    },
                    {
                        "content": "69.07%",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>"
                        ]
                    },
                    {
                        "content": "6",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>"
                        ]
                    },
                    {
                        "content": "0%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "\u221240.43",
                        "cited_in": []
                    },
                    {
                        "content": "230.45",
                        "cited_in": []
                    },
                    {
                        "content": "183.76",
                        "cited_in": []
                    },
                    {
                        "content": "21.65%",
                        "cited_in": []
                    },
                    {
                        "content": "41.24%",
                        "cited_in": []
                    },
                    {
                        "content": "58.76%",
                        "cited_in": []
                    },
                    {
                        "content": "60.82%",
                        "cited_in": []
                    },
                    {
                        "content": "7",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "40%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>"
                        ]
                    },
                    {
                        "content": "47.71",
                        "cited_in": []
                    },
                    {
                        "content": "200.10",
                        "cited_in": []
                    },
                    {
                        "content": "155.34",
                        "cited_in": []
                    },
                    {
                        "content": "27.84%",
                        "cited_in": []
                    },
                    {
                        "content": "49.48%",
                        "cited_in": []
                    },
                    {
                        "content": "65.98%",
                        "cited_in": []
                    },
                    {
                        "content": "69.07%",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>"
                        ]
                    },
                    {
                        "content": "7",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "30%",
                        "cited_in": []
                    },
                    {
                        "content": "42.49",
                        "cited_in": []
                    },
                    {
                        "content": "212.83",
                        "cited_in": []
                    },
                    {
                        "content": "165.82",
                        "cited_in": []
                    },
                    {
                        "content": "25.77%",
                        "cited_in": []
                    },
                    {
                        "content": "46.39%",
                        "cited_in": []
                    },
                    {
                        "content": "63.92%",
                        "cited_in": []
                    },
                    {
                        "content": "68.04%",
                        "cited_in": []
                    },
                    {
                        "content": "7",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "20%",
                        "cited_in": [
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>"
                        ]
                    },
                    {
                        "content": "38.49",
                        "cited_in": []
                    },
                    {
                        "content": "215.77",
                        "cited_in": []
                    },
                    {
                        "content": "167.98",
                        "cited_in": []
                    },
                    {
                        "content": "27.84%",
                        "cited_in": []
                    },
                    {
                        "content": "46.39%",
                        "cited_in": []
                    },
                    {
                        "content": "64.95%",
                        "cited_in": []
                    },
                    {
                        "content": "67.01%",
                        "cited_in": []
                    },
                    {
                        "content": "7",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "10%",
                        "cited_in": []
                    },
                    {
                        "content": "21.25",
                        "cited_in": []
                    },
                    {
                        "content": "229.22",
                        "cited_in": []
                    },
                    {
                        "content": "174.12",
                        "cited_in": []
                    },
                    {
                        "content": "25.77%",
                        "cited_in": []
                    },
                    {
                        "content": "47.42%",
                        "cited_in": []
                    },
                    {
                        "content": "63.92%",
                        "cited_in": []
                    },
                    {
                        "content": "68.04%",
                        "cited_in": []
                    },
                    {
                        "content": "7",
                        "cited_in": [
                            "<p>Queuing is common in urban public places. Automatically monitoring and predicting queuing time can not only help individuals to reduce their wait time and alleviate anxiety but also help managers to allocate resources more efficiently and enhance their ability to address emergencies. This paper proposes a novel method to estimate and predict queuing time in indoor environments based on WiFi positioning data. First, we use a series of parameters to identify the trajectories that can be used as representatives of queuing time. Next, we divide the day into equal time slices and estimate individuals\u2019 average queuing time during specific time slices. Finally, we build a nonstandard autoregressive (NAR) model trained using the previous day\u2019s WiFi estimation results and actual queuing time to predict the queuing time in the upcoming time slice. A case study comparing two other time series analysis models shows that the NAR model has better precision. Random topological errors caused by the drift phenomenon of WiFi positioning technology (locations determined by a WiFi positioning system may drift accidently) and systematic topological errors caused by the positioning system are the main factors that affect the estimation precision. Therefore, we optimize the deployment strategy during the positioning system deployment phase and propose a drift ratio parameter pertaining to the trajectory screening phase to alleviate the impact of topological errors and improve estimates. The WiFi positioning data from an eight-day case study conducted at the T3-C entrance of Beijing Capital International Airport show that the mean absolute estimation error is 147 s, which is approximately 26.92% of the actual queuing time. For predictions using the NAR model, the proportion is approximately 27.49%. The theoretical predictions and the empirical case study indicate that the NAR model is an effective method to estimate and predict queuing time in indoor public areas.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>",
                            "<p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "0%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "\u221221.29",
                        "cited_in": []
                    },
                    {
                        "content": "250.22",
                        "cited_in": []
                    },
                    {
                        "content": "194.09",
                        "cited_in": []
                    },
                    {
                        "content": "23.71%",
                        "cited_in": []
                    },
                    {
                        "content": "41.23%",
                        "cited_in": []
                    },
                    {
                        "content": "56.70%",
                        "cited_in": []
                    },
                    {
                        "content": "61.86%",
                        "cited_in": []
                    },
                    {
                        "content": "8",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>Queuing time estimation errors from 11 August to 18 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm143\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained using different data.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "40%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>"
                        ]
                    },
                    {
                        "content": "51.51",
                        "cited_in": []
                    },
                    {
                        "content": "201.10",
                        "cited_in": []
                    },
                    {
                        "content": "156.96",
                        "cited_in": []
                    },
                    {
                        "content": "26.80%",
                        "cited_in": []
                    },
                    {
                        "content": "50.52%",
                        "cited_in": []
                    },
                    {
                        "content": "67.01%",
                        "cited_in": []
                    },
                    {
                        "content": "69.07%",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>"
                        ]
                    },
                    {
                        "content": "8",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>Queuing time estimation errors from 11 August to 18 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm143\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained using different data.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "30%",
                        "cited_in": []
                    },
                    {
                        "content": "46.30",
                        "cited_in": []
                    },
                    {
                        "content": "214.06",
                        "cited_in": []
                    },
                    {
                        "content": "167.07",
                        "cited_in": []
                    },
                    {
                        "content": "25.77%",
                        "cited_in": []
                    },
                    {
                        "content": "47.42%",
                        "cited_in": []
                    },
                    {
                        "content": "64.95%",
                        "cited_in": []
                    },
                    {
                        "content": "67.01%",
                        "cited_in": []
                    },
                    {
                        "content": "8",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>Queuing time estimation errors from 11 August to 18 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm143\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained using different data.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "20%",
                        "cited_in": [
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>"
                        ]
                    },
                    {
                        "content": "42.15",
                        "cited_in": []
                    },
                    {
                        "content": "218.55",
                        "cited_in": []
                    },
                    {
                        "content": "172.81",
                        "cited_in": []
                    },
                    {
                        "content": "24.74%",
                        "cited_in": []
                    },
                    {
                        "content": "46.39%",
                        "cited_in": []
                    },
                    {
                        "content": "62.89%",
                        "cited_in": []
                    },
                    {
                        "content": "65.98%",
                        "cited_in": []
                    },
                    {
                        "content": "8",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>Queuing time estimation errors from 11 August to 18 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm143\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained using different data.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "10%",
                        "cited_in": []
                    },
                    {
                        "content": "23.67",
                        "cited_in": []
                    },
                    {
                        "content": "230.53",
                        "cited_in": []
                    },
                    {
                        "content": "175.55",
                        "cited_in": []
                    },
                    {
                        "content": "27.84%",
                        "cited_in": []
                    },
                    {
                        "content": "45.36%",
                        "cited_in": []
                    },
                    {
                        "content": "62.89%",
                        "cited_in": []
                    },
                    {
                        "content": "68.04%",
                        "cited_in": []
                    },
                    {
                        "content": "8",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>According to field surveys, it is improbable for a passenger to queue for less than 60 s or for more than 1800 s. Therefore, after the queuing time of all passengers in a time slice has been estimated, we remove the estimated queuing times that fall outside this time range, designating them as incorrect results. Next, we remove abnormal results, which are defined as those more than or less than 1.5 standard deviations from the overall mean. Finally, we calculate the mean value of the remaining results to represent the crowds\u2019 average queuing time in the time slice.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>Queuing time estimation errors from 11 August to 18 August.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm143\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained using different data.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Note: The independent variables of these prediction models are <inline-formula><ns0:math id=\"mm144\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm145\"><ns0:mrow><ns0:msub><ns0:mi mathvariant=\"normal\">W</ns0:mi><ns0:mrow><ns0:mi mathvariant=\"normal\">t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "0%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p>Note: Values exceeding 70% are emphasize using boldface. Std.: standard deviation, MAE: mean absolute error, AE: absolute error.</p>"
                        ]
                    },
                    {
                        "content": "\u221218.15",
                        "cited_in": []
                    },
                    {
                        "content": "251.78",
                        "cited_in": []
                    },
                    {
                        "content": "195.19",
                        "cited_in": []
                    },
                    {
                        "content": "23.71%",
                        "cited_in": []
                    },
                    {
                        "content": "39.18%",
                        "cited_in": []
                    },
                    {
                        "content": "56.705",
                        "cited_in": []
                    },
                    {
                        "content": "61.86%",
                        "cited_in": []
                    }
                ]
            },
            {
                "table_id": "sensors-16-01958-t003",
                "body": "<thead><tr><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Date</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Mean</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Std.</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">MAE</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 60 s</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 120 s</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 180 s</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 200 s</th></tr></thead><tbody><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">11 August</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">30.27</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">177.30</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">137.14</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">32.99%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">49.48%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">71.13%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">76.29%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">12 August</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">54.80</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">167.90</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">147.97</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">19.59%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">45.36%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">64.95%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">71.13%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">13 August</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">16.52</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">189.23</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">143.07</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">28.87%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">51.55%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.07%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">74.23%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">14 August</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">44.25</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">175.83</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">147.38</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">23.71%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">45.36%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">67.01%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">70.10%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">15 August</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">\u221266.91</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">247.02</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">197.20</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">21.65%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">37.11%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">58.76%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">61.86%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">16 August</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">40.12</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">186.46</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">142.63</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">24.74%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">57.73%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">77.32%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">78.35%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">17 August</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">16.53</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">163.20</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">133.65</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">23.71%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">49.48%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">72.16%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">77.32%</td></tr><tr><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">18 August</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">58.41</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">143.63</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">123.12</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">27.84%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">60.82%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">73.20%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">79.38%</td></tr></tbody>",
                "caption": "<p>Queuing time estimation errors from 11 August to 18 August.</p>",
                "foots": [],
                "paragraphs": [
                    {
                        "text": "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                        "citations": []
                    }
                ],
                "cells": [
                    {
                        "content": "11 August",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>Comparison of the estimated and actual queuing times. (<bold>a</bold>) Comparison of the estimated and actual queuing times on 11 August; (<bold>b</bold>) Comparison of the estimated and actual queuing times on 12 August; (<bold>c</bold>) Comparison of the estimated and actual queuing times on 13 August; (<bold>d</bold>) Comparison of the estimated and actual queuing times on 14 August.</p>",
                            "<p>Queuing time estimation errors from 11 August to 18 August.</p>"
                        ]
                    },
                    {
                        "content": "30.27",
                        "cited_in": []
                    },
                    {
                        "content": "177.30",
                        "cited_in": []
                    },
                    {
                        "content": "137.14",
                        "cited_in": []
                    },
                    {
                        "content": "32.99%",
                        "cited_in": []
                    },
                    {
                        "content": "49.48%",
                        "cited_in": []
                    },
                    {
                        "content": "71.13%",
                        "cited_in": []
                    },
                    {
                        "content": "76.29%",
                        "cited_in": []
                    },
                    {
                        "content": "12 August",
                        "cited_in": [
                            "<p>Comparison of the estimated and actual queuing times. (<bold>a</bold>) Comparison of the estimated and actual queuing times on 11 August; (<bold>b</bold>) Comparison of the estimated and actual queuing times on 12 August; (<bold>c</bold>) Comparison of the estimated and actual queuing times on 13 August; (<bold>d</bold>) Comparison of the estimated and actual queuing times on 14 August.</p>"
                        ]
                    },
                    {
                        "content": "54.80",
                        "cited_in": []
                    },
                    {
                        "content": "167.90",
                        "cited_in": []
                    },
                    {
                        "content": "147.97",
                        "cited_in": []
                    },
                    {
                        "content": "19.59%",
                        "cited_in": []
                    },
                    {
                        "content": "45.36%",
                        "cited_in": []
                    },
                    {
                        "content": "64.95%",
                        "cited_in": []
                    },
                    {
                        "content": "71.13%",
                        "cited_in": []
                    },
                    {
                        "content": "13 August",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p>Comparison of the estimated and actual queuing times. (<bold>a</bold>) Comparison of the estimated and actual queuing times on 11 August; (<bold>b</bold>) Comparison of the estimated and actual queuing times on 12 August; (<bold>c</bold>) Comparison of the estimated and actual queuing times on 13 August; (<bold>d</bold>) Comparison of the estimated and actual queuing times on 14 August.</p>"
                        ]
                    },
                    {
                        "content": "16.52",
                        "cited_in": []
                    },
                    {
                        "content": "189.23",
                        "cited_in": []
                    },
                    {
                        "content": "143.07",
                        "cited_in": []
                    },
                    {
                        "content": "28.87%",
                        "cited_in": []
                    },
                    {
                        "content": "51.55%",
                        "cited_in": []
                    },
                    {
                        "content": "69.07%",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>"
                        ]
                    },
                    {
                        "content": "74.23%",
                        "cited_in": []
                    },
                    {
                        "content": "14 August",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>Comparison of the estimated and actual queuing times. (<bold>a</bold>) Comparison of the estimated and actual queuing times on 11 August; (<bold>b</bold>) Comparison of the estimated and actual queuing times on 12 August; (<bold>c</bold>) Comparison of the estimated and actual queuing times on 13 August; (<bold>d</bold>) Comparison of the estimated and actual queuing times on 14 August.</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>"
                        ]
                    },
                    {
                        "content": "44.25",
                        "cited_in": []
                    },
                    {
                        "content": "175.83",
                        "cited_in": []
                    },
                    {
                        "content": "147.38",
                        "cited_in": []
                    },
                    {
                        "content": "23.71%",
                        "cited_in": []
                    },
                    {
                        "content": "45.36%",
                        "cited_in": []
                    },
                    {
                        "content": "67.01%",
                        "cited_in": []
                    },
                    {
                        "content": "70.10%",
                        "cited_in": []
                    },
                    {
                        "content": "15 August",
                        "cited_in": [
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>"
                        ]
                    },
                    {
                        "content": "\u221266.91",
                        "cited_in": []
                    },
                    {
                        "content": "247.02",
                        "cited_in": []
                    },
                    {
                        "content": "197.20",
                        "cited_in": []
                    },
                    {
                        "content": "21.65%",
                        "cited_in": []
                    },
                    {
                        "content": "37.11%",
                        "cited_in": []
                    },
                    {
                        "content": "58.76%",
                        "cited_in": []
                    },
                    {
                        "content": "61.86%",
                        "cited_in": []
                    },
                    {
                        "content": "16 August",
                        "cited_in": [
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>"
                        ]
                    },
                    {
                        "content": "40.12",
                        "cited_in": []
                    },
                    {
                        "content": "186.46",
                        "cited_in": []
                    },
                    {
                        "content": "142.63",
                        "cited_in": []
                    },
                    {
                        "content": "24.74%",
                        "cited_in": []
                    },
                    {
                        "content": "57.73%",
                        "cited_in": []
                    },
                    {
                        "content": "77.32%",
                        "cited_in": []
                    },
                    {
                        "content": "78.35%",
                        "cited_in": []
                    },
                    {
                        "content": "17 August",
                        "cited_in": [
                            "<p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p>"
                        ]
                    },
                    {
                        "content": "16.53",
                        "cited_in": []
                    },
                    {
                        "content": "163.20",
                        "cited_in": []
                    },
                    {
                        "content": "133.65",
                        "cited_in": []
                    },
                    {
                        "content": "23.71%",
                        "cited_in": []
                    },
                    {
                        "content": "49.48%",
                        "cited_in": []
                    },
                    {
                        "content": "72.16%",
                        "cited_in": []
                    },
                    {
                        "content": "77.32%",
                        "cited_in": []
                    },
                    {
                        "content": "18 August",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>For prediction, we proposed the NAR model. The main difference of NAR with respect to general AR model is that NAR is trained using previous observations and the ground truth. To determine the order of the NAR model and the number of days\u2019 results for model training, we conducted a series of experiments. The results showed that an order of 2 and number of previous days of 3 produced sufficiently accurate predictions. Using this model, we predicted the queuing time in T3-C entrance from 14 August to 18 August in real time. The minimum MAE of the predictions came from the NAR model, i.e., 27.49% of the average actual queuing time, which was better than the Holt\u2013Winters and STL-ARIMA models. </p>",
                            "<p>Queuing time estimation errors from 11 August to 18 August.</p>"
                        ]
                    },
                    {
                        "content": "58.41",
                        "cited_in": []
                    },
                    {
                        "content": "143.63",
                        "cited_in": []
                    },
                    {
                        "content": "123.12",
                        "cited_in": []
                    },
                    {
                        "content": "27.84%",
                        "cited_in": []
                    },
                    {
                        "content": "60.82%",
                        "cited_in": []
                    },
                    {
                        "content": "73.20%",
                        "cited_in": []
                    },
                    {
                        "content": "79.38%",
                        "cited_in": []
                    }
                ]
            },
            {
                "table_id": "sensors-16-01958-t004",
                "body": "<thead xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><tr><th colspan=\"5\" align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\">Error Statistics of Prediction Results from Model <inline-formula><ns0:math id=\"mm136\"><ns0:mrow><ns0:mi mathvariant=\"bold\">N</ns0:mi><ns0:mi mathvariant=\"bold\">A</ns0:mi><ns0:mi mathvariant=\"bold\">R</ns0:mi><ns0:mrow><ns0:mo mathvariant=\"bold\">(</ns0:mo><ns0:mn mathvariant=\"bold\">1</ns0:mn><ns0:mo mathvariant=\"bold\">)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula></th><th colspan=\"5\" align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\">Error Statistics of Prediction Results from Model <inline-formula><ns0:math id=\"mm137\"><ns0:mrow><ns0:mi mathvariant=\"bold\">N</ns0:mi><ns0:mi mathvariant=\"bold\">A</ns0:mi><ns0:mi mathvariant=\"bold\">R</ns0:mi><ns0:mrow><ns0:mo mathvariant=\"bold\">(</ns0:mo><ns0:mn mathvariant=\"bold\">2</ns0:mn><ns0:mo mathvariant=\"bold\">)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>\n</th></tr><tr><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">No.</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Mean</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Std.</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">MAE</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 200 s</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">No.</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Mean</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Std.</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">MAE</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 200 s</th></tr></thead><tbody><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">01</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">46.55</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">195.15</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">177.05</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">60.00%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">02</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">34.24</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">178.60</td><td align=\"center\" valign=\"top\" rowspan=\"1\" colspan=\"1\">155.15</td><td align=\"center\" valign=\"top\" rowspan=\"1\" colspan=\"1\">66.32%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">03</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">\u221238.89</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">216.97</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">164.80</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.47%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">04</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">\u221235.40</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">203.05</td><td align=\"center\" valign=\"top\" rowspan=\"1\" colspan=\"1\">161.41</td><td align=\"center\" valign=\"top\" rowspan=\"1\" colspan=\"1\">69.47%</td></tr><tr><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">05</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">41.51</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">190.07</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">160.52</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">69.47%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">06</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">27.38</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">163.27</td><td align=\"center\" valign=\"top\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">132.29</td><td align=\"center\" valign=\"top\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">77.89%</td></tr></tbody>",
                "caption": "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm134\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm135\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>.</p>",
                "foots": [],
                "paragraphs": [
                    {
                        "text": "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                        "citations": []
                    }
                ],
                "cells": [
                    {
                        "content": "01",
                        "cited_in": [
                            "<p>Queuing is a pervasive phenomenon in urban public places, such as supermarkets, restaurants, banks, transportation terminals and amusement parks [<xref rid=\"B1-sensors-16-01958\" ref-type=\"bibr\">1</xref>]. Long-duration queuing reflects the imbalance between the supply and demand of public services, which not only takes up many individuals\u2019 time and leads to negative experiences but also burdens management and reduces the capacity of such services. Furthermore, research has shown that, in addition to the length of waiting time [<xref rid=\"B2-sensors-16-01958\" ref-type=\"bibr\">2</xref>], an important factor affecting individuals\u2019 service satisfaction is whether the waiting time is foreseeable [<xref rid=\"B3-sensors-16-01958\" ref-type=\"bibr\">3</xref>]. The ability to estimate and predict queuing time reduces the queuing time through self-planning and relieve anxiety. Moreover, it promotes the responsible use of public resources and enhances the level of management and public security. Therefore, real-time queuing time measurement and prediction in public places is of significant importance to the community.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Automatic queue-monitoring techniques are fundamental to real-time queuing time measurement and prediction. In this study, we focus on queuing time in indoor public areas. The indoor queuing activity monitoring technologies used in previous studies mainly include video surveillance, radio frequency identification (RFID), Bluetooth, accelerometers, and WiFi (wireless fidelity), which will be briefly introduced below.\n<list list-type=\"bullet\"><list-item><p><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p></list-item><list-item><p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p></list-item><list-item><p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p></list-item><list-item><p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p><p>All of the techniques mentioned above can be used to monitor queuing activity and automatically estimate queuing parameters. However, in practice, these techniques have three main deficiencies: they require extra equipment to track queuing activity, they require active participation, and they may compromise individuals\u2019 privacy.</p></list-item><list-item><p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p></list-item></list></p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><italic>Video Surveillance</italic>. By employing video content analytics to detect the number of people queuing and to estimate the time needed to leave the queue [<xref rid=\"B4-sensors-16-01958\" ref-type=\"bibr\">4</xref>,<xref rid=\"B5-sensors-16-01958\" ref-type=\"bibr\">5</xref>,<xref rid=\"B6-sensors-16-01958\" ref-type=\"bibr\">6</xref>], the queuing time of an individual who is just entering a queue can be estimated [<xref rid=\"B7-sensors-16-01958\" ref-type=\"bibr\">7</xref>] using the following equation:\n<disp-formula id=\"FD1-sensors-16-01958\"><label>(1)</label><ns0:math id=\"mm1\"><ns0:mrow><ns0:msub><ns0:mi>T</ns0:mi><ns0:mrow><ns0:mi>a</ns0:mi><ns0:mi>v</ns0:mi><ns0:mi>g</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2248</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>x</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>x</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u222b</ns0:mo></ns0:mstyle><ns0:mn>0</ns0:mn><ns0:mi>\u221e</ns0:mi></ns0:msubsup><ns0:mi>s</ns0:mi><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mi>d</ns0:mi><ns0:mi>s</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm2\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>N</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>x</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of the number of people in the queue, and <inline-formula><ns0:math id=\"mm3\"><ns0:mrow><ns0:msub><ns0:mi>p</ns0:mi><ns0:mi>s</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>s</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the density function of service time. However, video surveillance may compromise individual privacy, and in large-scale areas where the number of people queuing is large and the queue structure is complex, people counting may have poor accuracy.</p>",
                            "<p><italic>Radio Frequency Identification (RFID)</italic>. By using the protocol for communication between user tags and fixed readers near the counter [<xref rid=\"B8-sensors-16-01958\" ref-type=\"bibr\">8</xref>]), RFID readers can detect the existence of nearby tags. The queuing parameters can be tracked based on the number of detected tags and signal strength [<xref rid=\"B9-sensors-16-01958\" ref-type=\"bibr\">9</xref>]. However, RFID is not a commonly used technology, so extra hardware and individuals\u2019 active participation are required, which may not be accepted by managers and users.</p>",
                            "<p><italic>Bluetooth</italic>. An individual\u2019s position with time stamps can be acquired using Bluetooth localization [<xref rid=\"B10-sensors-16-01958\" ref-type=\"bibr\">10</xref>,<xref rid=\"B11-sensors-16-01958\" ref-type=\"bibr\">11</xref>] with positioning methods such as proximity, trilateration, and fingerprinting. Then, the queue entry and exit times [<xref rid=\"B12-sensors-16-01958\" ref-type=\"bibr\">12</xref>] can be determined based on the relationship between a queue process and a spatial location to estimate the queuing time. Queuing time estimation using Bluetooth is highly accurate. However, special equipment is needed to detect the Bluetooth signals from the users\u2019 mobile devices.</p>",
                            "<p><italic>Accelerometer</italic>. The accelerometers built into mobile devices can be used to record a user\u2019s continuous movement [<xref rid=\"B13-sensors-16-01958\" ref-type=\"bibr\">13</xref>] (based on acceleration parameters). An individual\u2019s movement while queuing is essentially standing-walking-standing [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>], which is reflected by fluctuation in the acceleration curve. Using pattern recognition [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>], the queuing period can be determined based on moving status; thus, queuing time be calculated. However, users must install an application on their mobile device to continuously upload their moving status data.</p>",
                            "<p><italic>WiFi</italic>. WiFi is mainly used for wireless Internet access equipment in public places and private homes. In addition to the communication function, WiFi is widely used in indoor navigation [<xref rid=\"B16-sensors-16-01958\" ref-type=\"bibr\">16</xref>,<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>], targeted advertisements [<xref rid=\"B18-sensors-16-01958\" ref-type=\"bibr\">18</xref>,<xref rid=\"B19-sensors-16-01958\" ref-type=\"bibr\">19</xref>], and behavior analysis [<xref rid=\"B20-sensors-16-01958\" ref-type=\"bibr\">20</xref>,<xref rid=\"B21-sensors-16-01958\" ref-type=\"bibr\">21</xref>]. However, little research has been conducted on the use of WiFi for queuing time monitoring. This technique overcomes the disadvantages of other approaches. In previous studies, users were required to install an app on their mobile device to communicate signal information with the backend. WiFi queuing time monitoring methods can be divided into two categories: (1) signal threshold judgment; and (2) signal feature analysis.</p>",
                            "<p>Each WiFi access point (AP) has a unique broadcast service set identifier (BSSID). An AP generates beacons to broadcast its existence. If a mobile device enters the signal transmitting range of an AP and the signal strength exceeds a certain threshold, it will track the beacons of an AP located in a specific indoor location, and the user is considered to have commenced queuing in this location. When the beacons are no longer being tracked by the mobile device, the user\u2019s queuing process has come to an end. Thus, the queuing time of a user is estimated based on time stamps that indicate when the beacon tracking by the mobile device begins and ends. Because the continuous presence of WiFi sensing beacons consumes energy, location sensing and behavior analysis from other technologies can be used to (de)activate the sensing process [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>]. Although this approach only requires WiFi and a mobile device to monitor queuing time, the spatial resolution is too coarse to accurately determine the entry and exit time of a queue.</p>",
                            "<p>A typical service process represented on the time\u2014received signal strength (RSS) curve can be divided into three phases: the queuing phase, the service phase and the leaving phase. To track queuing, we can deploy a WiFi monitor near the queue start and destination. The WiFi monitor can record the RSS of an individual\u2019s mobile device. From this measurement, the time-signal intensity curve can be derived. RSS usually decreases with increasing distance from a mobile device to the WiFi monitor. As the people queuing move toward the counter, the signal strength increases. During the service period, the signal strength tends to be the strongest and remains stable. When the service is complete and people leave, the signal strength drops off dramatically. Thus, the queuing time and service time can be determined from the signal strength [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>]. The advantage of this method is that it requires only one WiFi monitor to act as an active sensor and the service time can be estimated accurately. However, this method has difficulty recognizing the starting time of a queue, and it requires users to install an app on their mobile devices to improve the frequency of sending data packets to WiFi APs to produce detailed time-signal strength curves.</p>",
                            "<p>For queuing time prediction, time series analysis, queue theory and traffic flow theory are common. Time series uses mathematical methods to extract the trends, seasonality and other features of a data sequence; or to smooth the data sequence by combining information from present and previous observations. Previous studies have shown that exponential smoothing [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B26-sensors-16-01958\" ref-type=\"bibr\">26</xref>,<xref rid=\"B27-sensors-16-01958\" ref-type=\"bibr\">27</xref>], Holt-Winters [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>,<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>,<xref rid=\"B29-sensors-16-01958\" ref-type=\"bibr\">29</xref>] and seasonal trend decomposition based on loess (STL [<xref rid=\"B30-sensors-16-01958\" ref-type=\"bibr\">30</xref>,<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B32-sensors-16-01958\" ref-type=\"bibr\">32</xref>]) can achieve good accuracy for queuing time forecasting. Queue theory [<xref rid=\"B33-sensors-16-01958\" ref-type=\"bibr\">33</xref>,<xref rid=\"B34-sensors-16-01958\" ref-type=\"bibr\">34</xref>] and traffic flow theory [<xref rid=\"B35-sensors-16-01958\" ref-type=\"bibr\">35</xref>,<xref rid=\"B36-sensors-16-01958\" ref-type=\"bibr\">36</xref>] use statistical and physical models to estimate queuing parameters or to model the traffic flow process and predict future queuing parameters. However, they are not applicable in this work, because parameters such as speed, density, and flow in traffic flow theory and queue discipline, arrival rate, and service rate in queue theory are required to model the queuing process, while the collected data are spatial location data with time stamps [<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>], from which these parameters are difficult to obtain.</p>",
                            "<p>The queuing time prediction method in this research includes two main parts, i.e., hardware deployment and the algorithm. In the hardware deployment part, in consideration of the high maneuverability and portability, we use a trilateration method instead of fingerprinting (fingerprinting has relatively high positioning accuracy but it is hard to establish fingerprint databases in large or crowded public places and it is difficult to upgrade the system [<xref rid=\"B37-sensors-16-01958\" ref-type=\"bibr\">37</xref>]). In order that the spatial topology relation between spatial locations and a queue zone can be used for queuing time determination, we installed metal baffle plates for the border APs to improve the topological correctness. To identify relatively reliable samples as representatives to estimate queuing time, in the algorithmic part, we set four parameters in the estimation model. As our estimation results did not show obvious periodic features and consistent trends, we used a nonstandard autoregressive (NAR) model without considering the seasonality for prediction. To enable comparison with methods considering seasonality and trends in previous queuing time prediction studies, two other models in time series analysis (i.e., Holt-Winters and STL-ARIMA) are also tested.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In addition to communication functions [<xref rid=\"B38-sensors-16-01958\" ref-type=\"bibr\">38</xref>], WiFi is used as a location service based on indoor positioning techniques, which compensates for the shortcomings of GPS positioning, whose signal is too weak to be received indoors. There are three broad classes of location techniques that are used for WiFi positioning\u2014triangulation, fingerprinting and proximity [<xref rid=\"B39-sensors-16-01958\" ref-type=\"bibr\">39</xref>,<xref rid=\"B40-sensors-16-01958\" ref-type=\"bibr\">40</xref>]. In this paper, we use trilateration, which is a triangulation technique, to track individuals\u2019 locations. The key of this approach lies in the measurement of distances between target mobile devices and APs using radio waves. The radio wave propagation model is given as follows [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>,<xref rid=\"B41-sensors-16-01958\" ref-type=\"bibr\">41</xref>]):\n<disp-formula id=\"FD2-sensors-16-01958\"><label>(2)</label><ns0:math id=\"mm4\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn><ns0:mi>\u03b1</ns0:mi><ns0:mi mathvariant=\"italic\">log</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mfrac bevelled=\"true\"><ns0:mi>d</ns0:mi><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:mfrac></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mi>\u03be</ns0:mi></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm5\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>r</ns0:mi></ns0:msub><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the signal strength received by the mobile device at distance <inline-formula><ns0:math id=\"mm6\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> from the AP, <inline-formula><ns0:math id=\"mm7\"><ns0:mrow><ns0:msub><ns0:mi>d</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a known distance from the AP, <inline-formula><ns0:math id=\"mm8\"><ns0:mi>\u03b1</ns0:mi></ns0:math></inline-formula> is the propagation loss coefficient, and <inline-formula><ns0:math id=\"mm9\"><ns0:mi>\u03be</ns0:mi></ns0:math></inline-formula> is a random variable that is unrelated to the propagation distance.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f001\">Figure 1</xref> shows the location method of trilateration. The locations of the APs are represented by points A, B and C, of which the coordinates are measured in advance. The distances from the location of the target device (O) to the APs are represented by <inline-formula><ns0:math id=\"mm10\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm11\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>2</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm12\"><ns0:mrow><ns0:msub><ns0:mi>r</ns0:mi><ns0:mn>3</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>, which can be measured using the propagation model (model 1). Then, the coordinates of the target device are calculated using the least squares algorithm [<xref rid=\"B42-sensors-16-01958\" ref-type=\"bibr\">42</xref>].</p>",
                            "<p>To guarantee topological correctness, as mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, during the hardware deployment phase, three principles must be followed. For the first principle, according to reference [<xref rid=\"B43-sensors-16-01958\" ref-type=\"bibr\">43</xref>], the signal strength error is greater when mobile devices are too far from the APs, resulting in increased positioning error. The positioning error near the inside border of a queue zone is the main factor that affects topological correctness. Therefore, a feasible solution is to ensure that some of the APs inside the queue zone are deployed close to and surrounding the border. For the second principle, as the location from our positioning algorithm is calculated by at least three APs that provide the strongest signal, we adjust the direction of the antennas and place metal baffle plates for the border APs to reduce the signal strength on the outside of the queue zone. Thus, when a user steps outside the queue zone, his (her) device will receive weak signal from the border APs and his (her) position is more likely to be located outside the queue zone. For the third principle, a user near the inside border of a queue zone must remain for a relatively long time to wait his (her) turn rather than stay near the outside border while rapidly leaving. To avoid long-term topological error (inside-outside error in <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), a user\u2019s device should receive a relatively low strength signal from the outside APs than the inside APs while waiting inside the queue zone. Therefore, the outside APs must not be too close to the border of the queue zone [<xref rid=\"B17-sensors-16-01958\" ref-type=\"bibr\">17</xref>] and have relatively low signal strength.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To estimate a crowd\u2019s average queuing time, the optimal solution is to determine the queuing time of each individual. However, the time intervals of the trajectory points from our passive positioning system range from five seconds to several minutes, which results in incomplete queuing process records. In addition, the sample errors are not negligible. Therefore, sample reliability cannot be neglected, that is, more samples may not produce more accurate results. Therefore, similar to using a buoy to estimate the flow velocity of a river reach, a feasible solution is to identify relatively reliable samples acting as representatives [<xref rid=\"B14-sensors-16-01958\" ref-type=\"bibr\">14</xref>] for queuing time estimation. To achieve this goal, when determining an individual\u2019s queuing time, four parameters (<inline-formula><ns0:math id=\"mm13\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm14\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm15\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm16\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) of the trajectory are used. In practical applications, these parameters need to be tuned according to the site environment and hardware deployment. The estimation process is divided into three steps: (1) queuing process recognition; (2) parameter setting and queuing time determination; and (3) queuing time estimation.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Autoregressive (AR) is a frequently used time series prediction model that assumes the present observation has a linear relation with previous observations. Generally, the notation <inline-formula><ns0:math id=\"mm52\"><ns0:mrow><ns0:mi>AR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> denotes an autoregressive model of order <inline-formula><ns0:math id=\"mm53\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>. In this study, we use a nonstandard AR model, denoting as <inline-formula><ns0:math id=\"mm54\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>:\n<disp-formula id=\"FD3-sensors-16-01958\"><label>(3)</label><ns0:math id=\"mm55\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>c</ns0:mi><ns0:mo>+</ns0:mo><ns0:munderover><ns0:mstyle mathsize=\"140%\" displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>p</ns0:mi></ns0:munderover><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>i</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm56\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the prediction of the actual queuing time at time slice <inline-formula><ns0:math id=\"mm57\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm58\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm59\"><ns0:mi>c</ns0:mi></ns0:math></inline-formula> is a constant, <inline-formula><ns0:math id=\"mm60\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regression coefficient and <inline-formula><ns0:math id=\"mm61\"><ns0:mrow><ns0:msub><ns0:mi>\u03b5</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the random error. In contrast to the general AR model, the parameters of NAR are trained using the previous observations (WiFi estimations) and the present ground truth (security system records).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Let <inline-formula><ns0:math id=\"mm62\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the sequence of the crowds\u2019 average queuing time based on the WiFi estimation from time <inline-formula><ns0:math id=\"mm63\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm64\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, with a seasonal variation of length <inline-formula><ns0:math id=\"mm65\"><ns0:mi>L</ns0:mi></ns0:math></inline-formula>. The additive Holt-Winters prediction method comprises three equations. <inline-formula><ns0:math id=\"mm66\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of smoothed values contributing as level, <inline-formula><ns0:math id=\"mm67\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> represents the sequence of the linear trend, <inline-formula><ns0:math id=\"mm68\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> is the sequence of the seasonal correction factors, and <inline-formula><ns0:math id=\"mm69\"><ns0:mo>\u2202</ns0:mo></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm70\"><ns0:mi>\u03b2</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm71\"><ns0:mi>\u03b3</ns0:mi></ns0:math></inline-formula> are the smoothing parameters. Then, the components of the additive Holt-Winters are:\n<disp-formula id=\"FD4-sensors-16-01958\"><label>(4)</label><ns0:math id=\"mm72\"><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b1</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b1</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD5-sensors-16-01958\"><label>(5)</label><ns0:math id=\"mm73\"><ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b2</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b2</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD6-sensors-16-01958\"><label>(6)</label><ns0:math id=\"mm74\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>\u03b3</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mi>\u03b3</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\n<disp-formula id=\"FD7-sensors-16-01958\"><label>(7)</label><ns0:math id=\"mm75\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:msub><ns0:mi>b</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>L</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere Equation (4) is a weighted average of the seasonally adjusted estimation (<inline-formula><ns0:math id=\"mm76\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the non-seasonal forecast <inline-formula><ns0:math id=\"mm77\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> for time slice <inline-formula><ns0:math id=\"mm78\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm79\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Equation (5) is the trend which is actually Holt\u2019s linear method [<xref rid=\"B28-sensors-16-01958\" ref-type=\"bibr\">28</xref>]. Equation (6) is a weighted average between the current seasonal index (<inline-formula><ns0:math id=\"mm80\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>s</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2212</ns0:mo><ns0:msub><ns0:mi>b</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and the seasonal index of the same time slice of the previous season (<inline-formula><ns0:math id=\"mm81\"><ns0:mrow><ns0:msub><ns0:mi>c</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mi>L</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Equation (7) is the prediction function, where <inline-formula><ns0:math id=\"mm82\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> is the step length of the prediction, <inline-formula><ns0:math id=\"mm83\"><ns0:mrow><ns0:msub><ns0:mi>P</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the queuing time prediction of time slice <inline-formula><ns0:math id=\"mm84\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mi>m</ns0:mi><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm85\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm86\"><ns0:mrow><ns0:msubsup><ns0:mi>m</ns0:mi><ns0:mi>L</ns0:mi><ns0:mo>*</ns0:mo></ns0:msubsup><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>m</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>\u00a0</ns0:mo><ns0:mi>m</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>d</ns0:mi><ns0:mo>\u00a0</ns0:mo><ns0:mi>L</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, which ensures the seasonal factors for prediction come from the most recent period.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Seasonal trend decomposition (STL) is a statistical method that deconstructs a time series into several components, namely, trend (<inline-formula><ns0:math id=\"mm87\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>), seasonality (<inline-formula><ns0:math id=\"mm88\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>) and remainder (<inline-formula><ns0:math id=\"mm89\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). STL is used to decompose time series, while Loess is used to estimate nonlinear relationship. The additive STL model adopted in this work is as follows:\n<disp-formula id=\"FD8-sensors-16-01958\"><label>(8)</label><ns0:math id=\"mm90\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm91\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is a sequence of WiFi-based average queuing time estimations, <inline-formula><ns0:math id=\"mm92\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the long-term increasing or decreasing trend in the sequence, <inline-formula><ns0:math id=\"mm93\"><ns0:mrow><ns0:msub><ns0:mi>S</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the regular fluctuation of seasonal factors and seasonality is fixed and has known period for a given sequence of periodic features. <inline-formula><ns0:math id=\"mm94\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is the remainder of the sequence after components <inline-formula><ns0:math id=\"mm95\"><ns0:mrow><ns0:mi>T</ns0:mi><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm96\"><ns0:mrow><ns0:msub><ns0:mi>R</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are removed and can be seen as noise.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The STL is a filtering process for a time series. The ARIMA model is used for prediction based on reconstructed a sequence from STL [<xref rid=\"B31-sensors-16-01958\" ref-type=\"bibr\">31</xref>,<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] (i.e., STL-ARIMA prediction model). In the ARIMA model, the variation of the observation sequence over time is regarded as random, and a statistical model is constructed to model the features of the sequence based on processes, such as AR and Moving Average (MA). The notation of the model is <inline-formula><ns0:math id=\"mm97\"><ns0:mrow><ns0:mi>ARIMA</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>d</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>q</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, where <inline-formula><ns0:math id=\"mm98\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula> is the order of the autoregressive, <inline-formula><ns0:math id=\"mm99\"><ns0:mi>d</ns0:mi></ns0:math></inline-formula> is the number of differences required for stationarity, and <inline-formula><ns0:math id=\"mm100\"><ns0:mi>q</ns0:mi></ns0:math></inline-formula> is the order of the moving-average process. Readers can refer to Box and Jenkins et al. [<xref rid=\"B44-sensors-16-01958\" ref-type=\"bibr\">44</xref>] for more details.</p>",
                            "<p>Queuing time determination and estimation based on WiFi positioning data is the basis of further prediction. Therefore, in this section, we only validate the effectiveness of hardware deployment principles and the accuracy of a crowd\u2019s average queuing time estimation based on WiFi positioning data. The queuing time prediction by time series models mentioned in <xref ref-type=\"sec\" rid=\"sec2-sensors-16-01958\">Section 2</xref> is presented in the case study section.</p>",
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p>As systematic topological errors of WiFi positioning systems have a high possibility of occurrence near the border of a queue zone, we tested six points inside and three points outside the queue zone, all near the border. The results of this test are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t001\">Table 1</xref>; Inside-Inside means that both the test point and the positioning location were inside the queue zone; Inside-Outside means that the test point was inside the queue zone and the positioning location was outside the queue zone. We observed that 73.11% of the positioning locations had a correct topological relation when the point was inside the queue zone, and 82.79% were correct when the point was outside the queue zone. We deem these results to be sufficiently accurate for queuing time estimation and prediction [<xref rid=\"B46-sensors-16-01958\" ref-type=\"bibr\">46</xref>,<xref rid=\"B47-sensors-16-01958\" ref-type=\"bibr\">47</xref>].</p>",
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p>As positioning accuracy depends on the field environment, for the case study, we again chose the T3-C entrance of Beijing Capital International Airport to validate our methodology. Beijing Capital International Airport is the largest airport in China and the second busiest in the world, with a passenger throughput that exceeded 89 million person-time (overall number of people including reoccurring ones) in 2015. In large-scale public areas like this, queuing time affects the management and service quality. Our system can automatically detect and predict individuals\u2019 queuing times, which is helpful for improving traffic efficiency, optimizing management, promoting service quality and improving the capability to address emergencies.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The main goal of this study was to develop a method to predict queuing time based on WiFi positioning data in indoor scenario. The results of a case study at Beijing Capital International Airport show that the method we proposed is feasible for real-time queuing time prediction. In contrast to WiFi-based queuing monitoring systems such as LineKing [<xref rid=\"B15-sensors-16-01958\" ref-type=\"bibr\">15</xref>,<xref rid=\"B22-sensors-16-01958\" ref-type=\"bibr\">22</xref>] and Wang\u2019s method [<xref rid=\"B23-sensors-16-01958\" ref-type=\"bibr\">23</xref>,<xref rid=\"B24-sensors-16-01958\" ref-type=\"bibr\">24</xref>,<xref rid=\"B25-sensors-16-01958\" ref-type=\"bibr\">25</xref>], and systems based on other sensors mentioned in <xref ref-type=\"sec\" rid=\"sec1-sensors-16-01958\">Section 1</xref>, our method does not require users to install specific apps on their mobile devices, which means it is a completely passive queue monitoring method and it can be easily extended to new applications. In addition, in the case study, the estimation and prediction error of our method were approximately 26.92% and 27.49%, respectively, while the estimation error of LineKing is approximately 24%\u201336% in a coffee shop. Wang\u2019s method had an error of approximately 10 seconds. However, because Wang et al. only used one WiFi monitor, it is difficult for their method to address long or disordered queues using a signal strength threshold parameter to distinguish the starting time of a queuing process. As our method was only tested in a security region with strict limitation and because it is scenario-dependent, the comparisons can only be viewed as a reference. To compare the prediction accuracy at different time periods, we aggregated the time slices of a day into 3 slices (i.e., 5:00 a.m.\u201312:00 p.m., 12:00 p.m.\u20135:00 p.m. and 5:00 p.m.\u20139:00 p.m.). The MAEs of the prediction results were 36.12% from 5:00 a.m. to 12:00 p.m., 18.49% from 12:00 p.m. to 5:00 p.m. and 28.68% from 5:00 p.m. to 9:00 p.m. Because of the traffic rush in the morning, the high variation in traffic may lead to large errors in the period 5:00 a.m.\u201312:00 p.m. In addition, the environmental factors on the morning of 15 August, which will be explained in the following section, affected the accuracy of this period. Comparison of the prediction results from different models indicates that our NAR model has better accuracy than the other two models. There are two possible reasons for this phenomenon: (1) the NAR model can be trained using historical ground truth, while the other two models only consider the observations; and (2) the Holt-Winters and STL-ARIMA models are good at addressing sequences with regular cycles, while the queuing time pattern in our research varies by days, especially between weekdays and weekends.</p>",
                            "<p>There are two types of factors affecting the accuracy of the results: environmental factors and systematic factors. Environmental factors affect the normal queue and security check, and often lead to outliers, for example, the large errors in the prediction results, especially 5:00 a.m.\u20138:00 a.m., 15 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and 7:00 a.m.\u20138:00 a.m., 16 August in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c. Historical weather records indicated that, on 15 August, 22 out of 34 municipalities and capital cities experienced rain, which may have stranded passengers due to flight delays and led to the error from 5:00 a.m. to 8:00 a.m. in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b. Through discussions with the airport staff, we concluded that other environmental factors that can generate outliers include sudden traffic variation, security strategy adjustment (for example, security gate number change) and large traffic flow along the outside of the queue zone near the boundary. Because we do not have additional information about this time period, we cannot give the exact reason. Nevertheless, the existence of outliers is due to one or more of the above reasons. System factors include topological accuracy, the packet delivery frequency of mobile devices, and lags in the models.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>",
                            "<p>For unknown reasons, the AP equipment may power off, disconnect from the Internet or break down. Furthermore, different APs of the same brand and version may have different signal propagation characteristics, and the signal of an individual AP may be unstable over time. These factors may affect the topological correctness and thus the estimation accuracy, for example, the jump points in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>c,d.</p>",
                            "<p>As all models in our research use previous queuing estimations for queuing time prediction, the predictions lag behind the actual queuing time, especially in moments when the queuing time increases or decreases sharply, which may occur when there is large variation in the number of people queuing over a short time interval, for example, the sequence near the end in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c,d. We observe this phenomenon in the estimation results of this study. Although our regression model corrects some lag deviation, it is not eliminated completely. Moreover, correlations between previous estimation results and future queuing times may vary in time, which may affect the reliability of the queuing time predictions.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">In this paper, we presented an overview of previous queuing time monitoring techniques and solutions, and proposed a novel methodological framework to estimate and predict queuing time based on WiFi positioning data in indoor scenarios. Our method is composed of hardware deployment and the algorithm. In the hardware deployment part, we deployed APs on the border of a queue zone and installed metal baffle plates for the border APs to improve the topological correctness. In the algorithmic part, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3-sensors-16-01958\">Section 2.3</xref>, to reduce the error caused by the \u201cdrift phenomenon\u201d of WiFi positioning and the impact of trajectory point sparsity, we proposed four parameters (<inline-formula><ns0:math id=\"mm151\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm152\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm153\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm154\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) to identify relatively reliable samples as representatives of queuing time in specific time slices. In different application scenarios, these parameters must be calibrated before the method is used for queuing time estimation and prediction. In the case study at the T3-C entrance of Beijing Capital International Airport, although the number and location of APs were restricted by limited internet access ports and deployment locations, the minimum MAE of the estimation results from 11 August to 18 August was 147 s, which is 26.92% of the average actual queuing time. In contrast with the results of previous WiFi-based queuing time estimation methods relying on mobile apps, the accuracy of our simple but carefully designed method is within the acceptable range.</p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>"
                        ]
                    },
                    {
                        "content": "46.55",
                        "cited_in": []
                    },
                    {
                        "content": "195.15",
                        "cited_in": []
                    },
                    {
                        "content": "177.05",
                        "cited_in": []
                    },
                    {
                        "content": "60.00%",
                        "cited_in": []
                    },
                    {
                        "content": "02",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">The starting and leaving times of a queuing process are the keys to an individual\u2019s queuing time determination. Topological relations between a queue zone and points on trajectories with time stamps can help to discern the starting and leaving points of a queue process to estimate the queuing time. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref> shows the queuing determination process of individuals. As mentioned above, during this process, four parameters (<inline-formula><ns0:math id=\"mm17\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm18\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>, <inline-formula><ns0:math id=\"mm19\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>, and <inline-formula><ns0:math id=\"mm20\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are used to discern relatively reliable trajectories.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Under the condition that there is no room for hardware deployment improvement, the algorithm plays a key role in the queuing time determination. As depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f002\">Figure 2</xref>, we first select a MAC occurring in a time slice and extract the trajectory of this MAC. Through topological relation judgment, we can identify the entrance and exit points of the queue. Next, as mentioned in <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>, we judge whether the trajectory is eligible to be used for estimation according to the parameters from calibration. To ensure the integrity of the trajectory, <inline-formula><ns0:math id=\"mm111\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm112\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> are set to 2, which means at least 2 (<inline-formula><ns0:math id=\"mm113\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula>) consecutive points are detected immediately before entering the queue zone, and at least 2 (<inline-formula><ns0:math id=\"mm114\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula>) more points are detected after leaving the queue zone. The other two parameters (<inline-formula><ns0:math id=\"mm115\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm116\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) are the main algorithmic factors that can be used to improve the estimation results. The calibration records of <inline-formula><ns0:math id=\"mm117\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm118\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula> are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t002\">Table 2</xref>, from which we can conclude that the best combination of these parameters is <inline-formula><ns0:math id=\"mm119\"><ns0:mrow><ns0:mi>k</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>5</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm120\"><ns0:mrow><ns0:mi>r</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>50</ns0:mn><ns0:mo>%</ns0:mo></ns0:mrow></ns0:math></inline-formula>; that is, at least 5 (<inline-formula><ns0:math id=\"mm121\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula>) points detected from the entrance to the exit point, and the proportion of points drifting out of the queue zone is less than 50% (<inline-formula><ns0:math id=\"mm122\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) from entrance to the exit point (the mean drift ratio of the positioning data used for estimation from 11 August to 18 August is less than 5% in the subsequent statistics). Finally, if the exit time of this queuing process occurs within the same time slice (the exit time of a MAC may not be in the same time slice, although it occurs in the time slice), then the passenger queuing time will be estimated from the time stamps of the trajectory.</p>"
                        ]
                    },
                    {
                        "content": "34.24",
                        "cited_in": []
                    },
                    {
                        "content": "178.60",
                        "cited_in": []
                    },
                    {
                        "content": "155.15",
                        "cited_in": []
                    },
                    {
                        "content": "66.32%",
                        "cited_in": []
                    },
                    {
                        "content": "03",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref> shows a queuing process in the time domain. The first point when an individual enters the queue zone is regarded as the starting point (point at time <inline-formula><ns0:math id=\"mm21\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula>), and the last point before leaving the queue zone is the leaving point (point at time <inline-formula><ns0:math id=\"mm22\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). The locations of the points at times <inline-formula><ns0:math id=\"mm23\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm24\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are taken as the starting and leaving points because all points before time <inline-formula><ns0:math id=\"mm25\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and after time <inline-formula><ns0:math id=\"mm26\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are outside the queue zone. These adjacent points indicate that the chance that they are drift points from the inside of queue zone is small. The frequency of packet delivery is affected by the WiFi module status of the mobile devices (e.g., \u201con\u201d but not connected to WiFi APs, and \u201cconnected\u201d but not using the network traffic). This is especially the case when the WiFi module is switched on but not connected to the WiFi APs, the device is only used intermittently, or the device has not been used during the queuing process. In these cases, the packet delivery frequency may be low and irregular. Thus, the points on the trajectory will be sparse and uneven. Therefore, the parameters defining the absolute number of points in each part of the trajectory are set to ensure the trajectory is eligible for analysis, i.e., at least <inline-formula><ns0:math id=\"mm27\"><ns0:mi>m</ns0:mi></ns0:math></inline-formula> points before entering the queue zone, <inline-formula><ns0:math id=\"mm28\"><ns0:mi>n</ns0:mi></ns0:math></inline-formula> points after leaving the queue zone and <inline-formula><ns0:math id=\"mm29\"><ns0:mi>k</ns0:mi></ns0:math></inline-formula> points from <inline-formula><ns0:math id=\"mm30\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm31\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> (including points at times <inline-formula><ns0:math id=\"mm32\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm33\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula>). Moreover, the locations determined by WiFi positioning may drift accidently (\u201cdrift phenomenon\u201d or \u201cdrift weakness\u201d hereafter, e.g., an individual inside a queue zone having positioning location outside the queue zone), which may lead to topological errors. To alleviate the impact of inside-outside drift phenomena (refer to <xref ref-type=\"sec\" rid=\"sec3dot2-sensors-16-01958\">Section 3.2</xref>), which causes obvious estimation inaccuracies, a parameter called the drift ratio (<inline-formula><ns0:math id=\"mm34\"><ns0:mi>r</ns0:mi></ns0:math></inline-formula>) is required. The trajectory can be used to estimate the queuing time only if the proportion of drift points (empty circles between <inline-formula><ns0:math id=\"mm35\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm36\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f003\">Figure 3</xref>) between time stamps <inline-formula><ns0:math id=\"mm37\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm38\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> is less than the threshold. For available trajectories, we approximate the starting and leaving times of a queuing process as <inline-formula><ns0:math id=\"mm39\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm40\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>, respectively, and the total queuing time as <inline-formula><ns0:math id=\"mm41\"><ns0:mrow><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>\u2212</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>0</ns0:mn></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mn>1</ns0:mn></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>The statistical characteristics of the estimation errors are listed in <xref ref-type=\"table\" rid=\"sensors-16-01958-t003\">Table 3</xref>. The mean queuing time from 11 August to 18 August was 546 s, while the estimated mean queuing time was 570 s. The mean absolute error (MAE) of the estimation results was 147 s, approximately 26.92% of the actual queuing time. On average, 25.39% of the absolute errors (AEs) were less than 60 s, 49.61% were less than 120 s, 69.20% were less than 180 s and 73.58% were less than 200 s.</p>"
                        ]
                    },
                    {
                        "content": "\u221238.89",
                        "cited_in": []
                    },
                    {
                        "content": "216.97",
                        "cited_in": []
                    },
                    {
                        "content": "164.80",
                        "cited_in": []
                    },
                    {
                        "content": "69.47%",
                        "cited_in": []
                    },
                    {
                        "content": "04",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">To reflect the queuing time variation over time, one day is divided into equal time slices. Then, individuals\u2019 queuing times are divided into specific slices. As shown in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f004\">Figure 4</xref>, the time of a day is sliced by <inline-formula><ns0:math id=\"mm42\"><ns0:mrow><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm43\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>=</ns0:mo><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mi>n</ns0:mi></ns0:msub><ns0:mo>+</ns0:mo><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>n</ns0:mi><ns0:mo>+</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow><ns0:mo>/</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> (see <xref ref-type=\"sec\" rid=\"sec2dot3dot2-sensors-16-01958\">Section 2.3.2</xref>) be the time when an individual leaves the queue zone; if <inline-formula><ns0:math id=\"mm44\"><ns0:mrow><ns0:msub><ns0:mi>t</ns0:mi><ns0:mrow><ns0:mi>o</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>t</ns0:mi></ns0:mrow></ns0:msub><ns0:mo>\u2208</ns0:mo><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>,</ns0:mo><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the queuing time of the individual is aggregated to slice <inline-formula><ns0:math id=\"mm45\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm46\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>. Let <inline-formula><ns0:math id=\"mm47\"><ns0:mrow><ns0:mrow><ns0:mo>{</ns0:mo><ns0:mrow><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup></ns0:mrow><ns0:mo>}</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> be the set of individuals\u2019 queuing times determined by WiFi positioning data acting as representatives in time slice <inline-formula><ns0:math id=\"mm48\"><ns0:mi>t</ns0:mi></ns0:math></inline-formula> to <inline-formula><ns0:math id=\"mm49\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>+</ns0:mo><ns0:mo>\u0394</ns0:mo><ns0:mi>t</ns0:mi></ns0:mrow></ns0:math></inline-formula>, then <inline-formula><ns0:math id=\"mm50\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mi>t</ns0:mi></ns0:msub><ns0:mo>=</ns0:mo><ns0:munderover><ns0:mstyle displaystyle=\"true\"><ns0:mo>\u2211</ns0:mo></ns0:mstyle><ns0:mrow><ns0:mi>i</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow><ns0:mi>N</ns0:mi></ns0:munderover><ns0:msubsup><ns0:mi>w</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi></ns0:msubsup><ns0:mo>/</ns0:mo><ns0:mi>N</ns0:mi></ns0:mrow></ns0:math></inline-formula> (where <inline-formula><ns0:math id=\"mm51\"><ns0:mi>N</ns0:mi></ns0:math></inline-formula> is the number of individuals) is the WiFi-based average queuing time estimation of the slice.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Based on the estimation results, we can predict future queuing time using the three prediction models presented in <xref ref-type=\"sec\" rid=\"sec2dot4-sensors-16-01958\">Section 2.4</xref>. For <inline-formula><ns0:math id=\"mm125\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>, the coefficients of the prediction models are determined by the least squares method according to previous estimation results and the actual queuing times. To determine the order parameter <inline-formula><ns0:math id=\"mm126\"><ns0:mi>p</ns0:mi></ns0:math></inline-formula>, i.e., the number of independent variables required to build the prediction model, we tested models based on one independent variable (<inline-formula><ns0:math id=\"mm127\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm128\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>1</ns0:mn></ns0:mrow></ns0:math></inline-formula>) and two independent variables (<inline-formula><ns0:math id=\"mm129\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>10</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm130\"><ns0:mrow><ns0:msub><ns0:mi>W</ns0:mi><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mo>\u2212</ns0:mo><ns0:mn>20</ns0:mn></ns0:mrow></ns0:msub></ns0:mrow></ns0:math></inline-formula>, i.e., <inline-formula><ns0:math id=\"mm131\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula>). The error statistics for both models are summarized in <xref ref-type=\"table\" rid=\"sensors-16-01958-t004\">Table 4</xref>. Experiments 1 and 2 use the same model training data and sample data for their predictions. Likewise, experiments 3 and 4 have the same model training and prediction data. Based on these experiments, we conclude that <inline-formula><ns0:math id=\"mm132\"><ns0:mrow><ns0:mi>p</ns0:mi><ns0:mo>=</ns0:mo><ns0:mn>2</ns0:mn></ns0:mrow></ns0:math></inline-formula> is an appropriate order parameter for the <inline-formula><ns0:math id=\"mm133\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mi>p</ns0:mi><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model.</p>",
                            "<p>The authors would like to thank Beijing Capital International Airport for providing permission to use the security system data. The project was supported by the National Science Found for Distinguished Young Scholars of China (Grant No. 41525004), the Science Fund for Creative Research Groups (Grant No. 41421001) and a NSFC grant (Grant No. 41231171).</p>"
                        ]
                    },
                    {
                        "content": "\u221235.40",
                        "cited_in": []
                    },
                    {
                        "content": "203.05",
                        "cited_in": []
                    },
                    {
                        "content": "161.41",
                        "cited_in": []
                    },
                    {
                        "content": "69.47%",
                        "cited_in": []
                    },
                    {
                        "content": "05",
                        "cited_in": [
                            "<p>To validate our method, we designed a queuing time monitoring system at the T3-C entrance of Beijing Capital International Airport. The trilateration method was chosen for the positioning technique. In the deployment phase of APs, we aimed to minimize the systematic errors. Le Dortz et al. [<xref rid=\"B45-sensors-16-01958\" ref-type=\"bibr\">45</xref>] verified that using more APs can help to improve the stability of WiFi positioning. Therefore, a greater number of APs improves the topological correctness. Regarding the topological relation, as the design of indoor positioning is an environment-dependent system because of the diversity of indoor environments, the experiment must be performed in situ. Under the condition of the largest number of APs, we test only a few deployment schemes due to the strict limitation in the security region. Specifically, in the T3-C security region, Beijing Capital International Airport, there are limited Internet access ports for the positioning system, and devices that affect the normal traffic and security check of passengers are not permitted. Therefore, we deployed the maximum number of APs according to principles mentioned in <xref ref-type=\"sec\" rid=\"sec2dot2-sensors-16-01958\">Section 2.2</xref> and changed their locations among a limited number of positions allowed by the airport side. Finally, we installed nine APs in the queue zone whose locations are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>. The seven APs on the right side were deployed inside the counters, and the two on the left were deployed near the escalator. We placed metal baffle plates near the border APs on the outside of the queue zone.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p>In addition to the APs deployed in and around the queue zone, there are many other APs in this building that are also used to track passengers\u2019 trajectories. Thus, the spatial extent of positioning data may capture the entire building. To remove duplicates, we marked out the research the area (an area that covers the queue zone and completed queuing trajectories), depicted as the extent of the picture frame in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, and removed records from this area based on their spatial coordinates. Before a network hardware item is produced, the manufacturer needs to apply for a MAC address from the Institute of Electrical and Electronic Engineers (IEEE). MAC addresses not found in the IEEE MAC list may be disguised MAC addresses (for security or privacy reasons) or they may be incorrect records. The records of such MAC addresses should be regarded as noise and removed. As network equipment, an AP itself can be detected by other APs. Therefore, records generated by APs also need to be removed. Furthermore, staff devices and fixed equipment that have network functions can also be detected by the positioning system, so records of such equipment should be excluded before queuing time estimation. In this study, we set 2 h as the maximum residence time in the research area. If the duration in the research area exceeds this maximum time, the MAC is regarded as the MAC of fixed equipment or a staff device, and the MAC is added to a list that is updated every day by the residence time judgment in the research area. In real-time queuing time estimation, the MAC addresses in this list are excluded. Some sample trajectories after data filtering are depicted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f007\">Figure 7</xref>.</p>",
                            "<p>We estimated queuing time in 10 min intervals between the hours of 5:00 a.m. to 9:00 p.m. from 11 August to 18 August. For validation, the corresponding check-in and check-out data from the airport security system, which we refer to as security data, were collected as the ground truth. These data record passenger IDs, check-in and check-out times, and number of security counters. By collating these records according to passenger ID, we calculated every passenger\u2019s queuing time. The queue zone has four special channels (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref>, top and bottom corners of the queue zone), which are prepared for \u201churry-off\u201d passengers (channels 1 and 2) and VIP passengers (channels 25 and 26). Passengers leaving from these channels do not need to queue like the other passengers. Therefore, the queuing time of passengers who pass through the queue zone via these channels is usually short, and the integrated trajectories of these passengers can scarcely be detected by the positioning system. In accordance with the positioning data results, the security records of these channels are removed and the actual queuing times determined from security data that are less than 60 s or more than 1800 s are also removed as incorrect results. The actual queuing times are aggregated into 10 min time slices according to the check-out time stamps. The mean queuing time calculated from security data in the same time slice can validate the results estimated by the WiFi positioning data (<xref ref-type=\"fig\" rid=\"sensors-16-01958-f008\">Figure 8</xref>).</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                            "<p>The number and locations of APs are restricted by the site environment and the limited number of Internet access ports at the T3-C entrance of Beijing Capital International Airport. Furthermore, facility transformation and maintenance require extra investment. Therefore, additional hardware facility installations are not accepted by the airport authority, and the optimal deployment scheme cannot be realized, which affects the topological accuracy. For example, in this study, the two APs deployed on the left in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f005\">Figure 5</xref> were not in the optimal locations.</p>"
                        ]
                    },
                    {
                        "content": "41.51",
                        "cited_in": []
                    },
                    {
                        "content": "190.07",
                        "cited_in": []
                    },
                    {
                        "content": "160.52",
                        "cited_in": []
                    },
                    {
                        "content": "69.47%",
                        "cited_in": []
                    },
                    {
                        "content": "06",
                        "cited_in": [
                            "<p>We collected WiFi positioning data (by RTmap Science and Technology Ltd., Beijing, China) for an entire day. The time during which queuing occurred was estimated according to the model described above. To resolve the variation in queuing time throughout the day, we divided the day into 10 min time slices. The main traffic passing through the T3-C entrance is from 5:00 a.m. to 9:00 p.m., so we only estimated the queuing time during this time-frame. We simultaneously collected check-in and check-out data from the security system and calculated the actual queuing time for validation. <xref ref-type=\"fig\" rid=\"sensors-16-01958-f006\">Figure 6</xref> shows the validation results of our estimation. The mean absolute error of the estimation was 156 s, and 69.07% of the absolute errors were less than 200 s, which indicates that our queuing time determination and estimation model is practicable in real-life scenarios.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">We collected eight days of WiFi positioning data (by RTmap Science and Technology Ltd.) from the T3-C entrance of Beijing Capital International Airport from 11 August to 18 August. Each day included more than 6.5 million records, and the fields of these records were:\n<disp-formula id=\"FD9-sensors-16-01958\"><ns0:math id=\"mm101\"><ns0:mrow><ns0:mrow><ns0:mo>[</ns0:mo><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub><ns0:mo>,</ns0:mo><ns0:mo>\u00a0</ns0:mo><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow><ns0:mo>]</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></disp-formula>\nwhere <inline-formula><ns0:math id=\"mm102\"><ns0:mrow><ns0:mi>t</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>e</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>s</ns0:mi><ns0:mi>t</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>m</ns0:mi><ns0:mi>p</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the time stamp recorded when a positioning location was collected; <inline-formula><ns0:math id=\"mm103\"><ns0:mrow><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the media access control address of a mobile device; <inline-formula><ns0:math id=\"mm104\"><ns0:mrow><ns0:mi>b</ns0:mi><ns0:mi>u</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>g</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the serial number of the building (for example, terminal T3); <inline-formula><ns0:math id=\"mm105\"><ns0:mrow><ns0:mi>f</ns0:mi><ns0:mi>l</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>I</ns0:mi><ns0:mi>D</ns0:mi></ns0:mrow></ns0:math></inline-formula> denotes the floor number; <inline-formula><ns0:math id=\"mm106\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>X</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm107\"><ns0:mrow><ns0:mi>c</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>o</ns0:mi><ns0:mi>r</ns0:mi><ns0:mi>d</ns0:mi><ns0:mi>i</ns0:mi><ns0:mi>n</ns0:mi><ns0:mi>a</ns0:mi><ns0:mi>t</ns0:mi><ns0:msub><ns0:mi>e</ns0:mi><ns0:mi>Y</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> are the <inline-formula><ns0:math id=\"mm108\"><ns0:mi>x</ns0:mi></ns0:math></inline-formula> and <inline-formula><ns0:math id=\"mm109\"><ns0:mi>y</ns0:mi></ns0:math></inline-formula> coordinates, respectively, of the location; and <inline-formula><ns0:math id=\"mm110\"><ns0:mrow><ns0:mi>A</ns0:mi><ns0:mi>P</ns0:mi><ns0:mo>_</ns0:mo><ns0:mi>M</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>C</ns0:mi></ns0:mrow></ns0:math></inline-formula> is the MAC address of the AP that provides the strongest signal for the device when positioning.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>"
                        ]
                    },
                    {
                        "content": "27.38",
                        "cited_in": []
                    },
                    {
                        "content": "163.27",
                        "cited_in": []
                    },
                    {
                        "content": "132.29",
                        "cited_in": []
                    },
                    {
                        "content": "77.89%",
                        "cited_in": []
                    }
                ]
            },
            {
                "table_id": "sensors-16-01958-t005",
                "body": "<thead><tr><th rowspan=\"2\" align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" colspan=\"1\">Models</th><th colspan=\"4\" align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\">Prediction Error Statistics</th></tr><tr><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Mean</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Std.</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">MAE</th><th align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 200 s</th></tr></thead><tbody><tr><td align=\"left\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">Models trained by estimation results of previous 1 day</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">13.19</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">219.23</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">168.50</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">69.47%</td></tr><tr><td align=\"left\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">Models trained by estimation results of previous 2 days</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">\u221210.53</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">214.29</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">161.36</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">70.52%</td></tr><tr><td align=\"left\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Models trained by estimation results of previous 3 days</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">\u221214.41</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">213.72</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">160.47</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">70.88%</td></tr></tbody>",
                "caption": "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Comparison of the prediction errors from <inline-formula><ns0:math id=\"mm143\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained using different data.</p>",
                "foots": [],
                "paragraphs": [
                    {
                        "text": "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Regarding the regression coefficients (<inline-formula><ns0:math id=\"mm138\"><ns0:mrow><ns0:msub><ns0:mi>\u03c6</ns0:mi><ns0:mi>i</ns0:mi></ns0:msub></ns0:mrow></ns0:math></inline-formula> in Equation (3)), we need to determine how many days of training data are suitable for <inline-formula><ns0:math id=\"mm139\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>. We tested three solutions, in which <inline-formula><ns0:math id=\"mm140\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was trained by the estimation results and ground truth of the preceding one, two or three days. Then, we used <inline-formula><ns0:math id=\"mm141\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained by these solutions to predict the queuing times for the same days. <xref ref-type=\"table\" rid=\"sensors-16-01958-t005\">Table 5</xref> shows the mean error statistics of the prediction results, from which we conclude that <inline-formula><ns0:math id=\"mm142\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> trained with the estimation results and ground truth of the previous three days (for example, using the model trained by the results of 11\u201313 August to predict the queuing time on 14 August) are theoretically sound. </p>",
                        "citations": []
                    }
                ],
                "cells": [
                    {
                        "content": "Models trained by estimation results of previous 1 day",
                        "cited_in": []
                    },
                    {
                        "content": "13.19",
                        "cited_in": []
                    },
                    {
                        "content": "219.23",
                        "cited_in": []
                    },
                    {
                        "content": "168.50",
                        "cited_in": []
                    },
                    {
                        "content": "69.47%",
                        "cited_in": []
                    },
                    {
                        "content": "Models trained by estimation results of previous 2 days",
                        "cited_in": []
                    },
                    {
                        "content": "\u221210.53",
                        "cited_in": []
                    },
                    {
                        "content": "214.29",
                        "cited_in": []
                    },
                    {
                        "content": "161.36",
                        "cited_in": []
                    },
                    {
                        "content": "70.52%",
                        "cited_in": []
                    },
                    {
                        "content": "Models trained by estimation results of previous 3 days",
                        "cited_in": []
                    },
                    {
                        "content": "\u221214.41",
                        "cited_in": []
                    },
                    {
                        "content": "213.72",
                        "cited_in": []
                    },
                    {
                        "content": "160.47",
                        "cited_in": []
                    },
                    {
                        "content": "70.88%",
                        "cited_in": []
                    }
                ]
            },
            {
                "table_id": "sensors-16-01958-t006",
                "body": "<thead><tr><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Model</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Mean</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">Std.</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">MAE</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 60 s</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 120 s</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 180 s</th><th align=\"center\" valign=\"middle\" style=\"border-top:solid thin;border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">AE \u2264 200 s</th></tr></thead><tbody xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\"><tr><td align=\"left\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><inline-formula><ns0:math id=\"mm148\"><ns0:mrow><ns0:mstyle mathvariant=\"bold\" mathsize=\"normal\"><ns0:mi>N</ns0:mi><ns0:mi>A</ns0:mi><ns0:mi>R</ns0:mi></ns0:mstyle><ns0:mrow><ns0:mo mathvariant=\"bold\">(</ns0:mo><ns0:mn mathvariant=\"bold\">2</ns0:mn><ns0:mo mathvariant=\"bold\">)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula>\n</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">5.21</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">188.33</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">148.95</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">28.21%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">50.53%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">68.42%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">73.05%</td></tr><tr><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\"><bold>Holt-Winters</bold></td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">19.06</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">206.89</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">162.42</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">23.71%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">44.74%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">64.54%</td><td align=\"center\" valign=\"middle\" rowspan=\"1\" colspan=\"1\">67.84%</td></tr><tr><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\"><bold>STL-ARIMA</bold></td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">18.15</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">188.47</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">152.90</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">24.33%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">45.98%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">64.12%</td><td align=\"center\" valign=\"middle\" style=\"border-bottom:solid thin\" rowspan=\"1\" colspan=\"1\">69.28%</td></tr></tbody>",
                "caption": "<p>Queuing time prediction errors of different models.</p>",
                "foots": [],
                "paragraphs": [
                    {
                        "text": "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">For real-time queuing time prediction, the step length of time slices for prediction is set to 1 for the Holt-Winters and STL-ARIMA models, that is, we only use these models to predict queuing time in the upcoming time slice. The periodic parameter of the models (Winters and STL-ARIMA) is set to 97 (97 time slices per day from 5:00 a.m. to 9:00 p.m.). The parameters of <inline-formula><ns0:math id=\"mm146\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> are calculated using the least squares method. The Holt-Winters and STL-ARIMA predictions are implemented using the forecast package [<xref rid=\"B48-sensors-16-01958\" ref-type=\"bibr\">48</xref>] in R Language [<xref rid=\"B49-sensors-16-01958\" ref-type=\"bibr\">49</xref>], and the remaining parameters, except the time step and period, are automatically tuned by the procedure. The average prediction errors of these three models from 11 August to 14 August are shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, which shows that <inline-formula><ns0:math id=\"mm147\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> achieves better results than the other two models.</p>",
                        "citations": [
                            "<ref xmlns:ns0=\"http://www.w3.org/1999/xlink\" id=\"B48-sensors-16-01958\"><label>48.</label><element-citation publication-type=\"webpage\">\n<article-title>Forecast: Forecasting Functions for Time Series and Linear Models</article-title>\n<comment>Available online: <ext-link ext-link-type=\"uri\" ns0:href=\"https://cran.r-project.org/web/packages/forecast/index.html\">https://cran.r-project.org/web/packages/forecast/index.html</ext-link></comment>\n<date-in-citation>(accessed on 27 September 2016)</date-in-citation>\n</element-citation></ref>",
                            "<ref id=\"B49-sensors-16-01958\"><label>49.</label><element-citation publication-type=\"book\">\n<person-group person-group-type=\"author\"><name><surname>Team</surname><given-names>R.C.</given-names></name></person-group>\n<source>R: A Language and Environment for Statistical Computing</source>\n<publisher-name>R Foundation for Statistical Computing</publisher-name>\n<publisher-loc>Vienna, Austria</publisher-loc>\n<year>2013</year>\n</element-citation></ref>"
                        ]
                    },
                    {
                        "text": "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>",
                        "citations": []
                    }
                ],
                "cells": [
                    {
                        "content": "5.21",
                        "cited_in": []
                    },
                    {
                        "content": "188.33",
                        "cited_in": []
                    },
                    {
                        "content": "148.95",
                        "cited_in": []
                    },
                    {
                        "content": "28.21%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>"
                        ]
                    },
                    {
                        "content": "50.53%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>"
                        ]
                    },
                    {
                        "content": "68.42%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>"
                        ]
                    },
                    {
                        "content": "73.05%",
                        "cited_in": [
                            "<p xmlns:ns0=\"http://www.w3.org/1998/Math/MathML\">Some prediction results from the <inline-formula><ns0:math id=\"mm149\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> model are plotted in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>, along with the actual queuing times. The mean queuing time from 14 August to 18 August was 542 s, while the mean queuing time predicted by <inline-formula><ns0:math id=\"mm150\"><ns0:mrow><ns0:mi>NAR</ns0:mi><ns0:mrow><ns0:mo>(</ns0:mo><ns0:mn>2</ns0:mn><ns0:mo>)</ns0:mo></ns0:mrow></ns0:mrow></ns0:math></inline-formula> was 548 s. The MAE of the prediction results was 149 s, which is approximately 27.49% of the actual queuing time. As shown in <xref ref-type=\"table\" rid=\"sensors-16-01958-t006\">Table 6</xref>, on average, 28.21% of the AEs were less than 60 s, 50.53% were less than 120 s, 68.42% were less than 180 s and 73.05% were less than 200 s. However, the results also show a few weaknesses, for example, the beginning of the prediction curve in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>b and the jump point in <xref ref-type=\"fig\" rid=\"sensors-16-01958-f009\">Figure 9</xref>c.</p>"
                        ]
                    },
                    {
                        "content": "19.06",
                        "cited_in": []
                    },
                    {
                        "content": "206.89",
                        "cited_in": []
                    },
                    {
                        "content": "162.42",
                        "cited_in": []
                    },
                    {
                        "content": "23.71%",
                        "cited_in": []
                    },
                    {
                        "content": "44.74%",
                        "cited_in": []
                    },
                    {
                        "content": "64.54%",
                        "cited_in": []
                    },
                    {
                        "content": "67.84%",
                        "cited_in": []
                    },
                    {
                        "content": "18.15",
                        "cited_in": []
                    },
                    {
                        "content": "188.47",
                        "cited_in": []
                    },
                    {
                        "content": "152.90",
                        "cited_in": []
                    },
                    {
                        "content": "24.33%",
                        "cited_in": []
                    },
                    {
                        "content": "45.98%",
                        "cited_in": []
                    },
                    {
                        "content": "64.12%",
                        "cited_in": []
                    },
                    {
                        "content": "69.28%",
                        "cited_in": []
                    }
                ]
            }
        ],
        "figures": [
            {
                "fig_id": "sensors-16-01958-f001",
                "caption": "<caption><p>Theoretical map of the trilateration positioning method.</p></caption>",
                "source": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5134617/bin/sensors-16-01958-g001.jpg"
            },
            {
                "fig_id": "sensors-16-01958-f002",
                "caption": "<caption><p>Process flow of the queuing time determination model.</p></caption>",
                "source": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5134617/bin/sensors-16-01958-g002.jpg"
            },
            {
                "fig_id": "sensors-16-01958-f003",
                "caption": "<caption><p>Queuing sequence of an individual in the time domain.</p></caption>",
                "source": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5134617/bin/sensors-16-01958-g003.jpg"
            },
            {
                "fig_id": "sensors-16-01958-f004",
                "caption": "<caption><p>Time slicing for queuing time estimation and prediction.</p></caption>",
                "source": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5134617/bin/sensors-16-01958-g004.jpg"
            },
            {
                "fig_id": "sensors-16-01958-f005",
                "caption": "<caption><p>General overview of the queue zone and the locations of the APs.</p></caption>",
                "source": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5134617/bin/sensors-16-01958-g005.jpg"
            },
            {
                "fig_id": "sensors-16-01958-f006",
                "caption": "<caption><p>Validation results of the WiFi-based estimation model.</p></caption>",
                "source": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5134617/bin/sensors-16-01958-g006.jpg"
            },
            {
                "fig_id": "sensors-16-01958-f007",
                "caption": "<caption><p>Passenger trajectory examples. (<bold>a</bold>\u2013<bold>d</bold>) show trajectories of four different passengers in the T3-C Entrance.</p></caption>",
                "source": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5134617/bin/sensors-16-01958-g007.jpg"
            },
            {
                "fig_id": "sensors-16-01958-f008",
                "caption": "<caption><p>Comparison of the estimated and actual queuing times. (<bold>a</bold>) Comparison of the estimated and actual queuing times on 11 August; (<bold>b</bold>) Comparison of the estimated and actual queuing times on 12 August; (<bold>c</bold>) Comparison of the estimated and actual queuing times on 13 August; (<bold>d</bold>) Comparison of the estimated and actual queuing times on 14 August.</p></caption>",
                "source": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5134617/bin/sensors-16-01958-g008.jpg"
            },
            {
                "fig_id": "sensors-16-01958-f009",
                "caption": "<caption><p>Comparison of the predicted and actual queuing times. (<bold>a</bold>) Comparison of the predicted and actual queuing times on 14 August; (<bold>b</bold>) Comparison of the predicted and actual queuing times on 15 August; (<bold>c</bold>) Comparison of the predicted and actual queuing times on 16 August; (<bold>d</bold>) Comparison of the predicted and actual queuing times on 17 August.</p></caption>",
                "source": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5134617/bin/sensors-16-01958-g009.jpg"
            }
        ]
    }
}